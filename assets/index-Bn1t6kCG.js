(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function C0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qm={exports:{}},nl={},Qm={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to=Symbol.for("react.element"),x0=Symbol.for("react.portal"),R0=Symbol.for("react.fragment"),P0=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),D0=Symbol.for("react.context"),N0=Symbol.for("react.forward_ref"),O0=Symbol.for("react.suspense"),M0=Symbol.for("react.memo"),L0=Symbol.for("react.lazy"),Ad=Symbol.iterator;function b0(t){return t===null||typeof t!="object"?null:(t=Ad&&t[Ad]||t["@@iterator"],typeof t=="function"?t:null)}var Km={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gm=Object.assign,Ym={};function Vi(t,e,n){this.props=t,this.context=e,this.refs=Ym,this.updater=n||Km}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xm(){}Xm.prototype=Vi.prototype;function Zc(t,e,n){this.props=t,this.context=e,this.refs=Ym,this.updater=n||Km}var eh=Zc.prototype=new Xm;eh.constructor=Zc;Gm(eh,Vi.prototype);eh.isPureReactComponent=!0;var Cd=Array.isArray,Jm=Object.prototype.hasOwnProperty,th={current:null},Zm={key:!0,ref:!0,__self:!0,__source:!0};function eg(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Jm.call(e,r)&&!Zm.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:to,type:t,key:s,ref:a,props:i,_owner:th.current}}function F0(t,e){return{$$typeof:to,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nh(t){return typeof t=="object"&&t!==null&&t.$$typeof===to}function j0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xd=/\/+/g;function eu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?j0(""+t.key):e.toString(36)}function Jo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case to:case x0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+eu(a,0):r,Cd(i)?(n="",t!=null&&(n=t.replace(xd,"$&/")+"/"),Jo(i,e,n,"",function(h){return h})):i!=null&&(nh(i)&&(i=F0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(xd,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Cd(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+eu(s,l);a+=Jo(s,e,n,u,i)}else if(u=b0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+eu(s,l++),a+=Jo(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ro(t,e,n){if(t==null)return t;var r=[],i=0;return Jo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function z0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},Zo={transition:null},U0={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Zo,ReactCurrentOwner:th};function tg(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Ro,forEach:function(t,e,n){Ro(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ro(t,function(){e++}),e},toArray:function(t){return Ro(t,function(e){return e})||[]},only:function(t){if(!nh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Vi;Z.Fragment=R0;Z.Profiler=k0;Z.PureComponent=Zc;Z.StrictMode=P0;Z.Suspense=O0;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U0;Z.act=tg;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Gm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=th.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Jm.call(e,u)&&!Zm.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:to,type:t.type,key:i,ref:s,props:r,_owner:a}};Z.createContext=function(t){return t={$$typeof:D0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V0,_context:t},t.Consumer=t};Z.createElement=eg;Z.createFactory=function(t){var e=eg.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:N0,render:t}};Z.isValidElement=nh;Z.lazy=function(t){return{$$typeof:L0,_payload:{_status:-1,_result:t},_init:z0}};Z.memo=function(t,e){return{$$typeof:M0,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Zo.transition;Zo.transition={};try{t()}finally{Zo.transition=e}};Z.unstable_act=tg;Z.useCallback=function(t,e){return mt.current.useCallback(t,e)};Z.useContext=function(t){return mt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return mt.current.useEffect(t,e)};Z.useId=function(){return mt.current.useId()};Z.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return mt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};Z.useRef=function(t){return mt.current.useRef(t)};Z.useState=function(t){return mt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return mt.current.useTransition()};Z.version="18.3.1";Qm.exports=Z;var X=Qm.exports;const B0=C0(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0=X,H0=Symbol.for("react.element"),W0=Symbol.for("react.fragment"),q0=Object.prototype.hasOwnProperty,Q0=$0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K0={key:!0,ref:!0,__self:!0,__source:!0};function ng(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)q0.call(e,r)&&!K0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:H0,type:t,key:s,ref:a,props:i,_owner:Q0.current}}nl.Fragment=W0;nl.jsx=ng;nl.jsxs=ng;qm.exports=nl;var C=qm.exports,bu={},rg={exports:{}},Dt={},ig={exports:{}},sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Q){var Y=U.length;U.push(Q);e:for(;0<Y;){var pe=Y-1>>>1,le=U[pe];if(0<i(le,Q))U[pe]=Q,U[Y]=le,Y=pe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Q=U[0],Y=U.pop();if(Y!==Q){U[0]=Y;e:for(var pe=0,le=U.length,we=le>>>1;pe<we;){var Mt=2*(pe+1)-1,Bt=U[Mt],$t=Mt+1,Ht=U[$t];if(0>i(Bt,Y))$t<le&&0>i(Ht,Bt)?(U[pe]=Ht,U[$t]=Y,pe=$t):(U[pe]=Bt,U[Mt]=Y,pe=Mt);else if($t<le&&0>i(Ht,Y))U[pe]=Ht,U[$t]=Y,pe=$t;else break e}}return Q}function i(U,Q){var Y=U.sortIndex-Q.sortIndex;return Y!==0?Y:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,p=3,I=!1,R=!1,V=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(U){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=U)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function N(U){if(V=!1,A(U),!R)if(n(u)!==null)R=!0,Oe(j);else{var Q=n(h);Q!==null&&Ot(N,Q.startTime-U)}}function j(U,Q){R=!1,V&&(V=!1,S(y),y=-1),I=!0;var Y=p;try{for(A(Q),g=n(u);g!==null&&(!(g.expirationTime>Q)||U&&!x());){var pe=g.callback;if(typeof pe=="function"){g.callback=null,p=g.priorityLevel;var le=pe(g.expirationTime<=Q);Q=t.unstable_now(),typeof le=="function"?g.callback=le:g===n(u)&&r(u),A(Q)}else r(u);g=n(u)}if(g!==null)var we=!0;else{var Mt=n(h);Mt!==null&&Ot(N,Mt.startTime-Q),we=!1}return we}finally{g=null,p=Y,I=!1}}var F=!1,E=null,y=-1,_=5,T=-1;function x(){return!(t.unstable_now()-T<_)}function P(){if(E!==null){var U=t.unstable_now();T=U;var Q=!0;try{Q=E(!0,U)}finally{Q?w():(F=!1,E=null)}}else F=!1}var w;if(typeof v=="function")w=function(){v(P)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Je=Ve.port2;Ve.port1.onmessage=P,w=function(){Je.postMessage(null)}}else w=function(){M(P,0)};function Oe(U){E=U,F||(F=!0,w())}function Ot(U,Q){y=M(function(){U(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){R||I||(R=!0,Oe(j))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var Y=p;p=Q;try{return U()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=p;p=U;try{return Q()}finally{p=Y}},t.unstable_scheduleCallback=function(U,Q,Y){var pe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,U){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Y+le,U={id:d++,callback:Q,priorityLevel:U,startTime:Y,expirationTime:le,sortIndex:-1},Y>pe?(U.sortIndex=Y,e(h,U),n(u)===null&&U===n(h)&&(V?(S(y),y=-1):V=!0,Ot(N,Y-pe))):(U.sortIndex=le,e(u,U),R||I||(R=!0,Oe(j))),U},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(U){var Q=p;return function(){var Y=p;p=Q;try{return U.apply(this,arguments)}finally{p=Y}}}})(sg);ig.exports=sg;var G0=ig.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0=X,Vt=G0;function b(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var og=new Set,Ps={};function Mr(t,e){mi(t,e),mi(t+"Capture",e)}function mi(t,e){for(Ps[t]=e,t=0;t<e.length;t++)og.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fu=Object.prototype.hasOwnProperty,X0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rd={},Pd={};function J0(t){return Fu.call(Pd,t)?!0:Fu.call(Rd,t)?!1:X0.test(t)?Pd[t]=!0:(Rd[t]=!0,!1)}function Z0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function e1(t,e,n,r){if(e===null||typeof e>"u"||Z0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rh=/[\-:]([a-z])/g;function ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rh,ih);Ye[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rh,ih);Ye[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rh,ih);Ye[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sh(t,e,n,r){var i=Ye.hasOwnProperty(e)?Ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e1(e,n,i,r)&&(n=null),r||i===null?J0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=Y0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Po=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),oh=Symbol.for("react.strict_mode"),ju=Symbol.for("react.profiler"),ag=Symbol.for("react.provider"),lg=Symbol.for("react.context"),ah=Symbol.for("react.forward_ref"),zu=Symbol.for("react.suspense"),Uu=Symbol.for("react.suspense_list"),lh=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),ug=Symbol.for("react.offscreen"),kd=Symbol.iterator;function Ji(t){return t===null||typeof t!="object"?null:(t=kd&&t[kd]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,tu;function as(t){if(tu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tu=e&&e[1]||""}return`
`+tu+t}var nu=!1;function ru(t,e){if(!t||nu)return"";nu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{nu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function t1(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=ru(t.type,!1),t;case 11:return t=ru(t.type.render,!1),t;case 1:return t=ru(t.type,!0),t;default:return""}}function Bu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yr:return"Fragment";case Gr:return"Portal";case ju:return"Profiler";case oh:return"StrictMode";case zu:return"Suspense";case Uu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lg:return(t.displayName||"Context")+".Consumer";case ag:return(t._context.displayName||"Context")+".Provider";case ah:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lh:return e=t.displayName||null,e!==null?e:Bu(t.type)||"Memo";case Mn:e=t._payload,t=t._init;try{return Bu(t(e))}catch{}}return null}function n1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bu(e);case 8:return e===oh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function er(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r1(t){var e=cg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ko(t){t._valueTracker||(t._valueTracker=r1(t))}function hg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $u(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=er(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fg(t,e){e=e.checked,e!=null&&sh(t,"checked",e,!1)}function Hu(t,e){fg(t,e);var n=er(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wu(t,e.type,er(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dd(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wu(t,e,n){(e!=="number"||ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ls=Array.isArray;function ai(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+er(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(b(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(b(92));if(ls(n)){if(1<n.length)throw Error(b(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:er(n)}}function dg(t,e){var n=er(e.value),r=er(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Od(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vo,mg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vo=Vo||document.createElement("div"),Vo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ks(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i1=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(t){i1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ms[e]=ms[t]})});function gg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ms.hasOwnProperty(t)&&ms[t]?(""+e).trim():e+"px"}function yg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var s1=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(t,e){if(e){if(s1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(b(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(b(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(b(61))}if(e.style!=null&&typeof e.style!="object")throw Error(b(62))}}function Gu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yu=null;function uh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xu=null,li=null,ui=null;function Md(t){if(t=io(t)){if(typeof Xu!="function")throw Error(b(280));var e=t.stateNode;e&&(e=al(e),Xu(t.stateNode,t.type,e))}}function vg(t){li?ui?ui.push(t):ui=[t]:li=t}function _g(){if(li){var t=li,e=ui;if(ui=li=null,Md(t),e)for(t=0;t<e.length;t++)Md(e[t])}}function Eg(t,e){return t(e)}function wg(){}var iu=!1;function Tg(t,e,n){if(iu)return t(e,n);iu=!0;try{return Eg(t,e,n)}finally{iu=!1,(li!==null||ui!==null)&&(wg(),_g())}}function Vs(t,e){var n=t.stateNode;if(n===null)return null;var r=al(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(b(231,e,typeof n));return n}var Ju=!1;if(Tn)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Ju=!1}function o1(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var gs=!1,ya=null,va=!1,Zu=null,a1={onError:function(t){gs=!0,ya=t}};function l1(t,e,n,r,i,s,a,l,u){gs=!1,ya=null,o1.apply(a1,arguments)}function u1(t,e,n,r,i,s,a,l,u){if(l1.apply(this,arguments),gs){if(gs){var h=ya;gs=!1,ya=null}else throw Error(b(198));va||(va=!0,Zu=h)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ld(t){if(Lr(t)!==t)throw Error(b(188))}function c1(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(b(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ld(i),t;if(s===r)return Ld(i),e;s=s.sibling}throw Error(b(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(b(189))}}if(n.alternate!==r)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?t:e}function Ig(t){return t=c1(t),t!==null?Ag(t):null}function Ag(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ag(t);if(e!==null)return e;t=t.sibling}return null}var Cg=Vt.unstable_scheduleCallback,bd=Vt.unstable_cancelCallback,h1=Vt.unstable_shouldYield,f1=Vt.unstable_requestPaint,ke=Vt.unstable_now,d1=Vt.unstable_getCurrentPriorityLevel,ch=Vt.unstable_ImmediatePriority,xg=Vt.unstable_UserBlockingPriority,_a=Vt.unstable_NormalPriority,p1=Vt.unstable_LowPriority,Rg=Vt.unstable_IdlePriority,rl=null,an=null;function m1(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(rl,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:v1,g1=Math.log,y1=Math.LN2;function v1(t){return t>>>=0,t===0?32:31-(g1(t)/y1|0)|0}var Do=64,No=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ea(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=us(l):(s&=a,s!==0&&(r=us(s)))}else a=n&~i,a!==0?r=us(a):s!==0&&(r=us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jt(e),i=1<<n,r|=t[n],e&=~i;return r}function _1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Jt(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=_1(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function ec(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pg(){var t=Do;return Do<<=1,!(Do&4194240)&&(Do=64),t}function su(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function no(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=n}function w1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Jt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ce=0;function kg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vg,fh,Dg,Ng,Og,tc=!1,Oo=[],Bn=null,$n=null,Hn=null,Ds=new Map,Ns=new Map,bn=[],T1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fd(t,e){switch(t){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Ds.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ns.delete(e.pointerId)}}function es(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=io(e),e!==null&&fh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function S1(t,e,n,r,i){switch(e){case"focusin":return Bn=es(Bn,t,e,n,r,i),!0;case"dragenter":return $n=es($n,t,e,n,r,i),!0;case"mouseover":return Hn=es(Hn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ds.set(s,es(Ds.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ns.set(s,es(Ns.get(s)||null,t,e,n,r,i)),!0}return!1}function Mg(t){var e=Tr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=Sg(n),e!==null){t.blockedOn=e,Og(t.priority,function(){Dg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yu=r,n.target.dispatchEvent(r),Yu=null}else return e=io(n),e!==null&&fh(e),t.blockedOn=n,!1;e.shift()}return!0}function jd(t,e,n){ea(t)&&n.delete(e)}function I1(){tc=!1,Bn!==null&&ea(Bn)&&(Bn=null),$n!==null&&ea($n)&&($n=null),Hn!==null&&ea(Hn)&&(Hn=null),Ds.forEach(jd),Ns.forEach(jd)}function ts(t,e){t.blockedOn===e&&(t.blockedOn=null,tc||(tc=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,I1)))}function Os(t){function e(i){return ts(i,t)}if(0<Oo.length){ts(Oo[0],t);for(var n=1;n<Oo.length;n++){var r=Oo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bn!==null&&ts(Bn,t),$n!==null&&ts($n,t),Hn!==null&&ts(Hn,t),Ds.forEach(e),Ns.forEach(e),n=0;n<bn.length;n++)r=bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bn.length&&(n=bn[0],n.blockedOn===null);)Mg(n),n.blockedOn===null&&bn.shift()}var ci=Pn.ReactCurrentBatchConfig,wa=!0;function A1(t,e,n,r){var i=ce,s=ci.transition;ci.transition=null;try{ce=1,dh(t,e,n,r)}finally{ce=i,ci.transition=s}}function C1(t,e,n,r){var i=ce,s=ci.transition;ci.transition=null;try{ce=4,dh(t,e,n,r)}finally{ce=i,ci.transition=s}}function dh(t,e,n,r){if(wa){var i=nc(t,e,n,r);if(i===null)mu(t,e,r,Ta,n),Fd(t,r);else if(S1(i,t,e,n,r))r.stopPropagation();else if(Fd(t,r),e&4&&-1<T1.indexOf(t)){for(;i!==null;){var s=io(i);if(s!==null&&Vg(s),s=nc(t,e,n,r),s===null&&mu(t,e,r,Ta,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else mu(t,e,r,null,n)}}var Ta=null;function nc(t,e,n,r){if(Ta=null,t=uh(r),t=Tr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ta=t,null}function Lg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d1()){case ch:return 1;case xg:return 4;case _a:case p1:return 16;case Rg:return 536870912;default:return 16}default:return 16}}var jn=null,ph=null,ta=null;function bg(){if(ta)return ta;var t,e=ph,n=e.length,r,i="value"in jn?jn.value:jn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return ta=i.slice(t,1<r?1-r:void 0)}function na(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mo(){return!0}function zd(){return!1}function Nt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mo:zd,this.isPropagationStopped=zd,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),e}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mh=Nt(Di),ro=Ie({},Di,{view:0,detail:0}),x1=Nt(ro),ou,au,ns,il=Ie({},ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(ou=t.screenX-ns.screenX,au=t.screenY-ns.screenY):au=ou=0,ns=t),ou)},movementY:function(t){return"movementY"in t?t.movementY:au}}),Ud=Nt(il),R1=Ie({},il,{dataTransfer:0}),P1=Nt(R1),k1=Ie({},ro,{relatedTarget:0}),lu=Nt(k1),V1=Ie({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),D1=Nt(V1),N1=Ie({},Di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),O1=Nt(N1),M1=Ie({},Di,{data:0}),Bd=Nt(M1),L1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=F1[t])?!!e[t]:!1}function gh(){return j1}var z1=Ie({},ro,{key:function(t){if(t.key){var e=L1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=na(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?b1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gh,charCode:function(t){return t.type==="keypress"?na(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?na(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U1=Nt(z1),B1=Ie({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=Nt(B1),$1=Ie({},ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gh}),H1=Nt($1),W1=Ie({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),q1=Nt(W1),Q1=Ie({},il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K1=Nt(Q1),G1=[9,13,27,32],yh=Tn&&"CompositionEvent"in window,ys=null;Tn&&"documentMode"in document&&(ys=document.documentMode);var Y1=Tn&&"TextEvent"in window&&!ys,Fg=Tn&&(!yh||ys&&8<ys&&11>=ys),Hd=" ",Wd=!1;function jg(t,e){switch(t){case"keyup":return G1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function X1(t,e){switch(t){case"compositionend":return zg(e);case"keypress":return e.which!==32?null:(Wd=!0,Hd);case"textInput":return t=e.data,t===Hd&&Wd?null:t;default:return null}}function J1(t,e){if(Xr)return t==="compositionend"||!yh&&jg(t,e)?(t=bg(),ta=ph=jn=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fg&&e.locale!=="ko"?null:e.data;default:return null}}var Z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Z1[t.type]:e==="textarea"}function Ug(t,e,n,r){vg(r),e=Sa(e,"onChange"),0<e.length&&(n=new mh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vs=null,Ms=null;function eE(t){Jg(t,0)}function sl(t){var e=ei(t);if(hg(e))return t}function tE(t,e){if(t==="change")return e}var Bg=!1;if(Tn){var uu;if(Tn){var cu="oninput"in document;if(!cu){var Qd=document.createElement("div");Qd.setAttribute("oninput","return;"),cu=typeof Qd.oninput=="function"}uu=cu}else uu=!1;Bg=uu&&(!document.documentMode||9<document.documentMode)}function Kd(){vs&&(vs.detachEvent("onpropertychange",$g),Ms=vs=null)}function $g(t){if(t.propertyName==="value"&&sl(Ms)){var e=[];Ug(e,Ms,t,uh(t)),Tg(eE,e)}}function nE(t,e,n){t==="focusin"?(Kd(),vs=e,Ms=n,vs.attachEvent("onpropertychange",$g)):t==="focusout"&&Kd()}function rE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sl(Ms)}function iE(t,e){if(t==="click")return sl(e)}function sE(t,e){if(t==="input"||t==="change")return sl(e)}function oE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:oE;function Ls(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fu.call(e,i)||!en(t[i],e[i]))return!1}return!0}function Gd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yd(t,e){var n=Gd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gd(n)}}function Hg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wg(){for(var t=window,e=ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ga(t.document)}return e}function vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aE(t){var e=Wg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hg(n.ownerDocument.documentElement,n)){if(r!==null&&vh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Yd(n,s);var a=Yd(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lE=Tn&&"documentMode"in document&&11>=document.documentMode,Jr=null,rc=null,_s=null,ic=!1;function Xd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ic||Jr==null||Jr!==ga(r)||(r=Jr,"selectionStart"in r&&vh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_s&&Ls(_s,r)||(_s=r,r=Sa(rc,"onSelect"),0<r.length&&(e=new mh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jr)))}function Lo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zr={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},hu={},qg={};Tn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function ol(t){if(hu[t])return hu[t];if(!Zr[t])return t;var e=Zr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qg)return hu[t]=e[n];return t}var Qg=ol("animationend"),Kg=ol("animationiteration"),Gg=ol("animationstart"),Yg=ol("transitionend"),Xg=new Map,Jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){Xg.set(t,e),Mr(e,[t])}for(var fu=0;fu<Jd.length;fu++){var du=Jd[fu],uE=du.toLowerCase(),cE=du[0].toUpperCase()+du.slice(1);ur(uE,"on"+cE)}ur(Qg,"onAnimationEnd");ur(Kg,"onAnimationIteration");ur(Gg,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(Yg,"onTransitionEnd");mi("onMouseEnter",["mouseout","mouseover"]);mi("onMouseLeave",["mouseout","mouseover"]);mi("onPointerEnter",["pointerout","pointerover"]);mi("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hE=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function Zd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,u1(r,e,void 0,t),t.currentTarget=null}function Jg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Zd(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Zd(i,l,h),s=u}}}if(va)throw t=Zu,va=!1,Zu=null,t}function ve(t,e){var n=e[uc];n===void 0&&(n=e[uc]=new Set);var r=t+"__bubble";n.has(r)||(Zg(e,t,2,!1),n.add(r))}function pu(t,e,n){var r=0;e&&(r|=4),Zg(n,t,r,e)}var bo="_reactListening"+Math.random().toString(36).slice(2);function bs(t){if(!t[bo]){t[bo]=!0,og.forEach(function(n){n!=="selectionchange"&&(hE.has(n)||pu(n,!1,t),pu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bo]||(e[bo]=!0,pu("selectionchange",!1,e))}}function Zg(t,e,n,r){switch(Lg(e)){case 1:var i=A1;break;case 4:i=C1;break;default:i=dh}n=i.bind(null,e,n,t),i=void 0,!Ju||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function mu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Tr(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Tg(function(){var h=s,d=uh(n),g=[];e:{var p=Xg.get(t);if(p!==void 0){var I=mh,R=t;switch(t){case"keypress":if(na(n)===0)break e;case"keydown":case"keyup":I=U1;break;case"focusin":R="focus",I=lu;break;case"focusout":R="blur",I=lu;break;case"beforeblur":case"afterblur":I=lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=H1;break;case Qg:case Kg:case Gg:I=D1;break;case Yg:I=q1;break;case"scroll":I=x1;break;case"wheel":I=K1;break;case"copy":case"cut":case"paste":I=O1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=$d}var V=(e&4)!==0,M=!V&&t==="scroll",S=V?p!==null?p+"Capture":null:p;V=[];for(var v=h,A;v!==null;){A=v;var N=A.stateNode;if(A.tag===5&&N!==null&&(A=N,S!==null&&(N=Vs(v,S),N!=null&&V.push(Fs(v,N,A)))),M)break;v=v.return}0<V.length&&(p=new I(p,R,null,n,d),g.push({event:p,listeners:V}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",p&&n!==Yu&&(R=n.relatedTarget||n.fromElement)&&(Tr(R)||R[Sn]))break e;if((I||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,I?(R=n.relatedTarget||n.toElement,I=h,R=R?Tr(R):null,R!==null&&(M=Lr(R),R!==M||R.tag!==5&&R.tag!==6)&&(R=null)):(I=null,R=h),I!==R)){if(V=Ud,N="onMouseLeave",S="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(V=$d,N="onPointerLeave",S="onPointerEnter",v="pointer"),M=I==null?p:ei(I),A=R==null?p:ei(R),p=new V(N,v+"leave",I,n,d),p.target=M,p.relatedTarget=A,N=null,Tr(d)===h&&(V=new V(S,v+"enter",R,n,d),V.target=A,V.relatedTarget=M,N=V),M=N,I&&R)t:{for(V=I,S=R,v=0,A=V;A;A=Hr(A))v++;for(A=0,N=S;N;N=Hr(N))A++;for(;0<v-A;)V=Hr(V),v--;for(;0<A-v;)S=Hr(S),A--;for(;v--;){if(V===S||S!==null&&V===S.alternate)break t;V=Hr(V),S=Hr(S)}V=null}else V=null;I!==null&&ep(g,p,I,V,!1),R!==null&&M!==null&&ep(g,M,R,V,!0)}}e:{if(p=h?ei(h):window,I=p.nodeName&&p.nodeName.toLowerCase(),I==="select"||I==="input"&&p.type==="file")var j=tE;else if(qd(p))if(Bg)j=sE;else{j=rE;var F=nE}else(I=p.nodeName)&&I.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=iE);if(j&&(j=j(t,h))){Ug(g,j,n,d);break e}F&&F(t,p,h),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&Wu(p,"number",p.value)}switch(F=h?ei(h):window,t){case"focusin":(qd(F)||F.contentEditable==="true")&&(Jr=F,rc=h,_s=null);break;case"focusout":_s=rc=Jr=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,Xd(g,n,d);break;case"selectionchange":if(lE)break;case"keydown":case"keyup":Xd(g,n,d)}var E;if(yh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Xr?jg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Fg&&n.locale!=="ko"&&(Xr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Xr&&(E=bg()):(jn=d,ph="value"in jn?jn.value:jn.textContent,Xr=!0)),F=Sa(h,y),0<F.length&&(y=new Bd(y,t,null,n,d),g.push({event:y,listeners:F}),E?y.data=E:(E=zg(n),E!==null&&(y.data=E)))),(E=Y1?X1(t,n):J1(t,n))&&(h=Sa(h,"onBeforeInput"),0<h.length&&(d=new Bd("onBeforeInput","beforeinput",null,n,d),g.push({event:d,listeners:h}),d.data=E))}Jg(g,e)})}function Fs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vs(t,n),s!=null&&r.unshift(Fs(t,s,i)),s=Vs(t,e),s!=null&&r.push(Fs(t,s,i))),t=t.return}return r}function Hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ep(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Vs(n,s),u!=null&&a.unshift(Fs(n,u,l))):i||(u=Vs(n,s),u!=null&&a.push(Fs(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var fE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function tp(t){return(typeof t=="string"?t:""+t).replace(fE,`
`).replace(dE,"")}function Fo(t,e,n){if(e=tp(e),tp(t)!==e&&n)throw Error(b(425))}function Ia(){}var sc=null,oc=null;function ac(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lc=typeof setTimeout=="function"?setTimeout:void 0,pE=typeof clearTimeout=="function"?clearTimeout:void 0,np=typeof Promise=="function"?Promise:void 0,mE=typeof queueMicrotask=="function"?queueMicrotask:typeof np<"u"?function(t){return np.resolve(null).then(t).catch(gE)}:lc;function gE(t){setTimeout(function(){throw t})}function gu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Os(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Os(e)}function Wn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),on="__reactFiber$"+Ni,js="__reactProps$"+Ni,Sn="__reactContainer$"+Ni,uc="__reactEvents$"+Ni,yE="__reactListeners$"+Ni,vE="__reactHandles$"+Ni;function Tr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rp(t);t!==null;){if(n=t[on])return n;t=rp(t)}return e}t=n,n=t.parentNode}return null}function io(t){return t=t[on]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(b(33))}function al(t){return t[js]||null}var cc=[],ti=-1;function cr(t){return{current:t}}function _e(t){0>ti||(t.current=cc[ti],cc[ti]=null,ti--)}function ge(t,e){ti++,cc[ti]=t.current,t.current=e}var tr={},ut=cr(tr),Tt=cr(!1),Rr=tr;function gi(t,e){var n=t.type.contextTypes;if(!n)return tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function St(t){return t=t.childContextTypes,t!=null}function Aa(){_e(Tt),_e(ut)}function ip(t,e,n){if(ut.current!==tr)throw Error(b(168));ge(ut,e),ge(Tt,n)}function ey(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(b(108,n1(t)||"Unknown",i));return Ie({},n,r)}function Ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tr,Rr=ut.current,ge(ut,t),ge(Tt,Tt.current),!0}function sp(t,e,n){var r=t.stateNode;if(!r)throw Error(b(169));n?(t=ey(t,e,Rr),r.__reactInternalMemoizedMergedChildContext=t,_e(Tt),_e(ut),ge(ut,t)):_e(Tt),ge(Tt,n)}var vn=null,ll=!1,yu=!1;function ty(t){vn===null?vn=[t]:vn.push(t)}function _E(t){ll=!0,ty(t)}function hr(){if(!yu&&vn!==null){yu=!0;var t=0,e=ce;try{var n=vn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vn=null,ll=!1}catch(i){throw vn!==null&&(vn=vn.slice(t+1)),Cg(ch,hr),i}finally{ce=e,yu=!1}}return null}var ni=[],ri=0,xa=null,Ra=0,Lt=[],bt=0,Pr=null,_n=1,En="";function _r(t,e){ni[ri++]=Ra,ni[ri++]=xa,xa=t,Ra=e}function ny(t,e,n){Lt[bt++]=_n,Lt[bt++]=En,Lt[bt++]=Pr,Pr=t;var r=_n;t=En;var i=32-Jt(r)-1;r&=~(1<<i),n+=1;var s=32-Jt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,_n=1<<32-Jt(e)+i|n<<i|r,En=s+t}else _n=1<<s|n<<i|r,En=t}function _h(t){t.return!==null&&(_r(t,1),ny(t,1,0))}function Eh(t){for(;t===xa;)xa=ni[--ri],ni[ri]=null,Ra=ni[--ri],ni[ri]=null;for(;t===Pr;)Pr=Lt[--bt],Lt[bt]=null,En=Lt[--bt],Lt[bt]=null,_n=Lt[--bt],Lt[bt]=null}var kt=null,Rt=null,Ee=!1,Xt=null;function ry(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function op(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,Rt=Wn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:_n,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kt=t,Rt=null,!0):!1;default:return!1}}function hc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fc(t){if(Ee){var e=Rt;if(e){var n=e;if(!op(t,e)){if(hc(t))throw Error(b(418));e=Wn(n.nextSibling);var r=kt;e&&op(t,e)?ry(r,n):(t.flags=t.flags&-4097|2,Ee=!1,kt=t)}}else{if(hc(t))throw Error(b(418));t.flags=t.flags&-4097|2,Ee=!1,kt=t}}}function ap(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function jo(t){if(t!==kt)return!1;if(!Ee)return ap(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ac(t.type,t.memoizedProps)),e&&(e=Rt)){if(hc(t))throw iy(),Error(b(418));for(;e;)ry(t,e),e=Wn(e.nextSibling)}if(ap(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(b(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Wn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=kt?Wn(t.stateNode.nextSibling):null;return!0}function iy(){for(var t=Rt;t;)t=Wn(t.nextSibling)}function yi(){Rt=kt=null,Ee=!1}function wh(t){Xt===null?Xt=[t]:Xt.push(t)}var EE=Pn.ReactCurrentBatchConfig;function rs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(b(309));var r=n.stateNode}if(!r)throw Error(b(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(b(284));if(!n._owner)throw Error(b(290,t))}return t}function zo(t,e){throw t=Object.prototype.toString.call(e),Error(b(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lp(t){var e=t._init;return e(t._payload)}function sy(t){function e(S,v){if(t){var A=S.deletions;A===null?(S.deletions=[v],S.flags|=16):A.push(v)}}function n(S,v){if(!t)return null;for(;v!==null;)e(S,v),v=v.sibling;return null}function r(S,v){for(S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function i(S,v){return S=Gn(S,v),S.index=0,S.sibling=null,S}function s(S,v,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<v?(S.flags|=2,v):A):(S.flags|=2,v)):(S.flags|=1048576,v)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,v,A,N){return v===null||v.tag!==6?(v=Iu(A,S.mode,N),v.return=S,v):(v=i(v,A),v.return=S,v)}function u(S,v,A,N){var j=A.type;return j===Yr?d(S,v,A.props.children,N,A.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Mn&&lp(j)===v.type)?(N=i(v,A.props),N.ref=rs(S,v,A),N.return=S,N):(N=ua(A.type,A.key,A.props,null,S.mode,N),N.ref=rs(S,v,A),N.return=S,N)}function h(S,v,A,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=Au(A,S.mode,N),v.return=S,v):(v=i(v,A.children||[]),v.return=S,v)}function d(S,v,A,N,j){return v===null||v.tag!==7?(v=xr(A,S.mode,N,j),v.return=S,v):(v=i(v,A),v.return=S,v)}function g(S,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Iu(""+v,S.mode,A),v.return=S,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Po:return A=ua(v.type,v.key,v.props,null,S.mode,A),A.ref=rs(S,null,v),A.return=S,A;case Gr:return v=Au(v,S.mode,A),v.return=S,v;case Mn:var N=v._init;return g(S,N(v._payload),A)}if(ls(v)||Ji(v))return v=xr(v,S.mode,A,null),v.return=S,v;zo(S,v)}return null}function p(S,v,A,N){var j=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return j!==null?null:l(S,v,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Po:return A.key===j?u(S,v,A,N):null;case Gr:return A.key===j?h(S,v,A,N):null;case Mn:return j=A._init,p(S,v,j(A._payload),N)}if(ls(A)||Ji(A))return j!==null?null:d(S,v,A,N,null);zo(S,A)}return null}function I(S,v,A,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(A)||null,l(v,S,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Po:return S=S.get(N.key===null?A:N.key)||null,u(v,S,N,j);case Gr:return S=S.get(N.key===null?A:N.key)||null,h(v,S,N,j);case Mn:var F=N._init;return I(S,v,A,F(N._payload),j)}if(ls(N)||Ji(N))return S=S.get(A)||null,d(v,S,N,j,null);zo(v,N)}return null}function R(S,v,A,N){for(var j=null,F=null,E=v,y=v=0,_=null;E!==null&&y<A.length;y++){E.index>y?(_=E,E=null):_=E.sibling;var T=p(S,E,A[y],N);if(T===null){E===null&&(E=_);break}t&&E&&T.alternate===null&&e(S,E),v=s(T,v,y),F===null?j=T:F.sibling=T,F=T,E=_}if(y===A.length)return n(S,E),Ee&&_r(S,y),j;if(E===null){for(;y<A.length;y++)E=g(S,A[y],N),E!==null&&(v=s(E,v,y),F===null?j=E:F.sibling=E,F=E);return Ee&&_r(S,y),j}for(E=r(S,E);y<A.length;y++)_=I(E,S,y,A[y],N),_!==null&&(t&&_.alternate!==null&&E.delete(_.key===null?y:_.key),v=s(_,v,y),F===null?j=_:F.sibling=_,F=_);return t&&E.forEach(function(x){return e(S,x)}),Ee&&_r(S,y),j}function V(S,v,A,N){var j=Ji(A);if(typeof j!="function")throw Error(b(150));if(A=j.call(A),A==null)throw Error(b(151));for(var F=j=null,E=v,y=v=0,_=null,T=A.next();E!==null&&!T.done;y++,T=A.next()){E.index>y?(_=E,E=null):_=E.sibling;var x=p(S,E,T.value,N);if(x===null){E===null&&(E=_);break}t&&E&&x.alternate===null&&e(S,E),v=s(x,v,y),F===null?j=x:F.sibling=x,F=x,E=_}if(T.done)return n(S,E),Ee&&_r(S,y),j;if(E===null){for(;!T.done;y++,T=A.next())T=g(S,T.value,N),T!==null&&(v=s(T,v,y),F===null?j=T:F.sibling=T,F=T);return Ee&&_r(S,y),j}for(E=r(S,E);!T.done;y++,T=A.next())T=I(E,S,y,T.value,N),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),v=s(T,v,y),F===null?j=T:F.sibling=T,F=T);return t&&E.forEach(function(P){return e(S,P)}),Ee&&_r(S,y),j}function M(S,v,A,N){if(typeof A=="object"&&A!==null&&A.type===Yr&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Po:e:{for(var j=A.key,F=v;F!==null;){if(F.key===j){if(j=A.type,j===Yr){if(F.tag===7){n(S,F.sibling),v=i(F,A.props.children),v.return=S,S=v;break e}}else if(F.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Mn&&lp(j)===F.type){n(S,F.sibling),v=i(F,A.props),v.ref=rs(S,F,A),v.return=S,S=v;break e}n(S,F);break}else e(S,F);F=F.sibling}A.type===Yr?(v=xr(A.props.children,S.mode,N,A.key),v.return=S,S=v):(N=ua(A.type,A.key,A.props,null,S.mode,N),N.ref=rs(S,v,A),N.return=S,S=N)}return a(S);case Gr:e:{for(F=A.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){n(S,v.sibling),v=i(v,A.children||[]),v.return=S,S=v;break e}else{n(S,v);break}else e(S,v);v=v.sibling}v=Au(A,S.mode,N),v.return=S,S=v}return a(S);case Mn:return F=A._init,M(S,v,F(A._payload),N)}if(ls(A))return R(S,v,A,N);if(Ji(A))return V(S,v,A,N);zo(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,v!==null&&v.tag===6?(n(S,v.sibling),v=i(v,A),v.return=S,S=v):(n(S,v),v=Iu(A,S.mode,N),v.return=S,S=v),a(S)):n(S,v)}return M}var vi=sy(!0),oy=sy(!1),Pa=cr(null),ka=null,ii=null,Th=null;function Sh(){Th=ii=ka=null}function Ih(t){var e=Pa.current;_e(Pa),t._currentValue=e}function dc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hi(t,e){ka=t,Th=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(Th!==t)if(t={context:t,memoizedValue:e,next:null},ii===null){if(ka===null)throw Error(b(308));ii=t,ka.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return e}var Sr=null;function Ah(t){Sr===null?Sr=[t]:Sr.push(t)}function ay(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ah(e)):(n.next=i.next,i.next=n),e.interleaved=n,In(t,r)}function In(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ln=!1;function Ch(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ly(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,In(t,n)}return i=r.interleaved,i===null?(e.next=e,Ah(r)):(e.next=i.next,i.next=e),r.interleaved=e,In(t,n)}function ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hh(t,n)}}function up(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Va(t,e,n,r){var i=t.updateQueue;Ln=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;a=0,d=h=u=null,l=s;do{var p=l.lane,I=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,V=l;switch(p=e,I=n,V.tag){case 1:if(R=V.payload,typeof R=="function"){g=R.call(I,g,p);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=V.payload,p=typeof R=="function"?R.call(I,g,p):R,p==null)break e;g=Ie({},g,p);break e;case 2:Ln=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else I={eventTime:I,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=I,u=g):d=d.next=I,a|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vr|=a,t.lanes=a,t.memoizedState=g}}function cp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(b(191,i));i.call(r)}}}var so={},ln=cr(so),zs=cr(so),Us=cr(so);function Ir(t){if(t===so)throw Error(b(174));return t}function xh(t,e){switch(ge(Us,e),ge(zs,t),ge(ln,so),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qu(e,t)}_e(ln),ge(ln,e)}function _i(){_e(ln),_e(zs),_e(Us)}function uy(t){Ir(Us.current);var e=Ir(ln.current),n=Qu(e,t.type);e!==n&&(ge(zs,t),ge(ln,n))}function Rh(t){zs.current===t&&(_e(ln),_e(zs))}var Te=cr(0);function Da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vu=[];function Ph(){for(var t=0;t<vu.length;t++)vu[t]._workInProgressVersionPrimary=null;vu.length=0}var ia=Pn.ReactCurrentDispatcher,_u=Pn.ReactCurrentBatchConfig,kr=0,Se=null,Le=null,Be=null,Na=!1,Es=!1,Bs=0,wE=0;function rt(){throw Error(b(321))}function kh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Vh(t,e,n,r,i,s){if(kr=s,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ia.current=t===null||t.memoizedState===null?AE:CE,t=n(r,i),Es){s=0;do{if(Es=!1,Bs=0,25<=s)throw Error(b(301));s+=1,Be=Le=null,e.updateQueue=null,ia.current=xE,t=n(r,i)}while(Es)}if(ia.current=Oa,e=Le!==null&&Le.next!==null,kr=0,Be=Le=Se=null,Na=!1,e)throw Error(b(300));return t}function Dh(){var t=Bs!==0;return Bs=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Se.memoizedState=Be=t:Be=Be.next=t,Be}function Ut(){if(Le===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?Se.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(b(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?Se.memoizedState=Be=t:Be=Be.next=t}return Be}function $s(t,e){return typeof e=="function"?e(t):e}function Eu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=Le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var d=h.lane;if((kr&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,Se.lanes|=d,Vr|=d}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,en(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Se.lanes|=s,Vr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);en(s,e.memoizedState)||(wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function cy(){}function hy(t,e){var n=Se,r=Ut(),i=e(),s=!en(r.memoizedState,i);if(s&&(r.memoizedState=i,wt=!0),r=r.queue,Nh(py.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Hs(9,dy.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(b(349));kr&30||fy(n,e,i)}return i}function fy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dy(t,e,n,r){e.value=n,e.getSnapshot=r,my(e)&&gy(t)}function py(t,e,n){return n(function(){my(e)&&gy(t)})}function my(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function gy(t){var e=In(t,1);e!==null&&Zt(e,t,1,-1)}function hp(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:t},e.queue=t,t=t.dispatch=IE.bind(null,Se,t),[e.memoizedState,t]}function Hs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yy(){return Ut().memoizedState}function sa(t,e,n,r){var i=rn();Se.flags|=t,i.memoizedState=Hs(1|e,n,void 0,r===void 0?null:r)}function ul(t,e,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(Le!==null){var a=Le.memoizedState;if(s=a.destroy,r!==null&&kh(r,a.deps)){i.memoizedState=Hs(e,n,s,r);return}}Se.flags|=t,i.memoizedState=Hs(1|e,n,s,r)}function fp(t,e){return sa(8390656,8,t,e)}function Nh(t,e){return ul(2048,8,t,e)}function vy(t,e){return ul(4,2,t,e)}function _y(t,e){return ul(4,4,t,e)}function Ey(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wy(t,e,n){return n=n!=null?n.concat([t]):null,ul(4,4,Ey.bind(null,e,t),n)}function Oh(){}function Ty(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sy(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Iy(t,e,n){return kr&21?(en(n,e)||(n=Pg(),Se.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function TE(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=_u.transition;_u.transition={};try{t(!1),e()}finally{ce=n,_u.transition=r}}function Ay(){return Ut().memoizedState}function SE(t,e,n){var r=Kn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cy(t))xy(e,n);else if(n=ay(t,e,n,r),n!==null){var i=pt();Zt(n,t,r,i),Ry(n,e,r)}}function IE(t,e,n){var r=Kn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cy(t))xy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,en(l,a)){var u=e.interleaved;u===null?(i.next=i,Ah(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=ay(t,e,i,r),n!==null&&(i=pt(),Zt(n,t,r,i),Ry(n,e,r))}}function Cy(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function xy(t,e){Es=Na=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ry(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hh(t,n)}}var Oa={readContext:zt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},AE={readContext:zt,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:fp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sa(4194308,4,Ey.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return sa(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SE.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:hp,useDebugValue:Oh,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=hp(!1),e=t[0];return t=TE.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,i=rn();if(Ee){if(n===void 0)throw Error(b(407));n=n()}else{if(n=e(),$e===null)throw Error(b(349));kr&30||fy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fp(py.bind(null,r,s,t),[t]),r.flags|=2048,Hs(9,dy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=rn(),e=$e.identifierPrefix;if(Ee){var n=En,r=_n;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=wE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CE={readContext:zt,useCallback:Ty,useContext:zt,useEffect:Nh,useImperativeHandle:wy,useInsertionEffect:vy,useLayoutEffect:_y,useMemo:Sy,useReducer:Eu,useRef:yy,useState:function(){return Eu($s)},useDebugValue:Oh,useDeferredValue:function(t){var e=Ut();return Iy(e,Le.memoizedState,t)},useTransition:function(){var t=Eu($s)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:cy,useSyncExternalStore:hy,useId:Ay,unstable_isNewReconciler:!1},xE={readContext:zt,useCallback:Ty,useContext:zt,useEffect:Nh,useImperativeHandle:wy,useInsertionEffect:vy,useLayoutEffect:_y,useMemo:Sy,useReducer:wu,useRef:yy,useState:function(){return wu($s)},useDebugValue:Oh,useDeferredValue:function(t){var e=Ut();return Le===null?e.memoizedState=t:Iy(e,Le.memoizedState,t)},useTransition:function(){var t=wu($s)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:cy,useSyncExternalStore:hy,useId:Ay,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cl={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),i=Kn(t),s=wn(r,i);s.payload=e,n!=null&&(s.callback=n),e=qn(t,s,i),e!==null&&(Zt(e,t,i,r),ra(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),i=Kn(t),s=wn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=qn(t,s,i),e!==null&&(Zt(e,t,i,r),ra(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Kn(t),i=wn(n,r);i.tag=2,e!=null&&(i.callback=e),e=qn(t,i,r),e!==null&&(Zt(e,t,r,n),ra(e,t,r))}};function dp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ls(n,r)||!Ls(i,s):!0}function Py(t,e,n){var r=!1,i=tr,s=e.contextType;return typeof s=="object"&&s!==null?s=zt(s):(i=St(e)?Rr:ut.current,r=e.contextTypes,s=(r=r!=null)?gi(t,i):tr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cl.enqueueReplaceState(e,e.state,null)}function mc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ch(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zt(s):(s=St(e)?Rr:ut.current,i.context=gi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cl.enqueueReplaceState(i,i.state,null),Va(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ei(t,e){try{var n="",r=e;do n+=t1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Tu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RE=typeof WeakMap=="function"?WeakMap:Map;function ky(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){La||(La=!0,Cc=r),gc(t,e)},n}function Vy(t,e,n){n=wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){gc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gc(t,e),typeof r!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function mp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=BE.bind(null,t,e,n),e.then(t,t))}function gp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,qn(n,e,1))),n.lanes|=1),t)}var PE=Pn.ReactCurrentOwner,wt=!1;function dt(t,e,n,r){e.child=t===null?oy(e,null,n,r):vi(e,t.child,n,r)}function vp(t,e,n,r,i){n=n.render;var s=e.ref;return hi(e,i),r=Vh(t,e,n,r,s,i),n=Dh(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,An(t,e,i)):(Ee&&n&&_h(e),e.flags|=1,dt(t,e,r,i),e.child)}function _p(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bh(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Dy(t,e,s,r,i)):(t=ua(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(a,r)&&t.ref===e.ref)return An(t,e,i)}return e.flags|=1,t=Gn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Dy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ls(s,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,An(t,e,i)}return yc(t,e,n,r,i)}function Ny(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(oi,xt),xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(oi,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ge(oi,xt),xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ge(oi,xt),xt|=r;return dt(t,e,i,n),e.child}function Oy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yc(t,e,n,r,i){var s=St(n)?Rr:ut.current;return s=gi(e,s),hi(e,i),n=Vh(t,e,n,r,s,i),r=Dh(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,An(t,e,i)):(Ee&&r&&_h(e),e.flags|=1,dt(t,e,n,i),e.child)}function Ep(t,e,n,r,i){if(St(n)){var s=!0;Ca(e)}else s=!1;if(hi(e,i),e.stateNode===null)oa(t,e),Py(e,n,r),mc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=zt(h):(h=St(n)?Rr:ut.current,h=gi(e,h));var d=n.getDerivedStateFromProps,g=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&pp(e,a,r,h),Ln=!1;var p=e.memoizedState;a.state=p,Va(e,r,a,i),u=e.memoizedState,l!==r||p!==u||Tt.current||Ln?(typeof d=="function"&&(pc(e,n,d,r),u=e.memoizedState),(l=Ln||dp(e,n,l,r,p,u,h))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ly(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Gt(e.type,l),a.props=h,g=e.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=zt(u):(u=St(n)?Rr:ut.current,u=gi(e,u));var I=n.getDerivedStateFromProps;(d=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||p!==u)&&pp(e,a,r,u),Ln=!1,p=e.memoizedState,a.state=p,Va(e,r,a,i);var R=e.memoizedState;l!==g||p!==R||Tt.current||Ln?(typeof I=="function"&&(pc(e,n,I,r),R=e.memoizedState),(h=Ln||dp(e,n,h,r,p,R,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,R,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,R,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),a.props=r,a.state=R,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return vc(t,e,n,r,s,i)}function vc(t,e,n,r,i,s){Oy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&sp(e,n,!1),An(t,e,s);r=e.stateNode,PE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vi(e,t.child,null,s),e.child=vi(e,null,l,s)):dt(t,e,l,s),e.memoizedState=r.state,i&&sp(e,n,!0),e.child}function My(t){var e=t.stateNode;e.pendingContext?ip(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ip(t,e.context,!1),xh(t,e.containerInfo)}function wp(t,e,n,r,i){return yi(),wh(i),e.flags|=256,dt(t,e,n,r),e.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Ec(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ly(t,e,n){var r=e.pendingProps,i=Te.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ge(Te,i&1),t===null)return fc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=dl(a,r,0,null),t=xr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ec(n),e.memoizedState=_c,t):Mh(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return kE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Gn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Gn(l,s):(s=xr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Ec(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=_c,r}return s=t.child,t=s.sibling,r=Gn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mh(t,e){return e=dl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uo(t,e,n,r){return r!==null&&wh(r),vi(e,t.child,null,n),t=Mh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Tu(Error(b(422))),Uo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=dl({mode:"visible",children:r.children},i,0,null),s=xr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vi(e,t.child,null,a),e.child.memoizedState=Ec(a),e.memoizedState=_c,s);if(!(e.mode&1))return Uo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(b(419)),r=Tu(s,r,void 0),Uo(t,e,a,r)}if(l=(a&t.childLanes)!==0,wt||l){if(r=$e,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,In(t,i),Zt(r,t,i,-1))}return Uh(),r=Tu(Error(b(421))),Uo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$E.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rt=Wn(i.nextSibling),kt=e,Ee=!0,Xt=null,t!==null&&(Lt[bt++]=_n,Lt[bt++]=En,Lt[bt++]=Pr,_n=t.id,En=t.overflow,Pr=e),e=Mh(e,r.children),e.flags|=4096,e)}function Tp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dc(t.return,e,n)}function Su(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function by(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tp(t,n,e);else if(t.tag===19)Tp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Te,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Da(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Su(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Da(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Su(e,!0,n,null,s);break;case"together":Su(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(b(153));if(e.child!==null){for(t=e.child,n=Gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VE(t,e,n){switch(e.tag){case 3:My(e),yi();break;case 5:uy(e);break;case 1:St(e.type)&&Ca(e);break;case 4:xh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ge(Pa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Ly(t,e,n):(ge(Te,Te.current&1),t=An(t,e,n),t!==null?t.sibling:null);ge(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return by(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ge(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Ny(t,e,n)}return An(t,e,n)}var Fy,wc,jy,zy;Fy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wc=function(){};jy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ir(ln.current);var s=null;switch(n){case"input":i=$u(t,i),r=$u(t,r),s=[];break;case"select":i=Ie({},i,{value:void 0}),r=Ie({},r,{value:void 0}),s=[];break;case"textarea":i=qu(t,i),r=qu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ia)}Ku(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ps.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ve("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};zy=function(t,e,n,r){n!==r&&(e.flags|=4)};function is(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DE(t,e,n){var r=e.pendingProps;switch(Eh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return St(e.type)&&Aa(),it(e),null;case 3:return r=e.stateNode,_i(),_e(Tt),_e(ut),Ph(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(Pc(Xt),Xt=null))),wc(t,e),it(e),null;case 5:Rh(e);var i=Ir(Us.current);if(n=e.type,t!==null&&e.stateNode!=null)jy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(b(166));return it(e),null}if(t=Ir(ln.current),jo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[on]=e,r[js]=s,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(i=0;i<cs.length;i++)ve(cs[i],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Vd(r,s),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ve("invalid",r);break;case"textarea":Nd(r,s),ve("invalid",r)}Ku(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Fo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Fo(r.textContent,l,t),i=["children",""+l]):Ps.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ve("scroll",r)}switch(n){case"input":ko(r),Dd(r,s,!0);break;case"textarea":ko(r),Od(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ia)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[on]=e,t[js]=r,Fy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Gu(n,r),n){case"dialog":ve("cancel",t),ve("close",t),i=r;break;case"iframe":case"object":case"embed":ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<cs.length;i++)ve(cs[i],t);i=r;break;case"source":ve("error",t),i=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=r;break;case"details":ve("toggle",t),i=r;break;case"input":Vd(t,r),i=$u(t,r),ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ie({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Nd(t,r),i=qu(t,r),ve("invalid",t);break;default:i=r}Ku(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?yg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ks(t,u):typeof u=="number"&&ks(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ps.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ve("scroll",t):u!=null&&sh(t,s,u,a))}switch(n){case"input":ko(t),Dd(t,r,!1);break;case"textarea":ko(t),Od(t);break;case"option":r.value!=null&&t.setAttribute("value",""+er(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ai(t,!!r.multiple,s,!1):r.defaultValue!=null&&ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ia)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)zy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(b(166));if(n=Ir(Us.current),Ir(ln.current),jo(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(s=r.nodeValue!==n)&&(t=kt,t!==null))switch(t.tag){case 3:Fo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return it(e),null;case 13:if(_e(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Rt!==null&&e.mode&1&&!(e.flags&128))iy(),yi(),e.flags|=98560,s=!1;else if(s=jo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(b(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(b(317));s[on]=e}else yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),s=!1}else Xt!==null&&(Pc(Xt),Xt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Fe===0&&(Fe=3):Uh())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return _i(),wc(t,e),t===null&&bs(e.stateNode.containerInfo),it(e),null;case 10:return Ih(e.type._context),it(e),null;case 17:return St(e.type)&&Aa(),it(e),null;case 19:if(_e(Te),s=e.memoizedState,s===null)return it(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)is(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Da(t),a!==null){for(e.flags|=128,is(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Te,Te.current&1|2),e.child}t=t.sibling}s.tail!==null&&ke()>wi&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304)}else{if(!r)if(t=Da(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),is(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ee)return it(e),null}else 2*ke()-s.renderingStartTime>wi&&n!==1073741824&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ke(),e.sibling=null,n=Te.current,ge(Te,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return zh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(b(156,e.tag))}function NE(t,e){switch(Eh(e),e.tag){case 1:return St(e.type)&&Aa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(),_e(Tt),_e(ut),Ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rh(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(b(340));yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return _i(),null;case 10:return Ih(e.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var Bo=!1,at=!1,OE=typeof WeakSet=="function"?WeakSet:Set,$=null;function si(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(t,e,r)}else n.current=null}function Tc(t,e,n){try{n()}catch(r){xe(t,e,r)}}var Sp=!1;function ME(t,e){if(sc=wa,t=Wg(),vh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,d=0,g=t,p=null;t:for(;;){for(var I;g!==n||i!==0&&g.nodeType!==3||(l=a+i),g!==s||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(I=g.firstChild)!==null;)p=g,g=I;for(;;){if(g===t)break t;if(p===n&&++h===i&&(l=a),p===s&&++d===r&&(u=a),(I=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=I}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(oc={focusedElem:t,selectionRange:n},wa=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var V=R.memoizedProps,M=R.memoizedState,S=e.stateNode,v=S.getSnapshotBeforeUpdate(e.elementType===e.type?V:Gt(e.type,V),M);S.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163))}}catch(N){xe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return R=Sp,Sp=!1,R}function ws(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Tc(e,n,s)}i=i.next}while(i!==r)}}function hl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Uy(t){var e=t.alternate;e!==null&&(t.alternate=null,Uy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[js],delete e[uc],delete e[yE],delete e[vE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function By(t){return t.tag===5||t.tag===3||t.tag===4}function Ip(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||By(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ic(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ia));else if(r!==4&&(t=t.child,t!==null))for(Ic(t,e,n),t=t.sibling;t!==null;)Ic(t,e,n),t=t.sibling}function Ac(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ac(t,e,n),t=t.sibling;t!==null;)Ac(t,e,n),t=t.sibling}var qe=null,Yt=!1;function On(t,e,n){for(n=n.child;n!==null;)$y(t,e,n),n=n.sibling}function $y(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(rl,n)}catch{}switch(n.tag){case 5:at||si(n,e);case 6:var r=qe,i=Yt;qe=null,On(t,e,n),qe=r,Yt=i,qe!==null&&(Yt?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Yt?(t=qe,n=n.stateNode,t.nodeType===8?gu(t.parentNode,n):t.nodeType===1&&gu(t,n),Os(t)):gu(qe,n.stateNode));break;case 4:r=qe,i=Yt,qe=n.stateNode.containerInfo,Yt=!0,On(t,e,n),qe=r,Yt=i;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Tc(n,e,a),i=i.next}while(i!==r)}On(t,e,n);break;case 1:if(!at&&(si(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){xe(n,e,l)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,On(t,e,n),at=r):On(t,e,n);break;default:On(t,e,n)}}function Ap(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new OE),e.forEach(function(r){var i=HE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Yt=!1;break e;case 3:qe=l.stateNode.containerInfo,Yt=!0;break e;case 4:qe=l.stateNode.containerInfo,Yt=!0;break e}l=l.return}if(qe===null)throw Error(b(160));$y(s,a,i),qe=null,Yt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){xe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hy(e,t),e=e.sibling}function Hy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kt(e,t),nn(t),r&4){try{ws(3,t,t.return),hl(3,t)}catch(V){xe(t,t.return,V)}try{ws(5,t,t.return)}catch(V){xe(t,t.return,V)}}break;case 1:Kt(e,t),nn(t),r&512&&n!==null&&si(n,n.return);break;case 5:if(Kt(e,t),nn(t),r&512&&n!==null&&si(n,n.return),t.flags&32){var i=t.stateNode;try{ks(i,"")}catch(V){xe(t,t.return,V)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&fg(i,s),Gu(l,a);var h=Gu(l,s);for(a=0;a<u.length;a+=2){var d=u[a],g=u[a+1];d==="style"?yg(i,g):d==="dangerouslySetInnerHTML"?mg(i,g):d==="children"?ks(i,g):sh(i,d,g,h)}switch(l){case"input":Hu(i,s);break;case"textarea":dg(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var I=s.value;I!=null?ai(i,!!s.multiple,I,!1):p!==!!s.multiple&&(s.defaultValue!=null?ai(i,!!s.multiple,s.defaultValue,!0):ai(i,!!s.multiple,s.multiple?[]:"",!1))}i[js]=s}catch(V){xe(t,t.return,V)}}break;case 6:if(Kt(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(b(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(V){xe(t,t.return,V)}}break;case 3:if(Kt(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Os(e.containerInfo)}catch(V){xe(t,t.return,V)}break;case 4:Kt(e,t),nn(t);break;case 13:Kt(e,t),nn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fh=ke())),r&4&&Ap(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(at=(h=at)||d,Kt(e,t),at=h):Kt(e,t),nn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for($=t,d=t.child;d!==null;){for(g=$=d;$!==null;){switch(p=$,I=p.child,p.tag){case 0:case 11:case 14:case 15:ws(4,p,p.return);break;case 1:si(p,p.return);var R=p.stateNode;if(typeof R.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(V){xe(r,n,V)}}break;case 5:si(p,p.return);break;case 22:if(p.memoizedState!==null){xp(g);continue}}I!==null?(I.return=p,$=I):xp(g)}d=d.sibling}e:for(d=null,g=t;;){if(g.tag===5){if(d===null){d=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=gg("display",a))}catch(V){xe(t,t.return,V)}}}else if(g.tag===6){if(d===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(V){xe(t,t.return,V)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;d===g&&(d=null),g=g.return}d===g&&(d=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Kt(e,t),nn(t),r&4&&Ap(t);break;case 21:break;default:Kt(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(By(n)){var r=n;break e}n=n.return}throw Error(b(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ks(i,""),r.flags&=-33);var s=Ip(t);Ac(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Ip(t);Ic(t,l,a);break;default:throw Error(b(161))}}catch(u){xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LE(t,e,n){$=t,Wy(t)}function Wy(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Bo;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||at;l=Bo;var h=at;if(Bo=a,(at=u)&&!h)for($=i;$!==null;)a=$,u=a.child,a.tag===22&&a.memoizedState!==null?Rp(i):u!==null?(u.return=a,$=u):Rp(i);for(;s!==null;)$=s,Wy(s),s=s.sibling;$=i,Bo=l,at=h}Cp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Cp(t)}}function Cp(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:at||hl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!at)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var g=d.dehydrated;g!==null&&Os(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163))}at||e.flags&512&&Sc(e)}catch(p){xe(e,e.return,p)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function xp(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Rp(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hl(4,e)}catch(u){xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){xe(e,i,u)}}var s=e.return;try{Sc(e)}catch(u){xe(e,s,u)}break;case 5:var a=e.return;try{Sc(e)}catch(u){xe(e,a,u)}}}catch(u){xe(e,e.return,u)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var bE=Math.ceil,Ma=Pn.ReactCurrentDispatcher,Lh=Pn.ReactCurrentOwner,jt=Pn.ReactCurrentBatchConfig,ie=0,$e=null,Ne=null,Ge=0,xt=0,oi=cr(0),Fe=0,Ws=null,Vr=0,fl=0,bh=0,Ts=null,_t=null,Fh=0,wi=1/0,yn=null,La=!1,Cc=null,Qn=null,$o=!1,zn=null,ba=0,Ss=0,xc=null,aa=-1,la=0;function pt(){return ie&6?ke():aa!==-1?aa:aa=ke()}function Kn(t){return t.mode&1?ie&2&&Ge!==0?Ge&-Ge:EE.transition!==null?(la===0&&(la=Pg()),la):(t=ce,t!==0||(t=window.event,t=t===void 0?16:Lg(t.type)),t):1}function Zt(t,e,n,r){if(50<Ss)throw Ss=0,xc=null,Error(b(185));no(t,n,r),(!(ie&2)||t!==$e)&&(t===$e&&(!(ie&2)&&(fl|=n),Fe===4&&Fn(t,Ge)),It(t,r),n===1&&ie===0&&!(e.mode&1)&&(wi=ke()+500,ll&&hr()))}function It(t,e){var n=t.callbackNode;E1(t,e);var r=Ea(t,t===$e?Ge:0);if(r===0)n!==null&&bd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bd(n),e===1)t.tag===0?_E(Pp.bind(null,t)):ty(Pp.bind(null,t)),mE(function(){!(ie&6)&&hr()}),n=null;else{switch(kg(r)){case 1:n=ch;break;case 4:n=xg;break;case 16:n=_a;break;case 536870912:n=Rg;break;default:n=_a}n=Zy(n,qy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qy(t,e){if(aa=-1,la=0,ie&6)throw Error(b(327));var n=t.callbackNode;if(fi()&&t.callbackNode!==n)return null;var r=Ea(t,t===$e?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fa(t,r);else{e=r;var i=ie;ie|=2;var s=Ky();($e!==t||Ge!==e)&&(yn=null,wi=ke()+500,Cr(t,e));do try{zE();break}catch(l){Qy(t,l)}while(!0);Sh(),Ma.current=s,ie=i,Ne!==null?e=0:($e=null,Ge=0,e=Fe)}if(e!==0){if(e===2&&(i=ec(t),i!==0&&(r=i,e=Rc(t,i))),e===1)throw n=Ws,Cr(t,0),Fn(t,r),It(t,ke()),n;if(e===6)Fn(t,r);else{if(i=t.current.alternate,!(r&30)&&!FE(i)&&(e=Fa(t,r),e===2&&(s=ec(t),s!==0&&(r=s,e=Rc(t,s))),e===1))throw n=Ws,Cr(t,0),Fn(t,r),It(t,ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(b(345));case 2:Er(t,_t,yn);break;case 3:if(Fn(t,r),(r&130023424)===r&&(e=Fh+500-ke(),10<e)){if(Ea(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lc(Er.bind(null,t,_t,yn),e);break}Er(t,_t,yn);break;case 4:if(Fn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Jt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bE(r/1960))-r,10<r){t.timeoutHandle=lc(Er.bind(null,t,_t,yn),r);break}Er(t,_t,yn);break;case 5:Er(t,_t,yn);break;default:throw Error(b(329))}}}return It(t,ke()),t.callbackNode===n?qy.bind(null,t):null}function Rc(t,e){var n=Ts;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Fa(t,e),t!==2&&(e=_t,_t=n,e!==null&&Pc(e)),t}function Pc(t){_t===null?_t=t:_t.push.apply(_t,t)}function FE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!en(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fn(t,e){for(e&=~bh,e&=~fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jt(e),r=1<<n;t[n]=-1,e&=~r}}function Pp(t){if(ie&6)throw Error(b(327));fi();var e=Ea(t,0);if(!(e&1))return It(t,ke()),null;var n=Fa(t,e);if(t.tag!==0&&n===2){var r=ec(t);r!==0&&(e=r,n=Rc(t,r))}if(n===1)throw n=Ws,Cr(t,0),Fn(t,e),It(t,ke()),n;if(n===6)throw Error(b(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Er(t,_t,yn),It(t,ke()),null}function jh(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(wi=ke()+500,ll&&hr())}}function Dr(t){zn!==null&&zn.tag===0&&!(ie&6)&&fi();var e=ie;ie|=1;var n=jt.transition,r=ce;try{if(jt.transition=null,ce=1,t)return t()}finally{ce=r,jt.transition=n,ie=e,!(ie&6)&&hr()}}function zh(){xt=oi.current,_e(oi)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pE(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(Eh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Aa();break;case 3:_i(),_e(Tt),_e(ut),Ph();break;case 5:Rh(r);break;case 4:_i();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:Ih(r.type._context);break;case 22:case 23:zh()}n=n.return}if($e=t,Ne=t=Gn(t.current,null),Ge=xt=e,Fe=0,Ws=null,bh=fl=Vr=0,_t=Ts=null,Sr!==null){for(e=0;e<Sr.length;e++)if(n=Sr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Sr=null}return t}function Qy(t,e){do{var n=Ne;try{if(Sh(),ia.current=Oa,Na){for(var r=Se.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Na=!1}if(kr=0,Be=Le=Se=null,Es=!1,Bs=0,Lh.current=null,n===null||n.return===null){Fe=1,Ws=e,Ne=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=Ge,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,g=d.tag;if(!(d.mode&1)&&(g===0||g===11||g===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var I=gp(a);if(I!==null){I.flags&=-257,yp(I,a,l,s,e),I.mode&1&&mp(s,h,e),e=I,u=h;var R=e.updateQueue;if(R===null){var V=new Set;V.add(u),e.updateQueue=V}else R.add(u);break e}else{if(!(e&1)){mp(s,h,e),Uh();break e}u=Error(b(426))}}else if(Ee&&l.mode&1){var M=gp(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),yp(M,a,l,s,e),wh(Ei(u,l));break e}}s=u=Ei(u,l),Fe!==4&&(Fe=2),Ts===null?Ts=[s]:Ts.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=ky(s,u,e);up(s,S);break e;case 1:l=u;var v=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Qn===null||!Qn.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Vy(s,l,e);up(s,N);break e}}s=s.return}while(s!==null)}Yy(n)}catch(j){e=j,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function Ky(){var t=Ma.current;return Ma.current=Oa,t===null?Oa:t}function Uh(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),$e===null||!(Vr&268435455)&&!(fl&268435455)||Fn($e,Ge)}function Fa(t,e){var n=ie;ie|=2;var r=Ky();($e!==t||Ge!==e)&&(yn=null,Cr(t,e));do try{jE();break}catch(i){Qy(t,i)}while(!0);if(Sh(),ie=n,Ma.current=r,Ne!==null)throw Error(b(261));return $e=null,Ge=0,Fe}function jE(){for(;Ne!==null;)Gy(Ne)}function zE(){for(;Ne!==null&&!h1();)Gy(Ne)}function Gy(t){var e=Jy(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?Yy(t):Ne=e,Lh.current=null}function Yy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NE(n,e),n!==null){n.flags&=32767,Ne=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Ne=null;return}}else if(n=DE(n,e,xt),n!==null){Ne=n;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=t}while(e!==null);Fe===0&&(Fe=5)}function Er(t,e,n){var r=ce,i=jt.transition;try{jt.transition=null,ce=1,UE(t,e,n,r)}finally{jt.transition=i,ce=r}return null}function UE(t,e,n,r){do fi();while(zn!==null);if(ie&6)throw Error(b(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(b(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(w1(t,s),t===$e&&(Ne=$e=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$o||($o=!0,Zy(_a,function(){return fi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=jt.transition,jt.transition=null;var a=ce;ce=1;var l=ie;ie|=4,Lh.current=null,ME(t,n),Hy(n,t),aE(oc),wa=!!sc,oc=sc=null,t.current=n,LE(n),f1(),ie=l,ce=a,jt.transition=s}else t.current=n;if($o&&($o=!1,zn=t,ba=i),s=t.pendingLanes,s===0&&(Qn=null),m1(n.stateNode),It(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(La)throw La=!1,t=Cc,Cc=null,t;return ba&1&&t.tag!==0&&fi(),s=t.pendingLanes,s&1?t===xc?Ss++:(Ss=0,xc=t):Ss=0,hr(),null}function fi(){if(zn!==null){var t=kg(ba),e=jt.transition,n=ce;try{if(jt.transition=null,ce=16>t?16:t,zn===null)var r=!1;else{if(t=zn,zn=null,ba=0,ie&6)throw Error(b(331));var i=ie;for(ie|=4,$=t.current;$!==null;){var s=$,a=s.child;if($.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for($=h;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:ws(8,d,s)}var g=d.child;if(g!==null)g.return=d,$=g;else for(;$!==null;){d=$;var p=d.sibling,I=d.return;if(Uy(d),d===h){$=null;break}if(p!==null){p.return=I,$=p;break}$=I}}}var R=s.alternate;if(R!==null){var V=R.child;if(V!==null){R.child=null;do{var M=V.sibling;V.sibling=null,V=M}while(V!==null)}}$=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,$=a;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ws(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,$=S;break e}$=s.return}}var v=t.current;for($=v;$!==null;){a=$;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,$=A;else e:for(a=v;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(j){xe(l,l.return,j)}if(l===a){$=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,$=N;break e}$=l.return}}if(ie=i,hr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(rl,t)}catch{}r=!0}return r}finally{ce=n,jt.transition=e}}return!1}function kp(t,e,n){e=Ei(n,e),e=ky(t,e,1),t=qn(t,e,1),e=pt(),t!==null&&(no(t,1,e),It(t,e))}function xe(t,e,n){if(t.tag===3)kp(t,t,n);else for(;e!==null;){if(e.tag===3){kp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qn===null||!Qn.has(r))){t=Ei(n,t),t=Vy(e,t,1),e=qn(e,t,1),t=pt(),e!==null&&(no(e,1,t),It(e,t));break}}e=e.return}}function BE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Ge&n)===n&&(Fe===4||Fe===3&&(Ge&130023424)===Ge&&500>ke()-Fh?Cr(t,0):bh|=n),It(t,e)}function Xy(t,e){e===0&&(t.mode&1?(e=No,No<<=1,!(No&130023424)&&(No=4194304)):e=1);var n=pt();t=In(t,e),t!==null&&(no(t,e,n),It(t,n))}function $E(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xy(t,n)}function HE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(b(314))}r!==null&&r.delete(e),Xy(t,n)}var Jy;Jy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,VE(t,e,n);wt=!!(t.flags&131072)}else wt=!1,Ee&&e.flags&1048576&&ny(e,Ra,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oa(t,e),t=e.pendingProps;var i=gi(e,ut.current);hi(e,n),i=Vh(null,e,r,t,i,n);var s=Dh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(s=!0,Ca(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ch(e),i.updater=cl,e.stateNode=i,i._reactInternals=e,mc(e,r,t,n),e=vc(null,e,r,!0,s,n)):(e.tag=0,Ee&&s&&_h(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qE(r),t=Gt(r,t),i){case 0:e=yc(null,e,r,t,n);break e;case 1:e=Ep(null,e,r,t,n);break e;case 11:e=vp(null,e,r,t,n);break e;case 14:e=_p(null,e,r,Gt(r.type,t),n);break e}throw Error(b(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),yc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Ep(t,e,r,i,n);case 3:e:{if(My(e),t===null)throw Error(b(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ly(t,e),Va(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ei(Error(b(423)),e),e=wp(t,e,r,n,i);break e}else if(r!==i){i=Ei(Error(b(424)),e),e=wp(t,e,r,n,i);break e}else for(Rt=Wn(e.stateNode.containerInfo.firstChild),kt=e,Ee=!0,Xt=null,n=oy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yi(),r===i){e=An(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return uy(e),t===null&&fc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,ac(r,i)?a=null:s!==null&&ac(r,s)&&(e.flags|=32),Oy(t,e),dt(t,e,a,n),e.child;case 6:return t===null&&fc(e),null;case 13:return Ly(t,e,n);case 4:return xh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vi(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),vp(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ge(Pa,r._currentValue),r._currentValue=a,s!==null)if(en(s.value,a)){if(s.children===i.children&&!Tt.current){e=An(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=wn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),dc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(b(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),dc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hi(e,n),i=zt(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=Gt(r,e.pendingProps),i=Gt(r.type,i),_p(t,e,r,i,n);case 15:return Dy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),oa(t,e),e.tag=1,St(r)?(t=!0,Ca(e)):t=!1,hi(e,n),Py(e,r,i),mc(e,r,i,n),vc(null,e,r,!0,t,n);case 19:return by(t,e,n);case 22:return Ny(t,e,n)}throw Error(b(156,e.tag))};function Zy(t,e){return Cg(t,e)}function WE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new WE(t,e,n,r)}function Bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qE(t){if(typeof t=="function")return Bh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ah)return 11;if(t===lh)return 14}return 2}function Gn(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ua(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Bh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Yr:return xr(n.children,i,s,e);case oh:a=8,i|=8;break;case ju:return t=Ft(12,n,e,i|2),t.elementType=ju,t.lanes=s,t;case zu:return t=Ft(13,n,e,i),t.elementType=zu,t.lanes=s,t;case Uu:return t=Ft(19,n,e,i),t.elementType=Uu,t.lanes=s,t;case ug:return dl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ag:a=10;break e;case lg:a=9;break e;case ah:a=11;break e;case lh:a=14;break e;case Mn:a=16,r=null;break e}throw Error(b(130,t==null?t:typeof t,""))}return e=Ft(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function xr(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function dl(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=ug,t.lanes=n,t.stateNode={isHidden:!1},t}function Iu(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function Au(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $h(t,e,n,r,i,s,a,l,u){return t=new QE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ft(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ch(s),t}function KE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ev(t){if(!t)return tr;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(b(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(b(171))}if(t.tag===1){var n=t.type;if(St(n))return ey(t,n,e)}return e}function tv(t,e,n,r,i,s,a,l,u){return t=$h(n,r,!0,t,i,s,a,l,u),t.context=ev(null),n=t.current,r=pt(),i=Kn(n),s=wn(r,i),s.callback=e??null,qn(n,s,i),t.current.lanes=i,no(t,i,r),It(t,r),t}function pl(t,e,n,r){var i=e.current,s=pt(),a=Kn(i);return n=ev(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=qn(i,e,a),t!==null&&(Zt(t,i,a,s),ra(t,i,a)),a}function ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hh(t,e){Vp(t,e),(t=t.alternate)&&Vp(t,e)}function GE(){return null}var nv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wh(t){this._internalRoot=t}ml.prototype.render=Wh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(b(409));pl(t,e,null,null)};ml.prototype.unmount=Wh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){pl(null,t,null,null)}),e[Sn]=null}};function ml(t){this._internalRoot=t}ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ng();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bn.length&&e!==0&&e<bn[n].priority;n++);bn.splice(n,0,t),n===0&&Mg(t)}};function qh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dp(){}function YE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=ja(a);s.call(h)}}var a=tv(e,r,t,0,null,!1,!1,"",Dp);return t._reactRootContainer=a,t[Sn]=a.current,bs(t.nodeType===8?t.parentNode:t),Dr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=ja(u);l.call(h)}}var u=$h(t,0,!1,null,null,!1,!1,"",Dp);return t._reactRootContainer=u,t[Sn]=u.current,bs(t.nodeType===8?t.parentNode:t),Dr(function(){pl(e,u,n,r)}),u}function yl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=ja(a);l.call(u)}}pl(e,a,t,i)}else a=YE(n,e,t,i,r);return ja(a)}Vg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=us(e.pendingLanes);n!==0&&(hh(e,n|1),It(e,ke()),!(ie&6)&&(wi=ke()+500,hr()))}break;case 13:Dr(function(){var r=In(t,1);if(r!==null){var i=pt();Zt(r,t,1,i)}}),Hh(t,1)}};fh=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var n=pt();Zt(e,t,134217728,n)}Hh(t,134217728)}};Dg=function(t){if(t.tag===13){var e=Kn(t),n=In(t,e);if(n!==null){var r=pt();Zt(n,t,e,r)}Hh(t,e)}};Ng=function(){return ce};Og=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};Xu=function(t,e,n){switch(e){case"input":if(Hu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=al(r);if(!i)throw Error(b(90));hg(r),Hu(r,i)}}}break;case"textarea":dg(t,n);break;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}};Eg=jh;wg=Dr;var XE={usingClientEntryPoint:!1,Events:[io,ei,al,vg,_g,jh]},ss={findFiberByHostInstance:Tr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JE={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ig(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||GE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ho=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ho.isDisabled&&Ho.supportsFiber)try{rl=Ho.inject(JE),an=Ho}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XE;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qh(e))throw Error(b(200));return KE(t,e,null,n)};Dt.createRoot=function(t,e){if(!qh(t))throw Error(b(299));var n=!1,r="",i=nv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$h(t,1,!1,null,null,n,!1,r,i),t[Sn]=e.current,bs(t.nodeType===8?t.parentNode:t),new Wh(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(b(188)):(t=Object.keys(t).join(","),Error(b(268,t)));return t=Ig(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return Dr(t)};Dt.hydrate=function(t,e,n){if(!gl(e))throw Error(b(200));return yl(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!qh(t))throw Error(b(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=nv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=tv(e,null,t,1,n??null,i,!1,s,a),t[Sn]=e.current,bs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ml(e)};Dt.render=function(t,e,n){if(!gl(e))throw Error(b(200));return yl(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!gl(t))throw Error(b(40));return t._reactRootContainer?(Dr(function(){yl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};Dt.unstable_batchedUpdates=jh;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gl(n))throw Error(b(200));if(t==null||t._reactInternals===void 0)throw Error(b(38));return yl(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rv)}catch(t){console.error(t)}}rv(),rg.exports=Dt;var ZE=rg.exports,Np=ZE;bu.createRoot=Np.createRoot,bu.hydrateRoot=Np.hydrateRoot;const Op=["A","B","C","D","E","F"],Mp=[1,2,3,4,5,6],ew={red:"#e74c3c",blue:"#3498db",green:"#2ecc71",purple:"#a259d9",yellow:"#f7e34e"};function iv(t){return t&&ew[t]||"#fff"}function tw(t){return t?t==="yellow"?"0 1px 12px #f7e34e88":`0 2px 13px ${iv(t)}88, 0 1px 7px #0002`:"0 1px 7px #0000"}function sv({dots:t={},wildCellId:e,cellSize:n=17,style:r={}}){const a=Op.length,l=a*n+(a-1)*2,u=l+6*2;return C.jsxs("div",{className:"board-root",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:6,background:"rgba(255,255,255,0.96)",borderRadius:14,boxShadow:"0 2px 10px #20305b22",minHeight:u,minWidth:0,width:"100%",maxWidth:370,...r},children:[C.jsxs("table",{style:{borderCollapse:"separate",borderSpacing:2,margin:0,userSelect:"none",width:"auto",height:l},children:[C.jsx("thead",{children:C.jsxs("tr",{children:[C.jsx("th",{}),Mp.map(h=>C.jsx("th",{style:{fontWeight:900,fontSize:"1.09em",color:"#34495e"},children:h},h))]})}),C.jsx("tbody",{children:Op.map(h=>C.jsxs("tr",{children:[C.jsx("th",{style:{fontWeight:900,fontSize:"1.09em",color:"#34495e"},children:h}),Mp.map(d=>{const g=`${h}${d}`,p=t[g],I=e===g;return C.jsx("td",{style:{padding:0,position:"relative",transition:"background 0.18s"},children:C.jsxs("div",{style:{width:n,height:n,borderRadius:"50%",background:p?iv(p):"#fff",boxShadow:p?tw(p):"0 1px 7px #eee",border:p?"none":"2px dashed #e0e6ef",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"1.05em",color:p==="yellow"?"#715c13":"#aaa",cursor:"default",transition:"background 0.2s, box-shadow 0.2s, border 0.2s",outline:I?"2px solid #ffd843":"none",zIndex:I?2:1,position:"relative",animation:I?"wildPulse 1.1s infinite alternate":void 0},children:[p?p==="yellow"?"★":"":C.jsx("span",{style:{opacity:.28},children:"+"}),I&&C.jsx("div",{style:{position:"absolute",top:-3,left:-3,width:n+6,height:n+6,borderRadius:"50%",border:"2px solid #ffd843",boxShadow:"0 0 8px #ffd84344",zIndex:3,pointerEvents:"none"}})]})},g)})]},h))})]}),C.jsx("style",{children:`
        @keyframes wildPulse {
          0% { box-shadow: 0 0 0 0 #ffd84390; }
          100% { box-shadow: 0 0 13px 4px #ffd84344; }
        }
      `})]})}function Wo({card:t,width:e,height:n,fontSize:r,isActive:i,disabled:s}){if(!t)return C.jsx("div",{className:"player-card-modern",style:{width:e,height:n,opacity:.35,background:"#f7f7f7",border:"2px dashed #ddd",color:"#bbb",display:"inline-block"}});const a=t.color?` ${t.color}`:"";return C.jsxs("div",{className:`player-card-modern${a}`,style:{width:e,height:n,fontSize:r,opacity:s?.65:1,cursor:s?"default":"pointer",boxShadow:i&&!s?"0 2px 10px #3498db33":void 0,transition:"box-shadow 0.18s, transform 0.13s",margin:"0 5px"},tabIndex:s?-1:0,"aria-disabled":s,children:[t.row,t.col]})}function za({player:t,isActive:e,onCardClick:n,showHand:r,discardPiles:i,isAI:s,mode:a,cardFontSize:l="1.1em",cardWidth:u=68,cardHeight:h=75,style:d={}}){return C.jsxs("div",{className:`player-area ${s?"player-ai":"player-human"}`,style:{background:"#fff",borderRadius:13,boxShadow:"0 2px 11px #0001",padding:"8px 5px 13px 5px",margin:"0 auto",width:"100%",maxWidth:195,minHeight:100,textAlign:"center",...d},children:[C.jsx("div",{style:{fontWeight:700,fontSize:"1.07em",marginBottom:2,color:s?"#777":"#2b71e7",letterSpacing:"1.5px"},children:t.name}),r&&C.jsx("div",{className:"player-hand",style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:7,marginBottom:0,marginTop:2},children:t.hand.map((g,p)=>C.jsx("span",{style:{display:"inline-block"},onClick:e&&n?()=>n(p):void 0,tabIndex:e&&n?0:-1,role:e&&n?"button":void 0,"aria-disabled":!e,children:C.jsx(Wo,{card:g,width:u,height:h,fontSize:l,isActive:e,disabled:!e})},p))}),C.jsx("div",{className:"player-discards",style:{marginTop:r?8:0,marginBottom:7,display:"flex",flexDirection:"row",justifyContent:"center",gap:6},children:i&&i.length>0?i.map((g,p)=>C.jsx(Wo,{card:g,width:u-14,height:h-14,fontSize:"0.92em",disabled:!0},p)):C.jsxs(C.Fragment,{children:[C.jsx(Wo,{width:u-14,height:h-14,fontSize:"0.92em",disabled:!0}),C.jsx(Wo,{width:u-14,height:h-14,fontSize:"0.92em",disabled:!0})]})}),C.jsxs("div",{style:{fontSize:"1.02em",color:"#888",fontWeight:600,letterSpacing:"0.5px"},children:["Score: ",C.jsx("span",{style:{color:"#2b71e7",fontWeight:800},children:t.score}),a==="hard"&&C.jsxs("span",{style:{display:"block",marginTop:2,fontSize:"0.99em"},children:[C.jsx("span",{style:{color:"#e74c3c",fontWeight:700,marginRight:3},children:t.red}),C.jsx("span",{style:{color:"#3498db",fontWeight:700,marginRight:3},children:t.blue}),C.jsx("span",{style:{color:"#2ecc71",fontWeight:700,marginRight:3},children:t.green}),C.jsx("span",{style:{color:"#a259d9",fontWeight:700},children:t.purple})]})]})]})}function ov({letter:t,number:e,onRoll:n}){return C.jsxs("div",{className:"dice",children:[C.jsx("button",{onClick:n,children:"Roll Dice"}),C.jsxs("div",{className:"dice-values",children:[C.jsx("span",{className:"dice-letter",children:t||"-"}),C.jsx("span",{className:"dice-number",children:e||"-"})]})]})}function av({open:t,onClose:e}){return t?C.jsx("div",{className:"tutorial-modal-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(30,40,70,0.65)",zIndex:5e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:e,children:C.jsxs("div",{className:"tutorial-modal-content",style:{background:"#fff",borderRadius:16,maxWidth:420,width:"93vw",maxHeight:"90vh",padding:"32px 22px 24px 22px",boxShadow:"0 8px 28px #0005",position:"relative",display:"flex",flexDirection:"column"},onClick:n=>n.stopPropagation(),children:[C.jsx("button",{onClick:e,style:{position:"absolute",top:16,right:18,background:"none",border:"none",fontSize:28,color:"#aaa",fontWeight:700,cursor:"pointer",lineHeight:"1em",zIndex:1},"aria-label":"Close tutorial",children:"×"}),C.jsxs("h2",{style:{marginTop:0,marginBottom:14},children:["How to Play ",C.jsx("span",{role:"img","aria-label":"dots",children:"🔵"})]}),C.jsxs("div",{style:{overflowY:"auto",flex:"1 1 auto",minHeight:0,paddingRight:4},children:[C.jsxs("ol",{style:{paddingLeft:18,fontSize:"1.08em",margin:0},children:[C.jsxs("li",{children:[C.jsx("b",{children:"Objective:"})," ",C.jsx("br",{}),C.jsxs("span",{children:["Collect points by playing colored cards to the board. First to ",C.jsx("b",{children:"20 points"})," (Easy) or ",C.jsx("b",{children:"5 of each color"})," (Hard) wins!"]})]}),C.jsxs("li",{children:[C.jsx("b",{children:"On Your Turn:"}),C.jsxs("ul",{children:[C.jsxs("li",{children:["Roll the dice to light up a random ",C.jsx("b",{children:"wild cell"})," (yellow)."]}),C.jsx("li",{children:"Play 2 cards per turn."})]})]}),C.jsxs("li",{children:[C.jsx("b",{children:"Scoring:"}),C.jsxs("ul",{children:[C.jsxs("li",{children:[C.jsx("b",{children:"+1 point:"})," Replace any dot on the board (even your own or a wild) with your color."]}),C.jsxs("li",{children:[C.jsx("b",{children:"+N points:"})," For every dot cleared when you complete a row/chain of 3+ in any direction."]}),C.jsx("li",{children:"Your score and color tallies are shown at the top."})]})]}),C.jsxs("li",{children:[C.jsx("b",{children:"Chain Reactions:"}),C.jsxs("ul",{children:[C.jsx("li",{children:"If you create or clear a row of 3+ with your move, those dots are removed and you earn points for each dot cleared."}),C.jsx("li",{children:"If a yellow wild dot is cleared or replaced, a new wild cell will be rolled."})]})]}),C.jsxs("li",{children:[C.jsx("b",{children:"Winning:"}),C.jsxs("ul",{children:[C.jsxs("li",{children:[C.jsx("b",{children:"Easy Mode:"})," First to 20 points wins."]}),C.jsxs("li",{children:[C.jsx("b",{children:"Hard Mode:"})," Get 5 of each color (red, blue, green, purple) to win."]})]})]}),C.jsxs("li",{children:[C.jsx("b",{children:"Pro Tips:"}),C.jsxs("ul",{children:[C.jsx("li",{children:"Try to create chains to clear as many dots as possible in one move."}),C.jsx("li",{children:"Watch for wild (yellow) dots—they help trigger chain reactions!"})]})]})]}),C.jsxs("div",{style:{marginTop:18,marginBottom:4,fontSize:"0.97em",color:"#555",background:"#eef7ff",padding:"10px 12px",borderRadius:10,textAlign:"center"},children:[C.jsx("b",{children:"Tip:"})," Click the ",C.jsx("span",{style:{display:"inline-block",color:"#2b71e7",fontWeight:700,fontSize:"1.04em",padding:"2px 4px"},children:"Instructions"})," tab at any time for help!"]})]}),C.jsx("button",{style:{marginTop:18,background:"#2b71e7",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.13em",letterSpacing:"0.5px",boxShadow:"0 2px 8px #0003",cursor:"pointer",alignSelf:"center"},onClick:e,children:"Got it!"})]})}):null}function Qh({style:t}){return C.jsxs("div",{style:{textAlign:"center",margin:"10px auto 0 auto",...t},children:[C.jsx("div",{style:{fontFamily:"Arial, Helvetica, 'Segoe UI', 'Liberation Sans', sans-serif",fontSize:"2.0em",fontWeight:900,letterSpacing:"0.04em",color:"#191919",textShadow:"2px 1px 0 #0003",lineHeight:1.08,userSelect:"none"},children:"TWENTY"}),C.jsx("div",{style:{display:"flex",justifyContent:"center",gap:5,marginTop:"-0.12em"},children:["d","o","t","s"].map((e,n)=>C.jsx("span",{style:{display:"inline-block",width:22,height:22,borderRadius:"50%",background:["#f03c3c","#4bd247","#a259d9","#3498db"][n],color:"#fff",fontFamily:"Arial, Helvetica, 'Segoe UI', 'Liberation Sans', sans-serif",fontSize:"1em",textAlign:"center",lineHeight:"22px",marginRight:1,boxShadow:"1px 1px 4px #0002"},children:e},n))})]})}function nw({winner:t,onClose:e}){return C.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:5e3,background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:e,children:[C.jsxs("div",{style:{background:"#fff",borderRadius:18,boxShadow:"0 8px 36px #0004, 0 1.5px 7px #0001",padding:"42px 36px 36px 36px",minWidth:270,minHeight:170,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",border:"4px solid #ffe066",animation:"popCelebrate 0.8s cubic-bezier(.4,2,.3,1.1)"},children:[C.jsx("div",{style:{fontSize:"2.9em",fontWeight:900,color:"#27ae60",textShadow:"0 3px 0 #d9ffe6, 0 7px 18px #24c47d44",marginBottom:12,letterSpacing:"1.5px",textAlign:"center",lineHeight:1.1,fontFamily:"Segoe UI, Arial, Helvetica, sans-serif"},children:t==="You"?"You Won!":t==="AI"?"AI Wins!":`${t} Wins!`}),C.jsx("div",{style:{fontSize:"2.1em",marginBottom:8},children:"🎉🎊"}),C.jsx("button",{style:{marginTop:10,background:"#ffe066",color:"#222",fontWeight:700,fontSize:"1.13em",border:"none",borderRadius:8,padding:"7px 24px",boxShadow:"0 2px 8px #eccb1a33",cursor:"pointer",transition:"background 0.2s"},onClick:e,children:"OK"})]}),C.jsx("style",{children:`
        @keyframes popCelebrate {
          0% { transform: scale(0.85); opacity: 0.2;}
          80% { transform: scale(1.09);}
          100% { transform: scale(1); opacity: 1;}
        }
      `})]})}const vl=["A","B","C","D","E","F"],_l=[1,2,3,4,5,6],rw=vl.flatMap(t=>_l.map(e=>({id:`${t}${e}`}))),iw=["red","blue","purple","green"];function sw(){const t=[];for(const e of iw)for(const n of vl)for(const r of _l)t.push({color:e,row:n,col:r,id:`${e}-${n}${r}`});return t}[...vl];[..._l];function ow(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function Cu(t,e){const n=[],r=[{dr:0,dc:1},{dr:1,dc:0},{dr:1,dc:1},{dr:1,dc:-1}],i=vl,s=_l;function a(l,u){return t[l]===u||t[l]==="yellow"}for(let l=0;l<i.length;l++)for(let u=0;u<s.length;u++)for(const{dr:h,dc:d}of r){let g=[];for(let p=0;p<6;p++){let I=l+h*p,R=u+d*p;if(I<0||I>=i.length||R<0||R>=s.length)break;let V=`${i[I]}${s[R]}`;if(a(V,e))g.push(V);else break}g.length>=3&&n.push(g)}return Array.from(new Set(n.flat()))}const os=["red","blue","green","purple"],aw=t=>t==="red"||t==="green"?0:t==="blue"||t==="purple"?1:null;function qo(t){return{name:t,hand:[],score:0,red:0,blue:0,green:0,purple:0}}function lw({onBack:t}){const[e,n]=X.useState("easy"),[r,i]=X.useState("waiting-for-dice"),[s,a]=X.useState({}),[l,u]=X.useState([]),[h,d]=X.useState([qo("You"),qo("AI")]),[g,p]=X.useState(0),[I,R]=X.useState(null),[V,M]=X.useState({row:null,col:null}),[S,v]=X.useState([[],[]]),[A,N]=X.useState(0),[j,F]=X.useState([]),[E,y]=X.useState(null),[_,T]=X.useState(!1),[x,P]=X.useState({width:window.innerWidth,height:window.innerHeight});X.useEffect(()=>{function re(){P({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]);const w=x.width<700,Ve=w?"97vw":230,Je=w?"0.81em":"0.97em",Oe=w?21:30,Ot=w?26:36,[U,Q]=X.useState(()=>!localStorage.getItem("tdots_tutorial_seen"));function Y(){Q(!1),localStorage.setItem("tdots_tutorial_seen","yes")}X.useEffect(()=>{const re=ow(sw());d([{...qo("You"),hand:re.slice(0,5)},{...qo("AI"),hand:re.slice(5,10)}]),u(re.slice(10)),a({}),p(0),R(null),M({row:null,col:null}),v([[],[]]),N(0),F([]),y(null),T(!1),i("waiting-for-dice")},[e]);function pe(re,ue){let he=[...re],oe=[...l];for(let fe=0;fe<ue&&oe.length>0;fe++)he.push(oe.shift());return u(oe),he}function le(re,ue,he,oe){let fe=[...re];return fe[ue]={...fe[ue],score:fe[ue].score+oe},he&&os.includes(he)&&(fe[ue][he]+=oe),fe}function we(re,ue=null){let he={...re},oe=[...h],fe=!1;return os.forEach(He=>{const Ze=Cu(he,He);if(Ze.length>0){const Me=aw(He);Me!==null&&(oe=le(oe,Me,He,Ze.length)),Ze.forEach(ct=>{ue&&ct===ue&&(fe=!0),delete he[ct]})}}),{updatedDots:he,updatedPlayers:oe,wildCleared:fe}}X.useEffect(()=>{if(r!=="game-over"){for(let re=0;re<h.length;re++)if(e==="easy"&&h[re].score>=20||e==="hard"&&os.every(ue=>h[re][ue]>=5)){y(h[re].name),i("game-over");break}}},[h,r,e]);function Mt(re=!1){if(r!=="waiting-for-dice"&&!re||I)return;let ue=rw.map(ct=>ct.id).filter(ct=>!s[ct]);if(ue.length===0)return;const he=Math.floor(Math.random()*ue.length),oe=ue[he];let fe={...s,[oe]:"yellow"};M({row:oe[0],col:Number(oe.slice(1))});const{updatedDots:He,updatedPlayers:Ze,wildCleared:Me}=we(fe,oe);a(He),d(Ze),Me?(R(null),i("waiting-for-dice")):(R(oe),i("playing"),_&&setTimeout(()=>{T(!1),p(1)},400))}function Bt(re){if(r!=="playing"||g!==0||A>=2)return;const ue=h[0].hand[re],he=`${ue.row}${ue.col}`,oe=s[he];if(j.includes(he)||!I)return;let fe={...s,[he]:ue.color},He=0,Ze=!1,Me={red:0,blue:0,green:0,purple:0};oe&&oe!=="yellow"&&(He=1,os.includes(oe)&&(Me[oe]+=1)),oe==="yellow"&&(Ze=!0,He+=1),v(me=>{const qt=[...me];return qt[0]=[ue,...qt[0]].slice(0,2),qt});const ct=h[0].hand.slice();ct.splice(re,1);const yt=Cu(fe,ue.color);let Wt=!1,tn=yt.length;if(tn>0){for(const me of yt)me===I&&(Wt=!0),Me[ue.color]+=1,delete fe[me];He+=tn}d(me=>[{...me[0],hand:ct,score:me[0].score+He,red:me[0].red+Me.red,blue:me[0].blue+Me.blue,green:me[0].green+Me.green,purple:me[0].purple+Me.purple},me[1]]),a(fe),N(me=>me+1),F(me=>[...me,he]),(Ze||Wt)&&(R(null),i("waiting-for-dice"))}function $t(){d(re=>[{...re[0],hand:pe(re[0].hand,2)},re[1]]),N(0),F([]),p(1)}X.useEffect(()=>{g===0&&A===2&&r==="playing"&&setTimeout($t,700)},[A,r]),X.useEffect(()=>{if(g===1&&r==="playing"){let re=0,ue=[...h[1].hand],he={...s},oe=[...S[1]],fe={...h[1]},He=I,Ze=!1,Me=!1,ct=[];for(let yt=0;yt<ue.length&&re<2;++yt){const Wt=ue[yt],tn=`${Wt.row}${Wt.col}`,me=he[tn];if(!He)break;if(ct.includes(tn))continue;let qt=0,kn={red:0,blue:0,green:0,purple:0};me&&me!=="yellow"&&(qt+=1,os.includes(me)&&(kn[me]+=1)),me==="yellow"&&(Ze=!0,qt+=1),oe=[Wt,...oe].slice(0,2),he[tn]=Wt.color;const pr=Cu(he,Wt.color);if(pr.length>0){for(const jr of pr)jr===He&&(Me=!0),kn[Wt.color]+=1,delete he[jr];qt+=pr.length}if(fe.score+=qt,fe.red+=kn.red,fe.blue+=kn.blue,fe.green+=kn.green,fe.purple+=kn.purple,ue.splice(yt,1),ct.push(tn),re++,yt--,Ze||Me)break}setTimeout(()=>{a(he),v(yt=>[yt[0],oe]),d(yt=>[yt[0],{...fe,hand:pe(ue,2)}]),N(0),F([]),Ze||Me?(R(null),i("waiting-for-dice"),T(re<2)):p(0)},400)}},[g,r]),X.useEffect(()=>{_&&r==="waiting-for-dice"&&!I&&setTimeout(()=>Mt(!0),500)},[_,r,I]);function Ht(){y(null)}return C.jsxs("div",{className:"app-root",style:{minHeight:"100vh",width:"100vw",background:"#e8f3fc",display:"flex",flexDirection:"column",alignItems:"center",padding:0},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"98vw",maxWidth:420,padding:"4px 0 0 0",marginBottom:2},children:[C.jsx("button",{style:{background:"#f03c3c",color:"#fff",border:"none",borderRadius:7,fontWeight:700,fontSize:"1em",padding:"4px 13px",margin:0,boxShadow:"0 2px 6px #0002"},onClick:t,children:"Back"}),C.jsx("button",{style:{background:"none",border:"none",color:"#2b71e7",fontWeight:700,fontSize:"1.1em",textDecoration:"underline",cursor:"pointer",padding:"4px 16px",borderRadius:"8px",marginRight:2,transition:"background 0.2s"},onClick:()=>Q(!0),children:"Instructions"})]}),C.jsx(av,{open:U,onClose:Y}),C.jsx(Qh,{style:{margin:"0 0 2px 0"}}),C.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",gap:7,margin:"2px 0 0 0"},children:[C.jsxs("div",{style:{display:"flex",flexDirection:"row",background:"#fff",borderRadius:11,boxShadow:"0 1.5px 6px #0001",overflow:"hidden"},children:[C.jsxs("div",{style:{padding:"3px 12px",fontWeight:700,color:"#2b71e7",fontSize:"1em",background:"#f7faff",borderRight:"1px solid #dce6f6"},children:["You",C.jsx("br",{}),h[0].score]}),C.jsxs("div",{style:{padding:"3px 12px",fontWeight:700,color:"#a259d9",fontSize:"1em",background:"#f9f6ff"},children:["AI",C.jsx("br",{}),h[1].score]})]}),C.jsxs("div",{style:{background:"#fff",borderRadius:11,padding:"3px 8px",marginLeft:2,fontWeight:600,fontSize:"0.93em",color:"#191919",boxShadow:"0 1px 4px #0001"},children:["Mode:",C.jsx("button",{style:{background:e==="easy"?"#2ecc71":"#eee",color:"#fff",border:"none",borderRadius:6,padding:"2px 8px",margin:"0 3px",fontWeight:700,outline:"none",cursor:e==="easy"?"default":"pointer",opacity:e==="easy"?1:.8,transition:"background 0.2s"},onClick:()=>n("easy"),disabled:e==="easy",children:"Easy"}),C.jsx("span",{style:{color:"#aaa",margin:"0 2px"},children:"/"}),C.jsx("button",{style:{background:e==="hard"?"#a259d9":"#eee",color:"#fff",border:"none",borderRadius:6,padding:"2px 8px",fontWeight:700,outline:"none",cursor:e==="hard"?"default":"pointer",opacity:e==="hard"?1:.8,transition:"background 0.2s"},onClick:()=>n("hard"),disabled:e==="hard",children:"Hard"})]})]}),e==="hard"&&C.jsxs("div",{style:{marginTop:6,marginBottom:0,fontWeight:600,fontSize:"1em",color:"#a259d9",background:"#f6f2ff",borderRadius:7,padding:"5px 14px",textAlign:"center",boxShadow:"0 1px 4px #a259d933",letterSpacing:"0.5px"},children:["Get ",C.jsx("b",{children:"5 of each color"})," to win"]}),C.jsxs("div",{style:{width:Ve,maxWidth:380,margin:"6px 0 0 0",display:"flex",flexDirection:"column",alignItems:"center"},children:[C.jsx(sv,{dots:s,wildCellId:I,cellSize:w?17:22,style:{minWidth:0,width:"100%",boxSizing:"border-box",margin:"0 auto"}}),C.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:5},children:[C.jsx(ov,{letter:V.row,number:V.col,onRoll:()=>Mt(!1),canRoll:r==="waiting-for-dice",style:{fontSize:"1em",width:56,height:30}}),r==="waiting-for-dice"&&C.jsx("div",{style:{marginTop:3,padding:"3px 10px",background:"#fffbe8",borderRadius:7,color:"#b48e00",fontWeight:600,fontSize:"0.98em",boxShadow:"0 1px 4px #ffe07f55",textAlign:"center"},children:"Roll for wild!"})]})]}),C.jsxs("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"flex-start",gap:8,width:"96vw",maxWidth:380,margin:"10px 0 0 0"},children:[C.jsx(za,{player:h[0],isActive:g===0&&r==="playing",onCardClick:Bt,showHand:!0,discardPiles:S[0],mode:e,cardFontSize:Je,cardWidth:Oe,cardHeight:Ot,style:{width:"48vw",minWidth:0,maxWidth:160,padding:4,borderRadius:12,background:"#fff",boxShadow:"0 1px 4px #0001"}}),C.jsx(za,{player:h[1],isActive:g===1&&r==="playing",showHand:!1,discardPiles:S[1],isAI:!0,mode:e,cardFontSize:Je,cardWidth:Oe,cardHeight:Ot,style:{width:"48vw",minWidth:0,maxWidth:160,padding:4,borderRadius:12,background:"#fff",boxShadow:"0 1px 4px #0001"}})]}),E&&C.jsx(nw,{winner:E==="You"?"You":E==="AI"?"AI":E,onClose:Ht}),C.jsx("footer",{className:"app-footer",style:{background:"#222c3c",color:"#fff",textAlign:"center",padding:"6px 0 4px 0",fontSize:"1em",letterSpacing:"1px",marginTop:14,width:"100%",flexShrink:0},children:C.jsx("span",{children:"Made by dabeejgames"})})]})}const uw=[[8,10,70,"#88aaff",.13],[22,22,36,"#ffb8b8",.12],[65,16,42,"#90e0ef",.1],[78,27,90,"#a5ffd6",.1],[55,65,60,"#ffd6a5",.12],[42,40,32,"#b8afff",.1],[80,70,75,"#ffe5ec",.11],[20,70,60,"#b8ffd6",.1],[70,55,35,"#ffb8e8",.09],[30,55,44,"#aaffaa",.1],[50,80,36,"#b8c6ff",.1],[90,35,28,"#ffaaff",.09],[5,45,42,"#b8e8ff",.1]];function lv(){return C.jsx("div",{style:{position:"fixed",inset:0,zIndex:0,pointerEvents:"none",background:"linear-gradient(120deg, #e9f3ff 0%, #d9ecff 100%)",overflow:"hidden"},children:uw.map(([t,e,n,r,i],s)=>C.jsx("div",{style:{position:"absolute",left:`${t}%`,top:`${e}%`,width:n,height:n,borderRadius:"50%",background:r,opacity:i,pointerEvents:"none",filter:"blur(0.5px)",zIndex:0,transform:"translate(-50%, -50%)"}},s))})}const Lp={red:"Red",blue:"Blue",green:"Green",purple:"Purple"},bp={red:"#e74c3c",blue:"#3498db",green:"#2ecc71",purple:"#a259d9"};function cw({players:t,mode:e}){return C.jsx("div",{className:"scoreboard",style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"36px",margin:"0 0 10px 0"},children:t.map((n,r)=>C.jsxs("div",{className:`scoreboard-player ${r===0?"scoreboard-you":"scoreboard-ai"}`,style:{background:"#fff",borderRadius:10,boxShadow:"0 2px 8px #0001",padding:"14px 28px",minWidth:140,display:"flex",flexDirection:"column",alignItems:"center",fontWeight:600},children:[C.jsx("div",{className:"scoreboard-player-title",style:{fontSize:"1.18em",marginBottom:4},children:n.name}),C.jsxs("div",{className:"scoreboard-score",style:{fontSize:"2em",color:"#2b71e7",fontWeight:800,marginBottom:e==="hard"?4:0,lineHeight:1},children:[n.score,C.jsx("span",{style:{fontSize:"0.55em",fontWeight:600,color:"#888",marginLeft:8},children:"dots"})]}),e==="hard"&&C.jsx("div",{className:"scoreboard-colors",style:{display:"flex",flexDirection:"row",gap:12,marginTop:2,fontWeight:700,fontSize:"1.05em"},children:Object.keys(Lp).map(i=>C.jsxs("div",{title:Lp[i],style:{display:"flex",alignItems:"center",gap:3,minWidth:24,padding:"0 3px"},children:[C.jsx("span",{style:{display:"inline-block",width:13,height:13,borderRadius:"50%",background:bp[i],border:"2px solid #ddd"}}),C.jsx("span",{style:{color:bp[i],fontWeight:800,fontSize:"1em"},children:n[i]})]},i))})]},n.name))})}const hw=()=>{};var Fp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},cv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let p=(l&15)<<2|h>>6,I=h&63;u||(I=64,a||(p=64)),r.push(n[d],n[g],n[p],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||g==null)throw new dw;const p=s<<2|l>>4;if(r.push(p),h!==64){const I=l<<4&240|h>>2;if(r.push(I),g!==64){const R=h<<6&192|g;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pw=function(t){const e=uv(t);return cv.encodeByteArray(e,!0)},Ua=function(t){return pw(t).replace(/\./g,"")},mw=function(t){try{return cv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=()=>gw().__FIREBASE_DEFAULTS__,vw=()=>{if(typeof process>"u"||typeof Fp>"u")return;const t=Fp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_w=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mw(t[1]);return e&&JSON.parse(e)},Kh=()=>{try{return hw()||yw()||vw()||_w()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ew=t=>{var e,n;return(n=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ww=t=>{const e=Ew(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hv=()=>{var t;return(t=Kh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t){return t.endsWith(".cloudworkstations.dev")}async function Sw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ua(JSON.stringify(n)),Ua(JSON.stringify(a)),""].join(".")}const Is={};function Aw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Is))Is[e]?t.emulator.push(e):t.prod.push(e);return t}function Cw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jp=!1;function xw(t,e){if(typeof window>"u"||typeof document>"u"||!Gh(window.location.host)||Is[t]===e||Is[t]||jp)return;Is[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=Aw().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,I){p.setAttribute("width","24"),p.setAttribute("id",I),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function h(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{jp=!0,a()},p}function d(p,I){p.setAttribute("id",I),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function g(){const p=Cw(r),I=n("text"),R=document.getElementById(I)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),S=n("preprendIcon"),v=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const A=p.element;l(A),d(M,V);const N=h();u(v,S),A.append(v,R,M,N),document.body.appendChild(A)}s?(R.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pw(){var t;const e=(t=Kh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kw(){return!Pw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vw(){try{return typeof indexedDB=="object"}catch{return!1}}function Dw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="FirebaseError";class Oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Nw,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fv.prototype.create)}}class fv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Ow(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Oi(i,l,r)}}function Ow(t,e){return t.replace(Mw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Mw=/\{\$([^}]+)}/g;function qs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(zp(s)&&zp(a)){if(!qs(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t){return t&&t._delegate?t._delegate:t}class Qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fw(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bw(t){return t===wr?void 0:t}function Fw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Lw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const zw={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},Uw=ne.INFO,Bw={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},$w=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Bw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dv{constructor(e){this.name=e,this._logLevel=Uw,this._logHandler=$w,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const Hw=(t,e)=>e.some(n=>t instanceof n);let Up,Bp;function Ww(){return Up||(Up=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qw(){return Bp||(Bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pv=new WeakMap,kc=new WeakMap,mv=new WeakMap,xu=new WeakMap,Yh=new WeakMap;function Qw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Yn(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&pv.set(n,t)}).catch(()=>{}),Yh.set(e,t),e}function Kw(t){if(kc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});kc.set(t,e)}let Vc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gw(t){Vc=t(Vc)}function Yw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ru(this),e,...n);return mv.set(r,e.sort?e.sort():[e]),Yn(r)}:qw().includes(t)?function(...e){return t.apply(Ru(this),e),Yn(pv.get(this))}:function(...e){return Yn(t.apply(Ru(this),e))}}function Xw(t){return typeof t=="function"?Yw(t):(t instanceof IDBTransaction&&Kw(t),Hw(t,Ww())?new Proxy(t,Vc):t)}function Yn(t){if(t instanceof IDBRequest)return Qw(t);if(xu.has(t))return xu.get(t);const e=Xw(t);return e!==t&&(xu.set(t,e),Yh.set(e,t)),e}const Ru=t=>Yh.get(t);function Jw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Yn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Yn(a.result),u.oldVersion,u.newVersion,Yn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Zw=["get","getKey","getAll","getAllKeys","count"],eT=["put","add","delete","clear"],Pu=new Map;function $p(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pu.get(e))return Pu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=eT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zw.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Pu.set(e,s),s}Gw(t=>({...t,get:(e,n,r)=>$p(e,n)||t.get(e,n,r),has:(e,n)=>!!$p(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dc="@firebase/app",Hp="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new dv("@firebase/app"),rT="@firebase/app-compat",iT="@firebase/analytics-compat",sT="@firebase/analytics",oT="@firebase/app-check-compat",aT="@firebase/app-check",lT="@firebase/auth",uT="@firebase/auth-compat",cT="@firebase/database",hT="@firebase/data-connect",fT="@firebase/database-compat",dT="@firebase/functions",pT="@firebase/functions-compat",mT="@firebase/installations",gT="@firebase/installations-compat",yT="@firebase/messaging",vT="@firebase/messaging-compat",_T="@firebase/performance",ET="@firebase/performance-compat",wT="@firebase/remote-config",TT="@firebase/remote-config-compat",ST="@firebase/storage",IT="@firebase/storage-compat",AT="@firebase/firestore",CT="@firebase/ai",xT="@firebase/firestore-compat",RT="firebase",PT="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="[DEFAULT]",kT={[Dc]:"fire-core",[rT]:"fire-core-compat",[sT]:"fire-analytics",[iT]:"fire-analytics-compat",[aT]:"fire-app-check",[oT]:"fire-app-check-compat",[lT]:"fire-auth",[uT]:"fire-auth-compat",[cT]:"fire-rtdb",[hT]:"fire-data-connect",[fT]:"fire-rtdb-compat",[dT]:"fire-fn",[pT]:"fire-fn-compat",[mT]:"fire-iid",[gT]:"fire-iid-compat",[yT]:"fire-fcm",[vT]:"fire-fcm-compat",[_T]:"fire-perf",[ET]:"fire-perf-compat",[wT]:"fire-rc",[TT]:"fire-rc-compat",[ST]:"fire-gcs",[IT]:"fire-gcs-compat",[AT]:"fire-fst",[xT]:"fire-fst-compat",[CT]:"fire-vertex","fire-js":"fire-js",[RT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new Map,VT=new Map,Oc=new Map;function Wp(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $a(t){const e=t.name;if(Oc.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;Oc.set(e,t);for(const n of Ba.values())Wp(n,t);for(const n of VT.values())Wp(n,t);return!0}function DT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function NT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xn=new fv("app","Firebase",OT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=PT;function gv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nc,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Xn.create("bad-app-name",{appName:String(i)});if(n||(n=hv()),!n)throw Xn.create("no-options");const s=Ba.get(i);if(s){if(qs(n,s.options)&&qs(r,s.config))return s;throw Xn.create("duplicate-app",{appName:i})}const a=new jw(i);for(const u of Oc.values())a.addComponent(u);const l=new MT(n,r,a);return Ba.set(i,l),l}function bT(t=Nc){const e=Ba.get(t);if(!e&&t===Nc&&hv())return gv();if(!e)throw Xn.create("no-app",{appName:t});return e}function di(t,e,n){var r;let i=(r=kT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(l.join(" "));return}$a(new Qs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="firebase-heartbeat-database",jT=1,Ks="firebase-heartbeat-store";let ku=null;function yv(){return ku||(ku=Jw(FT,jT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ks)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xn.create("idb-open",{originalErrorMessage:t.message})})),ku}async function zT(t){try{const n=(await yv()).transaction(Ks),r=await n.objectStore(Ks).get(vv(t));return await n.done,r}catch(e){if(e instanceof Oi)Cn.warn(e.message);else{const n=Xn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(n.message)}}}async function qp(t,e){try{const r=(await yv()).transaction(Ks,"readwrite");await r.objectStore(Ks).put(e,vv(t)),await r.done}catch(n){if(n instanceof Oi)Cn.warn(n.message);else{const r=Xn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function vv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=1024,BT=30;class $T{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>BT){const a=qT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qp(),{heartbeatsToSend:r,unsentEntries:i}=HT(this._heartbeatsCache.heartbeats),s=Ua(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Cn.warn(n),""}}}function Qp(){return new Date().toISOString().substring(0,10)}function HT(t,e=UT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Kp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vw()?Dw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kp(t){return Ua(JSON.stringify({version:2,heartbeats:t})).length}function qT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){$a(new Qs("platform-logger",e=>new tT(e),"PRIVATE")),$a(new Qs("heartbeat",e=>new $T(e),"PRIVATE")),di(Dc,Hp,t),di(Dc,Hp,"esm2017"),di("fire-js","")}QT("");var KT="firebase",GT="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(KT,GT,"app");var Gp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jn,_v;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function _(){}_.prototype=y.prototype,E.D=y.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(T,x,P){for(var w=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)w[Ve-2]=arguments[Ve];return y.prototype[x].apply(T,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,_){_||(_=0);var T=Array(16);if(typeof y=="string")for(var x=0;16>x;++x)T[x]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(x=0;16>x;++x)T[x]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=E.g[0],_=E.g[1],x=E.g[2];var P=E.g[3],w=y+(P^_&(x^P))+T[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=P+(x^y&(_^x))+T[1]+3905402710&4294967295,P=y+(w<<12&4294967295|w>>>20),w=x+(_^P&(y^_))+T[2]+606105819&4294967295,x=P+(w<<17&4294967295|w>>>15),w=_+(y^x&(P^y))+T[3]+3250441966&4294967295,_=x+(w<<22&4294967295|w>>>10),w=y+(P^_&(x^P))+T[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=P+(x^y&(_^x))+T[5]+1200080426&4294967295,P=y+(w<<12&4294967295|w>>>20),w=x+(_^P&(y^_))+T[6]+2821735955&4294967295,x=P+(w<<17&4294967295|w>>>15),w=_+(y^x&(P^y))+T[7]+4249261313&4294967295,_=x+(w<<22&4294967295|w>>>10),w=y+(P^_&(x^P))+T[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=P+(x^y&(_^x))+T[9]+2336552879&4294967295,P=y+(w<<12&4294967295|w>>>20),w=x+(_^P&(y^_))+T[10]+4294925233&4294967295,x=P+(w<<17&4294967295|w>>>15),w=_+(y^x&(P^y))+T[11]+2304563134&4294967295,_=x+(w<<22&4294967295|w>>>10),w=y+(P^_&(x^P))+T[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=P+(x^y&(_^x))+T[13]+4254626195&4294967295,P=y+(w<<12&4294967295|w>>>20),w=x+(_^P&(y^_))+T[14]+2792965006&4294967295,x=P+(w<<17&4294967295|w>>>15),w=_+(y^x&(P^y))+T[15]+1236535329&4294967295,_=x+(w<<22&4294967295|w>>>10),w=y+(x^P&(_^x))+T[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=P+(_^x&(y^_))+T[6]+3225465664&4294967295,P=y+(w<<9&4294967295|w>>>23),w=x+(y^_&(P^y))+T[11]+643717713&4294967295,x=P+(w<<14&4294967295|w>>>18),w=_+(P^y&(x^P))+T[0]+3921069994&4294967295,_=x+(w<<20&4294967295|w>>>12),w=y+(x^P&(_^x))+T[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=P+(_^x&(y^_))+T[10]+38016083&4294967295,P=y+(w<<9&4294967295|w>>>23),w=x+(y^_&(P^y))+T[15]+3634488961&4294967295,x=P+(w<<14&4294967295|w>>>18),w=_+(P^y&(x^P))+T[4]+3889429448&4294967295,_=x+(w<<20&4294967295|w>>>12),w=y+(x^P&(_^x))+T[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=P+(_^x&(y^_))+T[14]+3275163606&4294967295,P=y+(w<<9&4294967295|w>>>23),w=x+(y^_&(P^y))+T[3]+4107603335&4294967295,x=P+(w<<14&4294967295|w>>>18),w=_+(P^y&(x^P))+T[8]+1163531501&4294967295,_=x+(w<<20&4294967295|w>>>12),w=y+(x^P&(_^x))+T[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=P+(_^x&(y^_))+T[2]+4243563512&4294967295,P=y+(w<<9&4294967295|w>>>23),w=x+(y^_&(P^y))+T[7]+1735328473&4294967295,x=P+(w<<14&4294967295|w>>>18),w=_+(P^y&(x^P))+T[12]+2368359562&4294967295,_=x+(w<<20&4294967295|w>>>12),w=y+(_^x^P)+T[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=P+(y^_^x)+T[8]+2272392833&4294967295,P=y+(w<<11&4294967295|w>>>21),w=x+(P^y^_)+T[11]+1839030562&4294967295,x=P+(w<<16&4294967295|w>>>16),w=_+(x^P^y)+T[14]+4259657740&4294967295,_=x+(w<<23&4294967295|w>>>9),w=y+(_^x^P)+T[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=P+(y^_^x)+T[4]+1272893353&4294967295,P=y+(w<<11&4294967295|w>>>21),w=x+(P^y^_)+T[7]+4139469664&4294967295,x=P+(w<<16&4294967295|w>>>16),w=_+(x^P^y)+T[10]+3200236656&4294967295,_=x+(w<<23&4294967295|w>>>9),w=y+(_^x^P)+T[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=P+(y^_^x)+T[0]+3936430074&4294967295,P=y+(w<<11&4294967295|w>>>21),w=x+(P^y^_)+T[3]+3572445317&4294967295,x=P+(w<<16&4294967295|w>>>16),w=_+(x^P^y)+T[6]+76029189&4294967295,_=x+(w<<23&4294967295|w>>>9),w=y+(_^x^P)+T[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=P+(y^_^x)+T[12]+3873151461&4294967295,P=y+(w<<11&4294967295|w>>>21),w=x+(P^y^_)+T[15]+530742520&4294967295,x=P+(w<<16&4294967295|w>>>16),w=_+(x^P^y)+T[2]+3299628645&4294967295,_=x+(w<<23&4294967295|w>>>9),w=y+(x^(_|~P))+T[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=P+(_^(y|~x))+T[7]+1126891415&4294967295,P=y+(w<<10&4294967295|w>>>22),w=x+(y^(P|~_))+T[14]+2878612391&4294967295,x=P+(w<<15&4294967295|w>>>17),w=_+(P^(x|~y))+T[5]+4237533241&4294967295,_=x+(w<<21&4294967295|w>>>11),w=y+(x^(_|~P))+T[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=P+(_^(y|~x))+T[3]+2399980690&4294967295,P=y+(w<<10&4294967295|w>>>22),w=x+(y^(P|~_))+T[10]+4293915773&4294967295,x=P+(w<<15&4294967295|w>>>17),w=_+(P^(x|~y))+T[1]+2240044497&4294967295,_=x+(w<<21&4294967295|w>>>11),w=y+(x^(_|~P))+T[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=P+(_^(y|~x))+T[15]+4264355552&4294967295,P=y+(w<<10&4294967295|w>>>22),w=x+(y^(P|~_))+T[6]+2734768916&4294967295,x=P+(w<<15&4294967295|w>>>17),w=_+(P^(x|~y))+T[13]+1309151649&4294967295,_=x+(w<<21&4294967295|w>>>11),w=y+(x^(_|~P))+T[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=P+(_^(y|~x))+T[11]+3174756917&4294967295,P=y+(w<<10&4294967295|w>>>22),w=x+(y^(P|~_))+T[2]+718787259&4294967295,x=P+(w<<15&4294967295|w>>>17),w=_+(P^(x|~y))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(x+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+x&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.u=function(E,y){y===void 0&&(y=E.length);for(var _=y-this.blockSize,T=this.B,x=this.h,P=0;P<y;){if(x==0)for(;P<=_;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(T[x++]=E.charCodeAt(P++),x==this.blockSize){i(this,T),x=0;break}}else for(;P<y;)if(T[x++]=E[P++],x==this.blockSize){i(this,T),x=0;break}}this.h=x,this.o+=y},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;var _=8*this.o;for(y=E.length-8;y<E.length;++y)E[y]=_&255,_/=256;for(this.u(E),E=Array(16),y=_=0;4>y;++y)for(var T=0;32>T;T+=8)E[_++]=this.g[y]>>>T&255;return E};function s(E,y){var _=l;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=y(E)}function a(E,y){this.h=y;for(var _=[],T=!0,x=E.length-1;0<=x;x--){var P=E[x]|0;T&&P==y||(_[x]=P,T=!1)}this.g=_}var l={};function u(E){return-128<=E&&128>E?s(E,function(y){return new a([y|0],0>y?-1:0)}):new a([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return g;if(0>E)return M(h(-E));for(var y=[],_=1,T=0;E>=_;T++)y[T]=E/_|0,_*=4294967296;return new a(y,0)}function d(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return M(d(E.substring(1),y));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(y,8)),T=g,x=0;x<E.length;x+=8){var P=Math.min(8,E.length-x),w=parseInt(E.substring(x,x+P),y);8>P?(P=h(Math.pow(y,P)),T=T.j(P).add(h(w))):(T=T.j(_),T=T.add(h(w)))}return T}var g=u(0),p=u(1),I=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-M(this).m();for(var E=0,y=1,_=0;_<this.g.length;_++){var T=this.i(_);E+=(0<=T?T:4294967296+T)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R(this))return"0";if(V(this))return"-"+M(this).toString(E);for(var y=h(Math.pow(E,6)),_=this,T="";;){var x=N(_,y).g;_=S(_,x.j(y));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=x,R(_))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function R(E){if(E.h!=0)return!1;for(var y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function V(E){return E.h==-1}t.l=function(E){return E=S(this,E),V(E)?-1:R(E)?0:1};function M(E){for(var y=E.g.length,_=[],T=0;T<y;T++)_[T]=~E.g[T];return new a(_,~E.h).add(p)}t.abs=function(){return V(this)?M(this):this},t.add=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],T=0,x=0;x<=y;x++){var P=T+(this.i(x)&65535)+(E.i(x)&65535),w=(P>>>16)+(this.i(x)>>>16)+(E.i(x)>>>16);T=w>>>16,P&=65535,w&=65535,_[x]=w<<16|P}return new a(_,_[_.length-1]&-2147483648?-1:0)};function S(E,y){return E.add(M(y))}t.j=function(E){if(R(this)||R(E))return g;if(V(this))return V(E)?M(this).j(M(E)):M(M(this).j(E));if(V(E))return M(this.j(M(E)));if(0>this.l(I)&&0>E.l(I))return h(this.m()*E.m());for(var y=this.g.length+E.g.length,_=[],T=0;T<2*y;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var x=0;x<E.g.length;x++){var P=this.i(T)>>>16,w=this.i(T)&65535,Ve=E.i(x)>>>16,Je=E.i(x)&65535;_[2*T+2*x]+=w*Je,v(_,2*T+2*x),_[2*T+2*x+1]+=P*Je,v(_,2*T+2*x+1),_[2*T+2*x+1]+=w*Ve,v(_,2*T+2*x+1),_[2*T+2*x+2]+=P*Ve,v(_,2*T+2*x+2)}for(T=0;T<y;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=y;T<2*y;T++)_[T]=0;return new a(_,0)};function v(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function A(E,y){this.g=E,this.h=y}function N(E,y){if(R(y))throw Error("division by zero");if(R(E))return new A(g,g);if(V(E))return y=N(M(E),y),new A(M(y.g),M(y.h));if(V(y))return y=N(E,M(y)),new A(M(y.g),y.h);if(30<E.g.length){if(V(E)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var _=p,T=y;0>=T.l(E);)_=j(_),T=j(T);var x=F(_,1),P=F(T,1);for(T=F(T,2),_=F(_,2);!R(T);){var w=P.add(T);0>=w.l(E)&&(x=x.add(_),P=w),T=F(T,1),_=F(_,1)}return y=S(E,x.j(y)),new A(x,y)}for(x=g;0<=E.l(y);){for(_=Math.max(1,Math.floor(E.m()/y.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=h(_),w=P.j(y);V(w)||0<w.l(E);)_-=T,P=h(_),w=P.j(y);R(P)&&(P=p),x=x.add(P),E=S(E,w)}return new A(x,E)}t.A=function(E){return N(this,E).h},t.and=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)&E.i(T);return new a(_,this.h&E.h)},t.or=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)|E.i(T);return new a(_,this.h|E.h)},t.xor=function(E){for(var y=Math.max(this.g.length,E.g.length),_=[],T=0;T<y;T++)_[T]=this.i(T)^E.i(T);return new a(_,this.h^E.h)};function j(E){for(var y=E.g.length+1,_=[],T=0;T<y;T++)_[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(_,E.h)}function F(E,y){var _=y>>5;y%=32;for(var T=E.g.length-_,x=[],P=0;P<T;P++)x[P]=0<y?E.i(P+_)>>>y|E.i(P+_+1)<<32-y:E.i(P+_);return new a(x,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_v=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Jn=a}).apply(typeof Gp<"u"?Gp:typeof self<"u"?self:typeof window<"u"?window:{});var Qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ev,hs,wv,ca,Mc,Tv,Sv,Iv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qo=="object"&&Qo];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var k=o[m];if(!(k in f))break e;f=f[k]}o=o[o.length-1],m=f[o],c=c(m),c!=m&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,m=!1,k={next:function(){if(!m&&f<o.length){var D=f++;return{value:c(D,o[D]),done:!1}}return m=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,m),o.apply(c,k)}}return function(){return o.apply(c,arguments)}}function p(o,c,f){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,p.apply(null,arguments)}function I(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function R(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,k,D){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return c.prototype[k].apply(m,z)}}function V(o){const c=o.length;if(0<c){const f=Array(c);for(let m=0;m<c;m++)f[m]=o[m];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(u(m)){const k=o.length||0,D=m.length||0;o.length=k+D;for(let z=0;z<D;z++)o[k+z]=m[z]}else o.push(m)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function v(o){return/^[\s\xa0]*$/.test(o)}function A(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function N(o){return N[" "](o),o}N[" "]=function(){};var j=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function F(o,c,f){for(const m in o)c.call(f,o[m],m,o)}function E(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function y(o){const c={};for(const f in o)c[f]=o[f];return c}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,c){let f,m;for(let k=1;k<arguments.length;k++){m=arguments[k];for(f in m)o[f]=m[f];for(let D=0;D<_.length;D++)f=_[D],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function x(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function P(o){l.setTimeout(()=>{throw o},0)}function w(){var o=Q;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ve{constructor(){this.h=this.g=null}add(c,f){const m=Je.get();m.set(c,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Je=new S(()=>new Oe,o=>o.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ot,U=!1,Q=new Ve,Y=()=>{const o=l.Promise.resolve(void 0);Ot=()=>{o.then(pe)}};var pe=()=>{for(var o;o=w();){try{o.h.call(o.g)}catch(f){P(f)}var c=Je;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}U=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Bt(o,c){if(we.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(j){e:{try{N(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:$t[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Bt.aa.h.call(this)}}R(Bt,we);var $t={2:"touch",3:"pen",4:"mouse"};Bt.prototype.h=function(){Bt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ht="closure_listenable_"+(1e6*Math.random()|0),re=0;function ue(o,c,f,m,k){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!m,this.ha=k,this.key=++re,this.da=this.fa=!1}function he(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function oe(o){this.src=o,this.g={},this.h=0}oe.prototype.add=function(o,c,f,m,k){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var z=He(o,c,m,k);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new ue(c,this.src,D,!!m,k),c.fa=f,o.push(c)),c};function fe(o,c){var f=c.type;if(f in o.g){var m=o.g[f],k=Array.prototype.indexOf.call(m,c,void 0),D;(D=0<=k)&&Array.prototype.splice.call(m,k,1),D&&(he(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function He(o,c,f,m){for(var k=0;k<o.length;++k){var D=o[k];if(!D.da&&D.listener==c&&D.capture==!!f&&D.ha==m)return k}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),Me={};function ct(o,c,f,m,k){if(Array.isArray(c)){for(var D=0;D<c.length;D++)ct(o,c[D],f,m,k);return null}return f=Pf(f),o&&o[Ht]?o.K(c,f,h(m)?!!m.capture:!1,k):yt(o,c,f,!1,m,k)}function yt(o,c,f,m,k,D){if(!c)throw Error("Invalid event type");var z=h(k)?!!k.capture:!!k,de=pr(o);if(de||(o[Ze]=de=new oe(o)),f=de.add(c,f,m,z,D),f.proxy)return f;if(m=Wt(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)Mt||(k=z),k===void 0&&(k=!1),o.addEventListener(c.toString(),m,k);else if(o.attachEvent)o.attachEvent(qt(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Wt(){function o(f){return c.call(o.src,o.listener,f)}const c=kn;return o}function tn(o,c,f,m,k){if(Array.isArray(c))for(var D=0;D<c.length;D++)tn(o,c[D],f,m,k);else m=h(m)?!!m.capture:!!m,f=Pf(f),o&&o[Ht]?(o=o.i,c=String(c).toString(),c in o.g&&(D=o.g[c],f=He(D,f,m,k),-1<f&&(he(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete o.g[c],o.h--)))):o&&(o=pr(o))&&(c=o.g[c.toString()],o=-1,c&&(o=He(c,f,m,k)),(f=-1<o?c[o]:null)&&me(f))}function me(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ht])fe(c.i,o);else{var f=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(f,m,o.capture):c.detachEvent?c.detachEvent(qt(f),m):c.addListener&&c.removeListener&&c.removeListener(m),(f=pr(c))?(fe(f,o),f.h==0&&(f.src=null,c[Ze]=null)):he(o)}}}function qt(o){return o in Me?Me[o]:Me[o]="on"+o}function kn(o,c){if(o.da)o=!0;else{c=new Bt(c,this);var f=o.listener,m=o.ha||o.src;o.fa&&me(o),o=f.call(m,c)}return o}function pr(o){return o=o[Ze],o instanceof oe?o:null}var jr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pf(o){return typeof o=="function"?o:(o[jr]||(o[jr]=function(c){return o.handleEvent(c)}),o[jr])}function et(){le.call(this),this.i=new oe(this),this.M=this,this.F=null}R(et,le),et.prototype[Ht]=!0,et.prototype.removeEventListener=function(o,c,f,m){tn(this,o,c,f,m)};function ht(o,c){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new we(c,o);else if(c instanceof we)c.target=c.target||o;else{var k=c;c=new we(m,o),T(c,k)}if(k=!0,f)for(var D=f.length-1;0<=D;D--){var z=c.g=f[D];k=ho(z,m,!0,c)&&k}if(z=c.g=o,k=ho(z,m,!0,c)&&k,k=ho(z,m,!1,c)&&k,f)for(D=0;D<f.length;D++)z=c.g=f[D],k=ho(z,m,!1,c)&&k}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],m=0;m<f.length;m++)he(f[m]);delete o.g[c],o.h--}}this.F=null},et.prototype.K=function(o,c,f,m){return this.i.add(String(o),c,!1,f,m)},et.prototype.L=function(o,c,f,m){return this.i.add(String(o),c,!0,f,m)};function ho(o,c,f,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,D=0;D<c.length;++D){var z=c[D];if(z&&!z.da&&z.capture==f){var de=z.listener,We=z.ha||z.src;z.fa&&fe(o.i,z),k=de.call(We,m)!==!1&&k}}return k&&!m.defaultPrevented}function kf(o,c,f){if(typeof o=="function")f&&(o=p(o,f));else if(o&&typeof o.handleEvent=="function")o=p(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Vf(o){o.g=kf(()=>{o.g=null,o.i&&(o.i=!1,Vf(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class e0 extends le{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Vf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(o){le.call(this),this.h=o,this.g={}}R(ji,le);var Df=[];function Nf(o){F(o.g,function(c,f){this.g.hasOwnProperty(f)&&me(c)},o),o.g={}}ji.prototype.N=function(){ji.aa.N.call(this),Nf(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fl=l.JSON.stringify,t0=l.JSON.parse,n0=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function jl(){}jl.prototype.h=null;function Of(o){return o.h||(o.h=o.i())}function Mf(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zl(){we.call(this,"d")}R(zl,we);function Ul(){we.call(this,"c")}R(Ul,we);var mr={},Lf=null;function fo(){return Lf=Lf||new et}mr.La="serverreachability";function bf(o){we.call(this,mr.La,o)}R(bf,we);function Ui(o){const c=fo();ht(c,new bf(c))}mr.STAT_EVENT="statevent";function Ff(o,c){we.call(this,mr.STAT_EVENT,o),this.stat=c}R(Ff,we);function ft(o){const c=fo();ht(c,new Ff(c,o))}mr.Ma="timingevent";function jf(o,c){we.call(this,mr.Ma,o),this.size=c}R(jf,we);function Bi(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function $i(){this.g=!0}$i.prototype.xa=function(){this.g=!1};function r0(o,c,f,m,k,D){o.info(function(){if(o.g)if(D)for(var z="",de=D.split("&"),We=0;We<de.length;We++){var se=de[We].split("=");if(1<se.length){var tt=se[0];se=se[1];var nt=tt.split("_");z=2<=nt.length&&nt[1]=="type"?z+(tt+"="+se+"&"):z+(tt+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+m+") [attempt "+k+"]: "+c+`
`+f+`
`+z})}function i0(o,c,f,m,k,D,z){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+k+"]: "+c+`
`+f+`
`+D+" "+z})}function zr(o,c,f,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+o0(o,f)+(m?" "+m:"")})}function s0(o,c){o.info(function(){return"TIMEOUT: "+c})}$i.prototype.info=function(){};function o0(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var k=m[1];if(Array.isArray(k)&&!(1>k.length)){var D=k[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<k.length;z++)k[z]=""}}}}return Fl(f)}catch{return c}}var po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bl;function mo(){}R(mo,jl),mo.prototype.g=function(){return new XMLHttpRequest},mo.prototype.i=function(){return{}},Bl=new mo;function Vn(o,c,f,m){this.j=o,this.i=c,this.l=f,this.R=m||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uf}function Uf(){this.i=null,this.g="",this.h=!1}var Bf={},$l={};function Hl(o,c,f){o.L=1,o.v=_o(mn(c)),o.m=f,o.P=!0,$f(o,null)}function $f(o,c){o.F=Date.now(),go(o),o.A=mn(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),rd(f.i,"t",m),o.C=0,f=o.j.J,o.h=new Uf,o.g=wd(o.j,f?c:null,!o.m),0<o.O&&(o.M=new e0(p(o.Y,o,o.g),o.O)),c=o.U,f=o.g,m=o.ca;var k="readystatechange";Array.isArray(k)||(k&&(Df[0]=k.toString()),k=Df);for(var D=0;D<k.length;D++){var z=ct(f,k[D],m||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ui(),r0(o.i,o.u,o.A,o.l,o.R,o.m)}Vn.prototype.ca=function(o){o=o.target;const c=this.M;c&&gn(o)==3?c.j():this.Y(o)},Vn.prototype.Y=function(o){try{if(o==this.g)e:{const nt=gn(this.g);var c=this.g.Ba();const $r=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||cd(this.g)))){this.J||nt!=4||c==7||(c==8||0>=$r?Ui(3):Ui(2)),Wl(this);var f=this.g.Z();this.X=f;t:if(Hf(this)){var m=cd(this.g);o="";var k=m.length,D=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),Hi(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(D&&c==k-1)});m.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,i0(this.i,this.u,this.A,this.l,this.R,nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var de,We=this.g;if((de=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(de)){var se=de;break t}}se=null}if(f=se)zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,f);else{this.o=!1,this.s=3,ft(12),gr(this),Hi(this);break e}}if(this.P){f=!0;let Qt;for(;!this.J&&this.C<z.length;)if(Qt=a0(this,z),Qt==$l){nt==4&&(this.s=4,ft(14),f=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Bf){this.s=4,ft(15),zr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else zr(this.i,this.l,Qt,null),ql(this,Qt);if(Hf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||z.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)zr(this.i,this.l,z,"[Invalid Chunked Response]"),gr(this),Hi(this);else if(0<z.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Jl(tt),tt.M=!0,ft(11))}}else zr(this.i,this.l,z,null),ql(this,z);nt==4&&gr(this),this.o&&!this.J&&(nt==4?yd(this.j,this):(this.o=!1,go(this)))}else I0(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),gr(this),Hi(this)}}}catch{}finally{}};function Hf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function a0(o,c){var f=o.C,m=c.indexOf(`
`,f);return m==-1?$l:(f=Number(c.substring(f,m)),isNaN(f)?Bf:(m+=1,m+f>c.length?$l:(c=c.slice(m,m+f),o.C=m+f,c)))}Vn.prototype.cancel=function(){this.J=!0,gr(this)};function go(o){o.S=Date.now()+o.I,Wf(o,o.I)}function Wf(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Bi(p(o.ba,o),c)}function Wl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Vn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(s0(this.i,this.A),this.L!=2&&(Ui(),ft(17)),gr(this),this.s=2,Hi(this)):Wf(this,this.S-o)};function Hi(o){o.j.G==0||o.J||yd(o.j,o)}function gr(o){Wl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Nf(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function ql(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||Ql(f.h,o))){if(!o.K&&Ql(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var k=m;if(k[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Ao(f),So(f);else break e;Xl(f),ft(18)}}else f.za=k[1],0<f.za-f.T&&37500>k[2]&&f.F&&f.v==0&&!f.C&&(f.C=Bi(p(f.Za,f),6e3));if(1>=Kf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else vr(f,11)}else if((o.K||f.g==o)&&Ao(f),!v(c))for(k=f.Da.g.parse(c),c=0;c<k.length;c++){let se=k[c];if(f.T=se[0],se=se[1],f.G==2)if(se[0]=="c"){f.K=se[1],f.ia=se[2];const tt=se[3];tt!=null&&(f.la=tt,f.j.info("VER="+f.la));const nt=se[4];nt!=null&&(f.Aa=nt,f.j.info("SVER="+f.Aa));const $r=se[5];$r!=null&&typeof $r=="number"&&0<$r&&(m=1.5*$r,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Qt=o.g;if(Qt){const xo=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var D=m.h;D.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Kl(D,D.h),D.h=null))}if(m.D){const Zl=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zl&&(m.ya=Zl,ye(m.I,m.D,Zl))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var z=o;if(m.qa=Ed(m,m.J?m.ia:null,m.W),z.K){Gf(m.h,z);var de=z,We=m.L;We&&(de.I=We),de.B&&(Wl(de),go(de)),m.g=z}else md(m);0<f.i.length&&Io(f)}else se[0]!="stop"&&se[0]!="close"||vr(f,7);else f.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?vr(f,7):Yl(f):se[0]!="noop"&&f.l&&f.l.ta(se),f.v=0)}}Ui(4)}catch{}}var l0=class{constructor(o,c){this.g=o,this.map=c}};function qf(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Kf(o){return o.h?1:o.g?o.g.size:0}function Ql(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Kl(o,c){o.g?o.g.add(c):o.h=c}function Gf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}qf.prototype.cancel=function(){if(this.i=Yf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Yf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return V(o.i)}function u0(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,m=0;m<f;m++)c.push(o[m]);return c}c=[],f=0;for(m in o)c[f++]=o[m];return c}function c0(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const m in o)c[f++]=m;return c}}}function Xf(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=c0(o),m=u0(o),k=m.length,D=0;D<k;D++)c.call(void 0,m[D],f&&f[D],o)}var Jf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h0(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),k=null;if(0<=m){var D=o[f].substring(0,m);k=o[f].substring(m+1)}else D=o[f];c(D,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function yr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof yr){this.h=o.h,yo(this,o.j),this.o=o.o,this.g=o.g,vo(this,o.s),this.l=o.l;var c=o.i,f=new Qi;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Zf(this,f),this.m=o.m}else o&&(c=String(o).match(Jf))?(this.h=!1,yo(this,c[1]||"",!0),this.o=Wi(c[2]||""),this.g=Wi(c[3]||"",!0),vo(this,c[4]),this.l=Wi(c[5]||"",!0),Zf(this,c[6]||"",!0),this.m=Wi(c[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}yr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(qi(c,ed,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(qi(c,ed,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(qi(f,f.charAt(0)=="/"?p0:d0,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",qi(f,g0)),o.join("")};function mn(o){return new yr(o)}function yo(o,c,f){o.j=f?Wi(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function vo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Zf(o,c,f){c instanceof Qi?(o.i=c,y0(o.i,o.h)):(f||(c=qi(c,m0)),o.i=new Qi(c,o.h))}function ye(o,c,f){o.i.set(c,f)}function _o(o){return ye(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Wi(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function qi(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,f0),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function f0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ed=/[#\/\?@]/g,d0=/[#\?:]/g,p0=/[#\?]/g,m0=/[#\?@]/g,g0=/#/g;function Qi(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Dn(o){o.g||(o.g=new Map,o.h=0,o.i&&h0(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=Qi.prototype,t.add=function(o,c){Dn(this),this.i=null,o=Ur(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function td(o,c){Dn(o),c=Ur(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function nd(o,c){return Dn(o),c=Ur(o,c),o.g.has(c)}t.forEach=function(o,c){Dn(this),this.g.forEach(function(f,m){f.forEach(function(k){o.call(c,k,m,this)},this)},this)},t.na=function(){Dn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let m=0;m<c.length;m++){const k=o[m];for(let D=0;D<k.length;D++)f.push(c[m])}return f},t.V=function(o){Dn(this);let c=[];if(typeof o=="string")nd(this,o)&&(c=c.concat(this.g.get(Ur(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return Dn(this),this.i=null,o=Ur(this,o),nd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function rd(o,c,f){td(o,c),0<f.length&&(o.i=null,o.g.set(Ur(o,c),V(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var m=c[f];const D=encodeURIComponent(String(m)),z=this.V(m);for(m=0;m<z.length;m++){var k=D;z[m]!==""&&(k+="="+encodeURIComponent(String(z[m]))),o.push(k)}}return this.i=o.join("&")};function Ur(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function y0(o,c){c&&!o.j&&(Dn(o),o.i=null,o.g.forEach(function(f,m){var k=m.toLowerCase();m!=k&&(td(this,m),rd(this,k,f))},o)),o.j=c}function v0(o,c){const f=new $i;if(l.Image){const m=new Image;m.onload=I(Nn,f,"TestLoadImage: loaded",!0,c,m),m.onerror=I(Nn,f,"TestLoadImage: error",!1,c,m),m.onabort=I(Nn,f,"TestLoadImage: abort",!1,c,m),m.ontimeout=I(Nn,f,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function _0(o,c){const f=new $i,m=new AbortController,k=setTimeout(()=>{m.abort(),Nn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(D=>{clearTimeout(k),D.ok?Nn(f,"TestPingServer: ok",!0,c):Nn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Nn(f,"TestPingServer: error",!1,c)})}function Nn(o,c,f,m,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),m(f)}catch{}}function E0(){this.g=new n0}function w0(o,c,f){const m=f||"";try{Xf(o,function(k,D){let z=k;h(k)&&(z=Fl(k)),c.push(m+D+"="+encodeURIComponent(z))})}catch(k){throw c.push(m+"type="+encodeURIComponent("_badmap")),k}}function Eo(o){this.l=o.Ub||null,this.j=o.eb||!1}R(Eo,jl),Eo.prototype.g=function(){return new wo(this.l,this.j)},Eo.prototype.i=function(o){return function(){return o}}({});function wo(o,c){et.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(wo,et),t=wo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Gi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ki(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;id(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function id(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ki(this):Gi(this),this.readyState==3&&id(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ki(this))},t.Qa=function(o){this.g&&(this.response=o,Ki(this))},t.ga=function(){this.g&&Ki(this)};function Ki(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Gi(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Gi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function sd(o){let c="";return F(o,function(f,m){c+=m,c+=":",c+=f,c+=`\r
`}),c}function Gl(o,c,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=sd(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):ye(o,c,f))}function Ce(o){et.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ce,et);var T0=/^https?$/i,S0=["POST","PUT"];t=Ce.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bl.g(),this.v=this.o?Of(this.o):Of(Bl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(D){od(this,D);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var k in m)f.set(k,m[k]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())f.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),k=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(S0,c,void 0))||m||k||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of f)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ud(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){od(this,D)}};function od(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,ad(o),To(o)}function ad(o){o.A||(o.A=!0,ht(o,"complete"),ht(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ht(this,"complete"),ht(this,"abort"),To(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),To(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ld(this):this.bb())},t.bb=function(){ld(this)};function ld(o){if(o.h&&typeof a<"u"&&(!o.v[1]||gn(o)!=4||o.Z()!=2)){if(o.u&&gn(o)==4)kf(o.Ea,0,o);else if(ht(o,"readystatechange"),gn(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var m;if(m=z===0){var k=String(o.D).match(Jf)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),m=!T0.test(k?k.toLowerCase():"")}f=m}if(f)ht(o,"complete"),ht(o,"success");else{o.m=6;try{var D=2<gn(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",ad(o)}}finally{To(o)}}}}function To(o,c){if(o.g){ud(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ht(o,"ready");try{f.onreadystatechange=m}catch{}}}function ud(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function gn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),t0(c)}};function cd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function I0(o){const c={};o=(o.g&&2<=gn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(v(o[m]))continue;var f=x(o[m]);const k=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=c[k]||[];c[k]=D,D.push(f)}E(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function hd(o){this.Aa=0,this.i=[],this.j=new $i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yi("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yi("baseRetryDelayMs",5e3,o),this.cb=Yi("retryDelaySeedMs",1e4,o),this.Wa=Yi("forwardChannelMaxRetries",2,o),this.wa=Yi("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new qf(o&&o.concurrentRequestLimit),this.Da=new E0,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hd.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,m){ft(0),this.W=o,this.H=c||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Ed(this,null,this.W),Io(this)};function Yl(o){if(fd(o),o.G==3){var c=o.U++,f=mn(o.I);if(ye(f,"SID",o.K),ye(f,"RID",c),ye(f,"TYPE","terminate"),Xi(o,f),c=new Vn(o,o.j,c),c.L=2,c.v=_o(mn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=wd(c.j,null),c.g.ea(c.v)),c.F=Date.now(),go(c)}_d(o)}function So(o){o.g&&(Jl(o),o.g.cancel(),o.g=null)}function fd(o){So(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ao(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Io(o){if(!Qf(o.h)&&!o.s){o.s=!0;var c=o.Ga;Ot||Y(),U||(Ot(),U=!0),Q.add(c,o),o.B=0}}function A0(o,c){return Kf(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Bi(p(o.Ga,o,c),vd(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const k=new Vn(this,this.j,o);let D=this.o;if(this.S&&(D?(D=y(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(k.H=D,D=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=pd(this,k,c),f=mn(this.I),ye(f,"RID",o),ye(f,"CVER",22),this.D&&ye(f,"X-HTTP-Session-Id",this.D),Xi(this,f),D&&(this.O?c="headers="+encodeURIComponent(String(sd(D)))+"&"+c:this.m&&Gl(f,this.m,D)),Kl(this.h,k),this.Ua&&ye(f,"TYPE","init"),this.P?(ye(f,"$req",c),ye(f,"SID","null"),k.T=!0,Hl(k,f,null)):Hl(k,f,c),this.G=2}}else this.G==3&&(o?dd(this,o):this.i.length==0||Qf(this.h)||dd(this))};function dd(o,c){var f;c?f=c.l:f=o.U++;const m=mn(o.I);ye(m,"SID",o.K),ye(m,"RID",f),ye(m,"AID",o.T),Xi(o,m),o.m&&o.o&&Gl(m,o.m,o.o),f=new Vn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=pd(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Kl(o.h,f),Hl(f,m,c)}function Xi(o,c){o.H&&F(o.H,function(f,m){ye(c,m,f)}),o.l&&Xf({},function(f,m){ye(c,m,f)})}function pd(o,c,f){f=Math.min(o.i.length,f);var m=o.l?p(o.l.Na,o.l,o):null;e:{var k=o.i;let D=-1;for(;;){const z=["count="+f];D==-1?0<f?(D=k[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let de=!0;for(let We=0;We<f;We++){let se=k[We].g;const tt=k[We].map;if(se-=D,0>se)D=Math.max(0,k[We].g-100),de=!1;else try{w0(tt,z,"req"+se+"_")}catch{m&&m(tt)}}if(de){m=z.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,m}function md(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;Ot||Y(),U||(Ot(),U=!0),Q.add(c,o),o.v=0}}function Xl(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Bi(p(o.Fa,o),vd(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,gd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Bi(p(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),So(this),gd(this))};function Jl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function gd(o){o.g=new Vn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=mn(o.qa);ye(c,"RID","rpc"),ye(c,"SID",o.K),ye(c,"AID",o.T),ye(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&ye(c,"TO",o.ja),ye(c,"TYPE","xmlhttp"),Xi(o,c),o.m&&o.o&&Gl(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=_o(mn(c)),f.m=null,f.P=!0,$f(f,o)}t.Za=function(){this.C!=null&&(this.C=null,So(this),Xl(this),ft(19))};function Ao(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function yd(o,c){var f=null;if(o.g==c){Ao(o),Jl(o),o.g=null;var m=2}else if(Ql(o.h,c))f=c.D,Gf(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var k=o.B;m=fo(),ht(m,new jf(m,f)),Io(o)}else md(o);else if(k=c.s,k==3||k==0&&0<c.X||!(m==1&&A0(o,c)||m==2&&Xl(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),k){case 1:vr(o,5);break;case 4:vr(o,10);break;case 3:vr(o,6);break;default:vr(o,2)}}}function vd(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function vr(o,c){if(o.j.info("Error code "+c),c==2){var f=p(o.fb,o),m=o.Xa;const k=!m;m=new yr(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||yo(m,"https"),_o(m),k?v0(m.toString(),f):_0(m.toString(),f)}else ft(2);o.G=0,o.l&&o.l.sa(c),_d(o),fd(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function _d(o){if(o.G=0,o.ka=[],o.l){const c=Yf(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,V(o.i),o.i.length=0),o.l.ra()}}function Ed(o,c,f){var m=f instanceof yr?mn(f):new yr(f);if(m.g!="")c&&(m.g=c+"."+m.g),vo(m,m.s);else{var k=l.location;m=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var D=new yr(null);m&&yo(D,m),c&&(D.g=c),k&&vo(D,k),f&&(D.l=f),m=D}return f=o.D,c=o.ya,f&&c&&ye(m,f,c),ye(m,"VER",o.la),Xi(o,m),m}function wd(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ce(new Eo({eb:f})):new Ce(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Td(){}t=Td.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Co(){}Co.prototype.g=function(o,c){return new Ct(o,c)};function Ct(o,c){et.call(this),this.g=new hd(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!v(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!v(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Br(this)}R(Ct,et),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Yl(this.g)},Ct.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Fl(o),o=f);c.i.push(new l0(c.Ya++,o)),c.G==3&&Io(c)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,Ct.aa.N.call(this)};function Sd(o){zl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}R(Sd,zl);function Id(){Ul.call(this),this.status=1}R(Id,Ul);function Br(o){this.g=o}R(Br,Td),Br.prototype.ua=function(){ht(this.g,"a")},Br.prototype.ta=function(o){ht(this.g,new Sd(o))},Br.prototype.sa=function(o){ht(this.g,new Id)},Br.prototype.ra=function(){ht(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,Iv=function(){return new Co},Sv=function(){return fo()},Tv=mr,Mc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,ca=po,zf.COMPLETE="complete",wv=zf,Mf.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",et.prototype.listen=et.prototype.K,hs=Mf,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Ev=Ce}).apply(typeof Qo<"u"?Qo:typeof self<"u"?self:typeof window<"u"?window:{});const Yp="@firebase/firestore",Xp="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new dv("@firebase/firestore");function Wr(){return Nr.logLevel}function B(t,...e){if(Nr.logLevel<=ne.DEBUG){const n=e.map(Xh);Nr.debug(`Firestore (${Mi}): ${t}`,...n)}}function xn(t,...e){if(Nr.logLevel<=ne.ERROR){const n=e.map(Xh);Nr.error(`Firestore (${Mi}): ${t}`,...n)}}function Ti(t,...e){if(Nr.logLevel<=ne.WARN){const n=e.map(Xh);Nr.warn(`Firestore (${Mi}): ${t}`,...n)}}function Xh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Av(t,r,n)}function Av(t,e,n){let r=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xn(r),new Error(r)}function ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Av(e,i,r)}function G(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}}class XT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JT{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new Cv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new ot(e)}}class ZT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,NT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=nS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function J(t,e){return t<e?-1:t>e?1:0}function Lc(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return J(r,i);{const s=xv(),a=rS(s.encode(Zp(t,n)),s.encode(Zp(e,n)));return a!==0?a:J(r,i)}}n+=r>65535?2:1}return J(t.length,e.length)}function Zp(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function rS(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return J(t[n],e[n]);return J(t.length,e.length)}function Si(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=-62135596800,tm=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tm);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<em)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tm}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-em;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{static fromTimestamp(e){return new K(e)}static min(){return new K(new je(0,0))}static max(){return new K(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="__name__";class sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=sn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return J(e.length,n.length)}static compareSegments(e,n){const r=sn.isNumericId(e),i=sn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?sn.extractNumericId(e).compare(sn.extractNumericId(n)):Lc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jn.fromString(e.substring(4,e.length-2))}}class Re extends sn{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const iS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends sn{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return iS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nm}static keyField(){return new Ke([nm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(Re.fromString(e))}static fromName(e){return new W(Re.fromString(e).popFirst(5))}static empty(){return new W(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new Re(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=-1;function sS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new rr(i,W.empty(),e)}function oS(t){return new rr(t.readTime,t.key,Gs)}class rr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rr(K.min(),W.empty(),Gs)}static max(){return new rr(K.max(),W.empty(),Gs)}}function aS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==lS)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{a[h]=d,++l,l===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function cS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}El.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=-1;function wl(t){return t==null}function Ha(t){return t===0&&1/t==-1/0}function hS(t){return typeof t=="number"&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="";function fS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rm(e)),e=dS(t.get(n),e);return rm(e)}function dS(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Pv:n+="";break;default:n+=s}}return n}function rm(t){return t+Pv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}}class Ko{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=i??Qe.EMPTY,this.right=s??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Qe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Qe.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sm(this.data.getIterator())}getIteratorFrom(e){return new sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class sm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new ze(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Si(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vv("Invalid base64 string: "+s):s}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const pS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=pS.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="server_timestamp",Nv="__type__",Ov="__previous_value__",Mv="__local_write_time__";function Zh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Nv])===null||n===void 0?void 0:n.stringValue)===Dv}function Tl(t){const e=t.mapValue.fields[Ov];return Zh(e)?Tl(e):e}function Ys(t){const e=ir(t.mapValue.fields[Mv].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,i,s,a,l,u,h,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=d}}const Wa="(default)";class Xs{constructor(e,n){this.projectId=e,this.database=n||Wa}static empty(){return new Xs("","")}get isDefaultDatabase(){return this.database===Wa}isEqual(e){return e instanceof Xs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="__type__",gS="__max__",Go={mapValue:{}},bv="__vector__",qa="value";function or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zh(t)?4:vS(t)?9007199254740991:yS(t)?10:11:q(28295,{value:t})}function dn(t,e){if(t===e)return!0;const n=or(t);if(n!==or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ys(t).isEqual(Ys(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ir(i.timestampValue),l=ir(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return sr(i.bytesValue).isEqual(sr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Pe(i.geoPointValue.latitude)===Pe(s.geoPointValue.latitude)&&Pe(i.geoPointValue.longitude)===Pe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Pe(i.integerValue)===Pe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Pe(i.doubleValue),l=Pe(s.doubleValue);return a===l?Ha(a)===Ha(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Si(t.arrayValue.values||[],e.arrayValue.values||[],dn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(im(a)!==im(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!dn(a[u],l[u])))return!1;return!0}(t,e);default:return q(52216,{left:t})}}function Js(t,e){return(t.values||[]).find(n=>dn(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=or(t),r=or(e);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Pe(s.integerValue||s.doubleValue),u=Pe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return om(t.timestampValue,e.timestampValue);case 4:return om(Ys(t),Ys(e));case 5:return Lc(t.stringValue,e.stringValue);case 6:return function(s,a){const l=sr(s),u=sr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=J(l[h],u[h]);if(d!==0)return d}return J(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=J(Pe(s.latitude),Pe(a.latitude));return l!==0?l:J(Pe(s.longitude),Pe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return am(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,d;const g=s.fields||{},p=a.fields||{},I=(l=g[qa])===null||l===void 0?void 0:l.arrayValue,R=(u=p[qa])===null||u===void 0?void 0:u.arrayValue,V=J(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((d=R==null?void 0:R.values)===null||d===void 0?void 0:d.length)||0);return V!==0?V:am(I,R)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Go.mapValue&&a===Go.mapValue)return 0;if(s===Go.mapValue)return 1;if(a===Go.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const p=Lc(u[g],d[g]);if(p!==0)return p;const I=Ii(l[u[g]],h[d[g]]);if(I!==0)return I}return J(u.length,d.length)}(t.mapValue,e.mapValue);default:throw q(23264,{Pe:n})}}function om(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=ir(t),r=ir(e),i=J(n.seconds,r.seconds);return i!==0?i:J(n.nanos,r.nanos)}function am(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ii(n[i],r[i]);if(s)return s}return J(n.length,r.length)}function Ai(t){return bc(t)}function bc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${bc(n.fields[a])}`;return i+"}"}(t.mapValue):q(61005,{value:t})}function ha(t){switch(or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tl(t);return e?16+ha(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ha(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return fr(r.fields,(s,a)=>{i+=s.length+ha(a)}),i}(t.mapValue);default:throw q(13486,{value:t})}}function Fc(t){return!!t&&"integerValue"in t}function ef(t){return!!t&&"arrayValue"in t}function lm(t){return!!t&&"nullValue"in t}function um(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fa(t){return!!t&&"mapValue"in t}function yS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lv])===null||n===void 0?void 0:n.stringValue)===bv}function As(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=As(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=As(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=As(n)}setAll(e){let n=Ke.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=As(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Et(As(this.value))}}function Fv(t){const e=[];return fr(t.fields,(n,r)=>{const i=new Ke([n]);if(fa(r)){const s=Fv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new lt(e,0,K.min(),K.min(),K.min(),Et.empty(),0)}static newFoundDocument(e,n,r,i){return new lt(e,1,n,K.min(),r,i,0)}static newNoDocument(e,n){return new lt(e,2,n,K.min(),K.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,K.min(),K.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.position=e,this.inclusive=n}}function cm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=Ii(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n="asc"){this.field=e,this.dir=n}}function _S(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{}class be extends jv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wS(e,n,r):n==="array-contains"?new IS(e,r):n==="in"?new AS(e,r):n==="not-in"?new CS(e,r):n==="array-contains-any"?new xS(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TS(e,r):new SS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ii(n,this.value)):n!==null&&or(this.value)===or(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends jv{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new pn(e,n)}matches(e){return zv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function zv(t){return t.op==="and"}function Uv(t){return ES(t)&&zv(t)}function ES(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function jc(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+Ai(t.value);if(Uv(t))return t.filters.map(e=>jc(e)).join(",");{const e=t.filters.map(n=>jc(n)).join(",");return`${t.op}(${e})`}}function Bv(t,e){return t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.field.isEqual(i.field)&&dn(r.value,i.value)}(t,e):t instanceof pn?function(r,i){return i instanceof pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&Bv(a,i.filters[l]),!0):!1}(t,e):void q(19439)}function $v(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${Ai(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map($v).join(" ,")+"}"}(t):"Filter"}class wS extends be{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class TS extends be{constructor(e,n){super(e,"in",n),this.keys=Hv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class SS extends be{constructor(e,n){super(e,"not-in",n),this.keys=Hv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class IS extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ef(n)&&Js(n.arrayValue,this.value)}}class AS extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Js(this.value.arrayValue,n)}}class CS extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Js(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Js(this.value.arrayValue,n)}}class xS extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ef(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Js(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Ie=null}}function fm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new RS(t,e,n,r,i,s,a)}function tf(t){const e=G(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ai(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ai(r)).join(",")),e.Ie=n}return e.Ie}function nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_S(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Bv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hm(t.startAt,e.startAt)&&hm(t.endAt,e.endAt)}function zc(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function PS(t,e,n,r,i,s,a,l){return new Sl(t,e,n,r,i,s,a,l)}function Il(t){return new Sl(t)}function dm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kS(t){return t.collectionGroup!==null}function Cs(t){const e=G(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ze(Ke.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new Ka(s,r))}),n.has(Ke.keyField().canonicalString())||e.Ee.push(new Ka(Ke.keyField(),r))}return e.Ee}function un(t){const e=G(t);return e.de||(e.de=VS(e,Cs(t))),e.de}function VS(t,e){if(t.limitType==="F")return fm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ka(i.field,s)});const n=t.endAt?new Qa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qa(t.startAt.position,t.startAt.inclusive):null;return fm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uc(t,e,n){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Al(t,e){return nf(un(t),un(e))&&t.limitType===e.limitType}function Wv(t){return`${tf(un(t))}|lt:${t.limitType}`}function qr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$v(i)).join(", ")}]`),wl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ai(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ai(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function Cl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Cs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=cm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Cs(r),i)||r.endAt&&!function(a,l,u){const h=cm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Cs(r),i))}(t,e)}function DS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qv(t){return(e,n)=>{let r=!1;for(const i of Cs(t)){const s=NS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NS(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ii(u,h):q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=new Ae(W.comparator);function Rn(){return OS}const Qv=new Ae(W.comparator);function fs(...t){let e=Qv;for(const n of t)e=e.insert(n.key,n);return e}function Kv(t){let e=Qv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ar(){return xs()}function Gv(){return xs()}function xs(){return new br(t=>t.toString(),(t,e)=>t.isEqual(e))}const MS=new Ae(W.comparator),LS=new ze(W.comparator);function ee(...t){let e=LS;for(const n of t)e=e.add(n);return e}const bS=new ze(J);function FS(){return bS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function Yv(t){return{integerValue:""+t}}function jS(t,e){return hS(e)?Yv(e):rf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this._=void 0}}function zS(t,e,n){return t instanceof Ga?function(i,s){const a={fields:{[Nv]:{stringValue:Dv},[Mv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zh(s)&&(s=Tl(s)),s&&(a.fields[Ov]=s),{mapValue:a}}(n,e):t instanceof Ci?Jv(t,e):t instanceof Zs?Zv(t,e):function(i,s){const a=Xv(i,s),l=pm(a)+pm(i.Re);return Fc(a)&&Fc(i.Re)?Yv(l):rf(i.serializer,l)}(t,e)}function US(t,e,n){return t instanceof Ci?Jv(t,e):t instanceof Zs?Zv(t,e):n}function Xv(t,e){return t instanceof Ya?function(r){return Fc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ga extends xl{}class Ci extends xl{constructor(e){super(),this.elements=e}}function Jv(t,e){const n=e_(e);for(const r of t.elements)n.some(i=>dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zs extends xl{constructor(e){super(),this.elements=e}}function Zv(t,e){let n=e_(e);for(const r of t.elements)n=n.filter(i=>!dn(i,r));return{arrayValue:{values:n}}}class Ya extends xl{constructor(e,n){super(),this.serializer=e,this.Re=n}}function pm(t){return Pe(t.integerValue||t.doubleValue)}function e_(t){return ef(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.field=e,this.transform=n}}function $S(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ci&&i instanceof Ci||r instanceof Zs&&i instanceof Zs?Si(r.elements,i.elements,dn):r instanceof Ya&&i instanceof Ya?dn(r.Re,i.Re):r instanceof Ga&&i instanceof Ga}(t.transform,e.transform)}class HS{constructor(e,n){this.version=e,this.transformResults=n}}class cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function da(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rl{}function t_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new r_(t.key,cn.none()):new oo(t.key,t.data,cn.none());{const n=t.data,r=Et.empty();let i=new ze(Ke.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new dr(t.key,r,new Pt(i.toArray()),cn.none())}}function WS(t,e,n){t instanceof oo?function(i,s,a){const l=i.value.clone(),u=gm(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof dr?function(i,s,a){if(!da(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=gm(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(n_(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Rs(t,e,n,r){return t instanceof oo?function(s,a,l,u){if(!da(s.precondition,a))return l;const h=s.value.clone(),d=ym(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof dr?function(s,a,l,u){if(!da(s.precondition,a))return l;const h=ym(s.fieldTransforms,u,a),d=a.data;return d.setAll(n_(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,a,l){return da(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function qS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Xv(r.transform,i||null);s!=null&&(n===null&&(n=Et.empty()),n.set(r.field,s))}return n||null}function mm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Si(r,i,(s,a)=>$S(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oo extends Rl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dr extends Rl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function n_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gm(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,US(a,l,n[i]))}return r}function ym(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,zS(s,a,e))}return r}class r_ extends Rl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends Rl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Gv();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=t_(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Si(this.mutations,e.mutations,(n,r)=>mm(n,r))&&Si(this.baseMutations,e.baseMutations,(n,r)=>mm(n,r))}}class sf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return MS}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new sf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,te;function XS(t){switch(t){case L.OK:return q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function i_(t){if(t===void 0)return xn("GRPC error has no .code"),L.UNKNOWN;switch(t){case De.OK:return L.OK;case De.CANCELLED:return L.CANCELLED;case De.UNKNOWN:return L.UNKNOWN;case De.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case De.INTERNAL:return L.INTERNAL;case De.UNAVAILABLE:return L.UNAVAILABLE;case De.UNAUTHENTICATED:return L.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case De.NOT_FOUND:return L.NOT_FOUND;case De.ALREADY_EXISTS:return L.ALREADY_EXISTS;case De.PERMISSION_DENIED:return L.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case De.ABORTED:return L.ABORTED;case De.OUT_OF_RANGE:return L.OUT_OF_RANGE;case De.UNIMPLEMENTED:return L.UNIMPLEMENTED;case De.DATA_LOSS:return L.DATA_LOSS;default:return q(39323,{code:t})}}(te=De||(De={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new Jn([4294967295,4294967295],0);function vm(t){const e=xv().encode(t),n=new _v;return n.update(e),new Uint8Array(n.digest())}function _m(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jn([n,r],0),new Jn([i,s],0)]}class of{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ds(`Invalid padding: ${n}`);if(r<0)throw new ds(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ds(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ds(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Jn.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Jn.fromNumber(r)));return i.compare(JS)===1&&(i=new Jn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=vm(e),[r,i]=_m(n);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);if(!this.be(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new of(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;const n=vm(e),[r,i]=_m(n);for(let s=0;s<this.hashCount;s++){const a=this.we(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ds extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pl(K.min(),i,new Ae(J),Rn(),ee())}}class ao{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ao(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class s_{constructor(e,n){this.targetId=e,this.Ce=n}}class o_{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Em{constructor(){this.Fe=0,this.Me=wm(),this.xe=Xe.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ee(),n=ee(),r=ee();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:s})}}),new ao(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=wm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ae(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class ZS{constructor(e){this.ze=e,this.je=new Map,this.He=Rn(),this.Je=Yo(),this.Ye=Yo(),this.Ze=new Ae(J)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const s=i.target;if(zc(s))if(r===0){const a=new W(s.path);this.tt(n,a,lt.newNoDocument(a,K.min()))}else ae(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(e),u=l?this.lt(l,e,a):1;if(u!==0){this.st(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=sr(r).toUint8Array()}catch(u){if(u instanceof Vv)return Ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new of(a,i,s)}catch(u){return Ti(u instanceof ds?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,s,null),i++)}),i}It(e){const n=new Map;this.je.forEach((s,a)=>{const l=this._t(a);if(l){if(s.current&&zc(l.target)){const u=new W(l.target.path);this.Et(u).has(a)||this.dt(a,u)||this.tt(a,u,lt.newNoDocument(u,e))}s.Le&&(n.set(a,s.qe()),s.Qe())}});let r=ee();this.Ye.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.He.forEach((s,a)=>a.setReadTime(e));const i=new Pl(e,n,this.Ze,this.He,r);return this.He=Rn(),this.Je=Yo(),this.Ye=Yo(),this.Ze=new Ae(J),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Em,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ze(J),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ze(J),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Em),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Yo(){return new Ae(W.comparator)}function wm(){return new Ae(W.comparator)}const eI={asc:"ASCENDING",desc:"DESCENDING"},tI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nI={and:"AND",or:"OR"};class rI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bc(t,e){return t.useProto3Json||wl(e)?e:{value:e}}function Xa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iI(t,e){return Xa(t,e.toTimestamp())}function hn(t){return ae(!!t,49232),K.fromTimestamp(function(n){const r=ir(n);return new je(r.seconds,r.nanos)}(t))}function af(t,e){return $c(t,e).canonicalString()}function $c(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function l_(t){const e=Re.fromString(t);return ae(d_(e),10190,{key:e.toString()}),e}function Hc(t,e){return af(t.databaseId,e.path)}function Vu(t,e){const n=l_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(c_(n))}function u_(t,e){return af(t.databaseId,e)}function sI(t){const e=l_(t);return e.length===4?Re.emptyPath():c_(e)}function Wc(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function c_(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Tm(t,e,n){return{name:Hc(t,e),fields:n.value.mapValue.fields}}function oI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:q(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(ae(d===void 0||typeof d=="string",58123),Xe.fromBase64String(d||"")):(ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Xe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const d=h.code===void 0?L.UNKNOWN:i_(h.code);return new H(d,h.message||"")}(a);n=new o_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vu(t,r.document.name),s=hn(r.document.updateTime),a=r.document.createTime?hn(r.document.createTime):K.min(),l=new Et({mapValue:{fields:r.document.fields}}),u=lt.newFoundDocument(i,s,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new pa(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vu(t,r.document),s=r.readTime?hn(r.readTime):K.min(),a=lt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new pa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vu(t,r.document),s=r.removedTargetIds||[];n=new pa([],s,i,null)}else{if(!("filter"in e))return q(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new YS(i,s),l=r.targetId;n=new s_(l,a)}}return n}function aI(t,e){let n;if(e instanceof oo)n={update:Tm(t,e.key,e.value)};else if(e instanceof r_)n={delete:Hc(t,e.key)};else if(e instanceof dr)n={update:Tm(t,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof QS))return q(16599,{ft:e.type});n={verify:Hc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Ga)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ci)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ya)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw q(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q(27497)}(t,e.precondition)),n}function lI(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?hn(i.updateTime):hn(s);return a.isEqual(K.min())&&(a=hn(s)),new HS(a,i.transformResults||[])}(n,e))):[]}function uI(t,e){return{documents:[u_(t,e.path)]}}function cI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=u_(t,i);const s=function(h){if(h.length!==0)return f_(pn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(p){return{field:Qr(p.field),direction:dI(p.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Bc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:i}}function hI(t){let e=sI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(g){const p=h_(g);return p instanceof pn&&Uv(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(R){return new Ka(Kr(R.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(g){let p;return p=typeof g=="object"?g.value:g,wl(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,I=g.values||[];return new Qa(I,p)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const p=!g.before,I=g.values||[];return new Qa(I,p)}(n.endAt)),PS(e,i,a,s,l,"F",u,h)}function fI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kr(n.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kr(n.unaryFilter.field);return be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kr(n.unaryFilter.field);return be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Kr(n.unaryFilter.field);return be.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}}(t):t.fieldFilter!==void 0?function(n){return be.create(Kr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(r=>h_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}}(n.compositeFilter.op))}(t):q(30097,{filter:t})}function dI(t){return eI[t]}function pI(t){return tI[t]}function mI(t){return nI[t]}function Qr(t){return{fieldPath:t.canonicalString()}}function Kr(t){return Ke.fromServerFormat(t.fieldPath)}function f_(t){return t instanceof be?function(n){if(n.op==="=="){if(um(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NAN"}};if(lm(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(um(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NAN"}};if(lm(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qr(n.field),op:pI(n.op),value:n.value}}}(t):t instanceof pn?function(n){const r=n.getFilters().map(i=>f_(i));return r.length===1?r[0]:{compositeFilter:{op:mI(n.op),filters:r}}}(t):q(54877,{filter:t})}function gI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function d_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n,r,i,s=K.min(),a=K.min(),l=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Un(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.wt=e}}function vI(t){const e=hI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.Cn=new EI}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(rr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class EI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p_=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(p_,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new xi(0)}static lr(){return new xi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="LruGarbageCollector",wI=1048576;function Am([t,e],[n,r]){const i=J(t,n);return i===0?J(e,r):i}class TI{constructor(e){this.Er=e,this.buffer=new ze(Am),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Am(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){B(Im,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bi(n)?B(Im,"Ignoring IndexedDB error during garbage collection: ",n):await Li(n)}await this.mr(3e5)})}}class II{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(El.le);const r=new TI(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Sm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sm):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,l=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),Wr()<=ne.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function AI(t,e){return new II(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.changes=new br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Rs(r.mutation,i,Pt.empty(),je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const i=Ar();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=fs();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ar();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Rn();const a=xs(),l=function(){return xs()}();return n.forEach((u,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof dr)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Rs(d.mutation,h,d.mutation.getFieldMask(),je.now())):a.set(h.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var g;return l.set(h,new xI(d,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=xs();let i=new Ae((a,l)=>a-l),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=r.get(u)||Pt.empty();d=l.applyToLocalView(h,d),r.set(u,d);const g=(i.get(l.batchId)||ee()).add(u);i=i.insert(l.batchId,g)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=Gv();d.forEach(p=>{if(!s.has(p)){const I=t_(n.get(p),r.get(p));I!==null&&g.set(p,I),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return W.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Ar());let l=Gs,u=s;return a.next(h=>O.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ee())).next(d=>({batchId:l,changes:Kv(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=fs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=fs();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(g,p){return new Sl(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,lt.newInvalidDocument(d)))});let l=fs();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Rs(d.mutation,h,Pt.empty(),je.now()),Cl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return O.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:vI(i.bundledQuery),readTime:hn(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.overlays=new Ae(W.comparator),this.Qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ar();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Ar(),s=n.length+1,a=new W(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Ar(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Ar(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=i)););return O.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new GS(n,r));let s=this.Qr.get(n);s===void 0&&(s=ee(),this.Qr.set(n,s)),this.Qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.$r=new ze(Ue.Ur),this.Kr=new ze(Ue.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ue(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new W(new Re([])),r=new Ue(n,e),i=new Ue(n,e+1),s=[];return this.Kr.forEachInRange([r,i],a=>{this.zr(a),s.push(a.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new W(new Re([])),r=new Ue(n,e),i=new Ue(n,e+1);let s=ee();return this.Kr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ue(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return W.comparator(e.key,n.key)||J(e.Zr,n.Zr)}static Wr(e,n){return J(e.Zr,n.Zr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ze(Ue.Ur)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new KS(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Xr=this.Xr.add(new Ue(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Jh:this.nr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],a=>{const l=this.ei(a.Zr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(J);return n.forEach(i=>{const s=new Ue(i,0),a=new Ue(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,a],l=>{r=r.add(l.Zr)})}),O.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const a=new Ue(new W(s),0);let l=new ze(J);return this.Xr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Zr)),!0)},a),O.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return O.forEach(n.mutations,i=>{const s=new Ue(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Ue(n,0),i=this.Xr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.ii=e,this.docs=function(){return new Ae(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():lt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rn();const a=n.path,l=new W(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||aS(oS(d),r)<=0||(i.has(d.key)||Cl(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){q(9500)}si(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new OI(this)}getSize(e){return O.resolve(this.size)}}class OI extends CI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.persistence=e,this.oi=new br(n=>tf(n),nf),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this._i=0,this.ai=new lf,this.targetCount=0,this.ui=xi.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),O.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new xi(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Tr(n),O.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n){this.ci={},this.overlays={},this.li=new El(0),this.hi=!1,this.hi=!0,this.Pi=new VI,this.referenceDelegate=e(this),this.Ti=new MI(this),this.indexManager=new _I,this.remoteDocumentCache=function(i){return new NI(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new yI(n),this.Ei=new PI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new DI(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const i=new LI(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,n){return O.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class LI extends uS{constructor(e){super(),this.currentSequenceNumber=e}}class uf{constructor(e){this.persistence=e,this.Vi=new lf,this.mi=null}static fi(e){return new uf(e)}get gi(){if(this.mi)return this.mi;throw q(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.gi,r=>{const i=W.fromPath(r);return this.pi(e,i).next(s=>{s||n.removeEntry(i,K.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return O.or([()=>O.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Ja{constructor(e,n){this.persistence=e,this.yi=new br(r=>fS(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=AI(this,n)}static fi(e,n){return new Ja(e,n)}di(){}Ai(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return O.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,a=>this.Dr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,K.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),O.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ha(e.data.value)),n}Dr(e,n,r){return O.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=ee(),i=ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return kw()?8:cS(Rw())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ws(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.bs(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new bI;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.fs)return this.Ds(e,n,a,l.size)})}).next(()=>s.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(Wr()<=ne.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),O.resolve()):(Wr()<=ne.DEBUG&&B("QueryEngine","Query:",qr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Wr()<=ne.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):O.resolve())}ws(e,n){if(dm(n))return O.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Uc(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ee(...s);return this.ys.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.vs(n,l);return this.Cs(n,h,a,u.readTime)?this.ws(e,Uc(n,null,"F")):this.Fs(e,h,n,u)}))})))}bs(e,n,r,i){return dm(n)||i.isEqual(K.min())?O.resolve(null):this.ys.getDocuments(e,r).next(s=>{const a=this.vs(n,s);return this.Cs(n,a,r,i)?O.resolve(null):(Wr()<=ne.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qr(n)),this.Fs(e,a,n,sS(i,Gs)).next(l=>l))})}vs(e,n){let r=new ze(qv(e));return n.forEach((i,s)=>{Cl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Wr()<=ne.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",qr(n)),this.ys.getDocumentsMatchingQuery(e,n,rr.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf="LocalStore",jI=3e8;class zI{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Ae(J),this.Os=new br(s=>tf(s),nf),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function UI(t,e,n,r){return new zI(t,e,n,r)}async function g_(t,e){const n=G(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=ee();for(const h of i){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(h=>({ks:h,removedBatchIds:a,addedBatchIds:l}))})})}function BI(t,e){const n=G(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,p=g.keys();let I=O.resolve();return p.forEach(R=>{I=I.next(()=>d.getEntry(u,R)).next(V=>{const M=h.docVersions.get(R);ae(M!==null,48541),V.version.compareTo(M)<0&&(g.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),d.addEntry(V)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function y_(t){const e=G(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function $I(t,e){const n=G(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const l=[];e.targetChanges.forEach((d,g)=>{const p=i.get(g);if(!p)return;l.push(n.Ti.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Ti.addMatchingKeys(s,d.addedDocuments,g)));let I=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?I=I.withResumeToken(Xe.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):d.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(d.resumeToken,r)),i=i.insert(g,I),function(V,M,S){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=jI?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,I,d)&&l.push(n.Ti.updateTargetData(s,I))});let u=Rn(),h=ee();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(HI(s,a,e.documentUpdates).next(d=>{u=d.qs,h=d.Qs})),!r.isEqual(K.min())){const d=n.Ti.getLastRemoteSnapshotVersion(s).next(g=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.xs=i,s))}function HI(t,e,n){let r=ee(),i=ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Rn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):B(hf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{qs:a,Qs:i}})}function WI(t,e){const n=G(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Jh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qI(t,e){const n=G(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ti.allocateTargetId(r).next(a=>(i=new Un(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function qc(t,e,n){const r=G(t),i=r.xs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!bi(a))throw a;B(hf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function Cm(t,e,n){const r=G(t);let i=K.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=G(u),p=g.Os.get(d);return p!==void 0?O.resolve(g.xs.get(p)):g.Ti.getTargetData(h,d)}(r,a,un(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(a,e,n?i:K.min(),n?s:ee())).next(l=>(QI(r,DS(e),l),{documents:l,$s:s})))}function QI(t,e,n){let r=t.Ns.get(e)||K.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ns.set(e,r)}class xm{constructor(){this.activeTargetIds=FS()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KI{constructor(){this.xo=new xm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new xm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="ConnectivityMonitor";class Pm{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){B(Rm,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){B(Rm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo=null;function Qc(){return Xo===null?Xo=function(){return 268435456+Math.round(2147483648*Math.random())}():Xo++,"0x"+Xo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XI{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Wa?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,s){const a=Qc(),l=this.jo(e,n.toUriEncodedString());B(Du,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,s);const{host:h}=new URL(l),d=Gh(h);return this.Jo(e,l,u,r,d).then(g=>(B(Du,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Ti(Du,`RPC '${e}' ${a} failed with error: `,g,"url: ",l,"request:",r),g})}Yo(e,n,r,i,s,a){return this.zo(e,n,r,i,s)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,n){const r=YI[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class ZI extends XI{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=Qc();return new Promise((l,u)=>{const h=new Ev;h.setWithCredentials(!0),h.listenOnce(wv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ca.NO_ERROR:const g=h.getResponseJson();B(st,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case ca.TIMEOUT:B(st,`RPC '${e}' ${a} timed out`),u(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:const p=h.getStatus();if(B(st,`RPC '${e}' ${a} failed with status:`,p,"response text:",h.getResponseText()),p>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const R=I==null?void 0:I.error;if(R&&R.status&&R.message){const V=function(S){const v=S.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(R.status);u(new H(V,R.message))}else u(new H(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(L.UNAVAILABLE,"Connection failed."));break;default:q(9055,{h_:e,streamId:a,P_:h.getLastErrorCode(),T_:h.getLastError()})}}finally{B(st,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);B(st,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",d,r,15)})}I_(e,n,r){const i=Qc(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Iv(),l=Sv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");B(st,`Creating RPC '${e}' stream ${i}: ${d}`,u);const g=a.createWebChannel(d,u);this.E_(g);let p=!1,I=!1;const R=new JI({Zo:M=>{I?B(st,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(p||(B(st,`Opening RPC '${e}' stream ${i} transport.`),g.open(),p=!0),B(st,`RPC '${e}' stream ${i} sending:`,M),g.send(M))},Xo:()=>g.close()}),V=(M,S,v)=>{M.listen(S,A=>{try{v(A)}catch(N){setTimeout(()=>{throw N},0)}})};return V(g,hs.EventType.OPEN,()=>{I||(B(st,`RPC '${e}' stream ${i} transport opened.`),R.__())}),V(g,hs.EventType.CLOSE,()=>{I||(I=!0,B(st,`RPC '${e}' stream ${i} transport closed`),R.u_(),this.d_(g))}),V(g,hs.EventType.ERROR,M=>{I||(I=!0,Ti(st,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),R.u_(new H(L.UNAVAILABLE,"The operation could not be completed")))}),V(g,hs.EventType.MESSAGE,M=>{var S;if(!I){const v=M.data[0];ae(!!v,16349);const A=v,N=(A==null?void 0:A.error)||((S=A[0])===null||S===void 0?void 0:S.error);if(N){B(st,`RPC '${e}' stream ${i} received error:`,N);const j=N.status;let F=function(_){const T=De[_];if(T!==void 0)return i_(T)}(j),E=N.message;F===void 0&&(F=L.INTERNAL,E="Unknown error status: "+j+" with message "+N.message),I=!0,R.u_(new H(F,E)),g.close()}else B(st,`RPC '${e}' stream ${i} received:`,v),R.c_(v)}}),V(l,Tv.STAT_EVENT,M=>{M.stat===Mc.PROXY?B(st,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Mc.NOPROXY&&B(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.a_()},0),R}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Nu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){return new rI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="PersistentStream";class __{constructor(e,n,r,i,s,a,l,u){this.xi=e,this.S_=r,this.D_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new v_(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(xn(n.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{const i=new H(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return B(km,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(B(km,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eA extends __{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=oI(this.serializer,e),r=function(s){if(!("targetChange"in s))return K.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?K.min():a.readTime?hn(a.readTime):K.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=Wc(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=zc(u)?{documents:uI(s,u)}:{query:cI(s,u).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=a_(s,a.resumeToken);const h=Bc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(K.min())>0){l.readTime=Xa(s,a.snapshotVersion.toTimestamp());const h=Bc(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=fI(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=Wc(this.serializer),n.removeTarget=e,this.Q_(n)}}class tA extends __{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=lI(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=Wc(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>aI(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class rA extends nA{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.zo(e,$c(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(L.UNKNOWN,s.toString())})}Yo(e,n,r,i,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(e,$c(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H(L.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class iA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(xn(n),this.ua=!1):B("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class sA{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(a=>{r.enqueueAndForget(async()=>{Fr(this)&&(B(Or,"Restarting streams for network reachability change."),await async function(u){const h=G(u);h.da.add(4),await lo(h),h.Va.set("Unknown"),h.da.delete(4),await Vl(h)}(this))})}),this.Va=new iA(r,i)}}async function Vl(t){if(Fr(t))for(const e of t.Aa)await e(!0)}async function lo(t){for(const e of t.Aa)await e(!1)}function E_(t,e){const n=G(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),mf(n)?pf(n):Fi(n).N_()&&df(n,e))}function ff(t,e){const n=G(t),r=Fi(n);n.Ea.delete(e),r.N_()&&w_(n,e),n.Ea.size===0&&(r.N_()?r.k_():Fr(n)&&n.Va.set("Unknown"))}function df(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fi(t).Z_(e)}function w_(t,e){t.ma.Ke(e),Fi(t).X_(e)}function pf(t){t.ma=new ZS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Fi(t).start(),t.Va.ca()}function mf(t){return Fr(t)&&!Fi(t).O_()&&t.Ea.size>0}function Fr(t){return G(t).da.size===0}function T_(t){t.ma=void 0}async function oA(t){t.Va.set("Online")}async function aA(t){t.Ea.forEach((e,n)=>{df(t,e)})}async function lA(t,e){T_(t),mf(t)?(t.Va.Pa(e),pf(t)):t.Va.set("Unknown")}async function uA(t,e,n){if(t.Va.set("Online"),e instanceof o_&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ea.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ea.delete(l),i.ma.removeTarget(l))}(t,e)}catch(r){B(Or,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Za(t,r)}else if(e instanceof pa?t.ma.Xe(e):e instanceof s_?t.ma.ot(e):t.ma.nt(e),!n.isEqual(K.min()))try{const r=await y_(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.ma.It(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ea.get(h);d&&s.Ea.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.Ea.get(u);if(!d)return;s.Ea.set(u,d.withResumeToken(Xe.EMPTY_BYTE_STRING,d.snapshotVersion)),w_(s,u);const g=new Un(d.target,u,h,d.sequenceNumber);df(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){B(Or,"Failed to raise snapshot:",r),await Za(t,r)}}async function Za(t,e,n){if(!bi(e))throw e;t.da.add(1),await lo(t),t.Va.set("Offline"),n||(n=()=>y_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(Or,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Vl(t)})}function S_(t,e){return e().catch(n=>Za(t,n,e))}async function Dl(t){const e=G(t),n=ar(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Jh;for(;cA(e);)try{const i=await WI(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,hA(e,i)}catch(i){await Za(e,i)}I_(e)&&A_(e)}function cA(t){return Fr(t)&&t.Ia.length<10}function hA(t,e){t.Ia.push(e);const n=ar(t);n.N_()&&n.ea&&n.ta(e.mutations)}function I_(t){return Fr(t)&&!ar(t).O_()&&t.Ia.length>0}function A_(t){ar(t).start()}async function fA(t){ar(t).ia()}async function dA(t){const e=ar(t);for(const n of t.Ia)e.ta(n.mutations)}async function pA(t,e,n){const r=t.Ia.shift(),i=sf.from(r,e,n);await S_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Dl(t)}async function mA(t,e){e&&ar(t).ea&&await async function(r,i){if(function(a){return XS(a)&&a!==L.ABORTED}(i.code)){const s=r.Ia.shift();ar(r).L_(),await S_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Dl(r)}}(t,e),I_(t)&&A_(t)}async function Vm(t,e){const n=G(t);n.asyncQueue.verifyOperationInProgress(),B(Or,"RemoteStore received new credentials");const r=Fr(n);n.da.add(3),await lo(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Vl(n)}async function gA(t,e){const n=G(t);e?(n.da.delete(2),await Vl(n)):e||(n.da.add(2),await lo(n),n.Va.set("Unknown"))}function Fi(t){return t.fa||(t.fa=function(n,r,i){const s=G(n);return s.oa(),new eA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:oA.bind(null,t),n_:aA.bind(null,t),i_:lA.bind(null,t),Y_:uA.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),mf(t)?pf(t):t.Va.set("Unknown")):(await t.fa.stop(),T_(t))})),t.fa}function ar(t){return t.ga||(t.ga=function(n,r,i){const s=G(n);return s.oa(),new tA(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:fA.bind(null,t),i_:mA.bind(null,t),na:dA.bind(null,t),ra:pA.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await Dl(t)):(await t.ga.stop(),t.Ia.length>0&&(B(Or,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new gf(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yf(t,e){if(xn("AsyncQueue",`${e}: ${t}`),bi(t))return new H(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{static emptySet(e){return new pi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=fs(),this.sortedSet=new Ae(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.pa=new Ae(W.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):q(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ri{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ri(e,n,pi.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Al(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class vA{constructor(){this.queries=Nm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=G(n),s=i.queries;i.queries=Nm(),s.forEach((a,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new H(L.ABORTED,"Firestore shutting down"))}}function Nm(){return new br(t=>Wv(t),Al)}async function C_(t,e){const n=G(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Da()&&e.va()&&(r=2):(s=new yA,r=e.va()?0:1);try{switch(r){case 0:s.ba=await n.onListen(i,!0);break;case 1:s.ba=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=yf(a,`Initialization of query '${qr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.Fa(n.onlineState),s.ba&&e.Ma(s.ba)&&vf(n)}async function x_(t,e){const n=G(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.va()?0:1:!s.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _A(t,e){const n=G(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Ma(i)&&(r=!0);a.ba=i}}r&&vf(n)}function EA(t,e,n){const r=G(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function vf(t){t.Ca.forEach(e=>{e.next()})}var Kc,Om;(Om=Kc||(Kc={})).xa="default",Om.Cache="cache";class R_{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ri(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Kc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.key=e}}class k_{constructor(e){this.key=e}}class wA{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ee(),this.mutatedKeys=ee(),this.Za=qv(e),this.Xa=new pi(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new Dm,i=n?n.Xa:this.Xa;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,g)=>{const p=i.get(d),I=Cl(this.query,g)?g:null,R=!!p&&this.mutatedKeys.has(p.key),V=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let M=!1;p&&I?p.data.isEqual(I.data)?R!==V&&(r.track({type:3,doc:I}),M=!0):this.ru(p,I)||(r.track({type:2,doc:I}),M=!0,(u&&this.Za(I,u)>0||h&&this.Za(I,h)<0)&&(l=!0)):!p&&I?(r.track({type:0,doc:I}),M=!0):p&&!I&&(r.track({type:1,doc:p}),M=!0,(u||h)&&(l=!0)),M&&(I?(a=a.add(I),s=V?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Xa:a,nu:r,Cs:l,mutatedKeys:s}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const a=e.nu.wa();a.sort((d,g)=>function(I,R){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Vt:M})}};return V(I)-V(R)}(d.type,g.type)||this.Za(d.doc,g.doc)),this.iu(r),i=i!=null&&i;const l=n&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,h=u!==this.Ja;return this.Ja=u,a.length!==0||h?{snapshot:new Ri(this.query,e.Xa,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Dm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ee(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new k_(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new P_(r))}),n}au(e){this.Ha=e.$s,this.Ya=ee();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ri.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const _f="SyncEngine";class TA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SA{constructor(e){this.key=e,this.cu=!1}}class IA{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new br(l=>Wv(l),Al),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ae(W.comparator),this.Eu=new Map,this.du=new lf,this.Au={},this.Ru=new Map,this.Vu=xi.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function AA(t,e,n=!0){const r=L_(t);let i;const s=r.hu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.uu()):i=await V_(r,e,n,!0),i}async function CA(t,e){const n=L_(t);await V_(n,e,!0,!1)}async function V_(t,e,n,r){const i=await qI(t.localStore,un(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await xA(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&E_(t.remoteStore,i),l}async function xA(t,e,n,r,i){t.fu=(g,p,I)=>async function(V,M,S,v){let A=M.view.tu(S);A.Cs&&(A=await Cm(V.localStore,M.query,!1).then(({documents:E})=>M.view.tu(E,A)));const N=v&&v.targetChanges.get(M.targetId),j=v&&v.targetMismatches.get(M.targetId)!=null,F=M.view.applyChanges(A,V.isPrimaryClient,N,j);return Lm(V,M.targetId,F.ou),F.snapshot}(t,g,p,I);const s=await Cm(t.localStore,e,!0),a=new wA(e,s.$s),l=a.tu(s.documents),u=ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Lm(t,n,h.ou);const d=new TA(e,n,a);return t.hu.set(e,d),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),h.snapshot}async function RA(t,e,n){const r=G(t),i=r.hu.get(e),s=r.Pu.get(i.targetId);if(s.length>1)return r.Pu.set(i.targetId,s.filter(a=>!Al(a,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ff(r.remoteStore,i.targetId),Gc(r,i.targetId)}).catch(Li)):(Gc(r,i.targetId),await qc(r.localStore,i.targetId,!0))}async function PA(t,e){const n=G(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ff(n.remoteStore,r.targetId))}async function kA(t,e,n){const r=bA(t);try{const i=await function(a,l){const u=G(a),h=je.now(),d=l.reduce((I,R)=>I.add(R.key),ee());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=Rn(),V=ee();return u.Bs.getEntries(I,d).next(M=>{R=M,R.forEach((S,v)=>{v.isValidDocument()||(V=V.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,R)).next(M=>{g=M;const S=[];for(const v of l){const A=qS(v,g.get(v.key).overlayedDocument);A!=null&&S.push(new dr(v.key,A,Fv(A.value.mapValue),cn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,h,S,l)}).next(M=>{p=M;const S=M.applyToLocalDocumentSet(g,V);return u.documentOverlayCache.saveOverlays(I,M.batchId,S)})}).then(()=>({batchId:p.batchId,changes:Kv(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.Au[a.currentUser.toKey()];h||(h=new Ae(J)),h=h.insert(l,u),a.Au[a.currentUser.toKey()]=h}(r,i.batchId,n),await uo(r,i.changes),await Dl(r.remoteStore)}catch(i){const s=yf(i,"Failed to persist write");n.reject(s)}}async function D_(t,e){const n=G(t);try{const r=await $I(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Eu.get(s);a&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.cu=!0:i.modifiedDocuments.size>0?ae(a.cu,14607):i.removedDocuments.size>0&&(ae(a.cu,42227),a.cu=!1))}),await uo(n,r,e)}catch(r){await Li(r)}}function Mm(t,e,n){const r=G(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.hu.forEach((s,a)=>{const l=a.view.Fa(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=G(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const p of g.Sa)p.Fa(l)&&(h=!0)}),h&&vf(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VA(t,e,n){const r=G(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let a=new Ae(W.comparator);a=a.insert(s,lt.newNoDocument(s,K.min()));const l=ee().add(s),u=new Pl(K.min(),new Map,new Ae(J),a,l);await D_(r,u),r.Iu=r.Iu.remove(s),r.Eu.delete(e),Ef(r)}else await qc(r.localStore,e,!1).then(()=>Gc(r,e,n)).catch(Li)}async function DA(t,e){const n=G(t),r=e.batch.batchId;try{const i=await BI(n.localStore,e);O_(n,r,null),N_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,i)}catch(i){await Li(i)}}async function NA(t,e,n){const r=G(t);try{const i=await function(a,l){const u=G(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ae(g!==null,37113),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(r.localStore,e);O_(r,e,n),N_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,i)}catch(i){await Li(i)}}function N_(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function O_(t,e,n){const r=G(t);let i=r.Au[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function Gc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||M_(t,r)})}function M_(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(ff(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Ef(t))}function Lm(t,e,n){for(const r of n)r instanceof P_?(t.du.addReference(r.key,e),OA(t,r)):r instanceof k_?(B(_f,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||M_(t,r.key)):q(19791,{pu:r})}function OA(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(B(_f,"New document in limbo: "+n),t.Tu.add(r),Ef(t))}function Ef(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new W(Re.fromString(e)),r=t.Vu.next();t.Eu.set(r,new SA(n)),t.Iu=t.Iu.insert(n,r),E_(t.remoteStore,new Un(un(Il(n.path)),r,"TargetPurposeLimboResolution",El.le))}}async function uo(t,e,n){const r=G(t),i=[],s=[],a=[];r.hu.isEmpty()||(r.hu.forEach((l,u)=>{a.push(r.fu(u,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=cf.Rs(u.targetId,h);s.push(g)}}))}),await Promise.all(a),r.lu.Y_(i),await async function(u,h){const d=G(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(h,p=>O.forEach(p.ds,I=>d.persistence.referenceDelegate.addReference(g,p.targetId,I)).next(()=>O.forEach(p.As,I=>d.persistence.referenceDelegate.removeReference(g,p.targetId,I)))))}catch(g){if(!bi(g))throw g;B(hf,"Failed to update sequence numbers: "+g)}for(const g of h){const p=g.targetId;if(!g.fromCache){const I=d.xs.get(p),R=I.snapshotVersion,V=I.withLastLimboFreeSnapshotVersion(R);d.xs=d.xs.insert(p,V)}}}(r.localStore,s))}async function MA(t,e){const n=G(t);if(!n.currentUser.isEqual(e)){B(_f,"User change. New user:",e.toKey());const r=await g_(n.localStore,e);n.currentUser=e,function(s,a){s.Ru.forEach(l=>{l.forEach(u=>{u.reject(new H(L.CANCELLED,a))})}),s.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.ks)}}function LA(t,e){const n=G(t),r=n.Eu.get(e);if(r&&r.cu)return ee().add(r.key);{let i=ee();const s=n.Pu.get(e);if(!s)return i;for(const a of s){const l=n.hu.get(a);i=i.unionWith(l.view.eu)}return i}}function L_(t){const e=G(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=D_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VA.bind(null,e),e.lu.Y_=_A.bind(null,e.eventManager),e.lu.gu=EA.bind(null,e.eventManager),e}function bA(t){const e=G(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NA.bind(null,e),e}class el{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kl(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return UI(this.persistence,new FI,e.initialUser,this.serializer)}Su(e){return new m_(uf.fi,this.serializer)}bu(e){return new KI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}el.provider={build:()=>new el};class FA extends el{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ae(this.persistence.referenceDelegate instanceof Ja,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SI(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new m_(r=>Ja.fi(r,n),this.serializer)}}class Yc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MA.bind(null,this.syncEngine),await gA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vA}()}createDatastore(e){const n=kl(e.databaseInfo.databaseId),r=function(s){return new ZI(s)}(e.databaseInfo);return function(s,a,l,u){return new rA(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new sA(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Mm(this.syncEngine,n,0),function(){return Pm.C()?new Pm:new GI}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,d){const g=new IA(i,s,a,l,u,h);return d&&(g.mu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=G(i);B(Or,"RemoteStore shutting down."),s.da.add(5),await lo(s),s.Ra.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yc.provider={build:()=>new Yc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="FirestoreClient";class jA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Rv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{B(lr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(B(lr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ou(t,e){t.asyncQueue.verifyOperationInProgress(),B(lr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await g_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zA(t);B(lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Vm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Vm(e.remoteStore,i)),t._onlineComponents=e}async function zA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(lr,"Using user provided OfflineComponentProvider");try{await Ou(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ti("Error using user provided cache. Falling back to memory cache: "+n),await Ou(t,new el)}}else B(lr,"Using default OfflineComponentProvider"),await Ou(t,new FA(void 0));return t._offlineComponents}async function F_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(lr,"Using user provided OnlineComponentProvider"),await bm(t,t._uninitializedComponentsProvider._online)):(B(lr,"Using default OnlineComponentProvider"),await bm(t,new Yc))),t._onlineComponents}function UA(t){return F_(t).then(e=>e.syncEngine)}async function Xc(t){const e=await F_(t),n=e.eventManager;return n.onListen=AA.bind(null,e.syncEngine),n.onUnlisten=RA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=PA.bind(null,e.syncEngine),n}function BA(t,e,n={}){const r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new b_({next:p=>{d.xu(),a.enqueueAndForget(()=>x_(s,g));const I=p.docs.has(l);!I&&p.fromCache?h.reject(new H(L.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&p.fromCache&&u&&u.source==="server"?h.reject(new H(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(p)},error:p=>h.reject(p)}),g=new R_(Il(l.path),d,{includeMetadataChanges:!0,Qa:!0});return C_(s,g)}(await Xc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e,n){if(!n)throw new H(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HA(t,e,n,r){if(e===!0&&r===!0)throw new H(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jm(t){if(!W.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wf(t);throw new H(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="firestore.googleapis.com",zm=!0;class Um{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z_,this.ssl=zm}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:zm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wI)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YT;switch(r.type){case"firstParty":return new eS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fm.get(n);r&&(B("ComponentProvider","Removing Datastore"),Fm.delete(n),r.terminate())}(this),Promise.resolve()}}function WA(t,e,n,r={}){var i;t=fn(t,Tf);const s=Gh(e),a=t._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;s&&(Sw(`https://${u}`),xw("Firestore",!0)),a.host!==z_&&a.host!==u&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:u,ssl:s,emulatorOptions:r});if(!qs(h,l)&&(t._setSettings(h),r.mockUserToken)){let d,g;if(typeof r.mockUserToken=="string")d=r.mockUserToken,g=ot.MOCK_USER;else{d=Iw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ot(p)}t._authCredentials=new XT(new Cv(d,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nl(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class eo extends Nl{constructor(e,n,r){super(e,n,Il(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new W(e))}withConverter(e){return new eo(this.firestore,e,this._path)}}function Mu(t,e,...n){if(t=nr(t),arguments.length===1&&(e=Rv.newId()),$A("doc","path",e),t instanceof Tf){const r=Re.fromString(e,...n);return jm(r),new At(t,null,new W(r))}{if(!(t instanceof At||t instanceof eo))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return jm(r),new At(t.firestore,t instanceof eo?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="AsyncQueue";class $m{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new v_(this,"async_queue_retry"),this.rc=()=>{const r=Nu();r&&B(Bm,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Nu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Nu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Zn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!bi(e))throw e;B(Bm,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,xn("INTERNAL UNHANDLED ERROR: ",Hm(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const i=gf.createAndSchedule(this,e,n,r,s=>this.uc(s));return this.Zu.push(i),i}oc(){this.Xu&&q(47125,{cc:Hm(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Hm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pi extends Tf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $m,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $m(e),this._firestoreClient=void 0,await e}}}function qA(t,e){const n=typeof t=="object"?t:bT(),r=typeof t=="string"?t:Wa,i=DT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ww("firestore");s&&WA(i,...s)}return i}function Sf(t){if(t._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||QA(t),t._firestoreClient}function QA(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,d){return new mS(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,j_(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new jA(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(Xe.fromBase64String(e))}catch(n){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ki(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=/^__.*__$/;class GA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oo(e,this.data,n,this.fieldTransforms)}}class U_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function B_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ic:t})}}class Ll{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ll(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return tl(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(B_(this.Ic)&&KA.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class YA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kl(e)}bc(e,n,r,i=!1){return new Ll({Ic:e,methodName:n,wc:r,path:Ke.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $_(t){const e=t._freezeSettings(),n=kl(t._databaseId);return new YA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XA(t,e,n,r,i,s={}){const a=t.bc(s.merge||s.mergeFields?2:0,e,n,i);xf("Data must be an object, but it was:",a,r);const l=H_(r,a);let u,h;if(s.merge)u=new Pt(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const p=Jc(e,g,n);if(!a.contains(p))throw new H(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);q_(d,p)||d.push(p)}u=new Pt(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new GA(new Et(l),u,h)}class bl extends Ml{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bl}}function JA(t,e,n){return new Ll({Ic:3,wc:e.settings.wc,methodName:t._methodName,Rc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cf extends Ml{constructor(e,n){super(e),this.Sc=n}_toFieldTransform(e){const n=JA(this,e,!0),r=this.Sc.map(s=>co(s,n)),i=new Ci(r);return new BS(e.path,i)}isEqual(e){return e instanceof Cf&&qs(this.Sc,e.Sc)}}function ZA(t,e,n,r){const i=t.bc(1,e,n);xf("Data must be an object, but it was:",i,r);const s=[],a=Et.empty();fr(r,(u,h)=>{const d=Rf(e,u,n);h=nr(h);const g=i.mc(d);if(h instanceof bl)s.push(d);else{const p=co(h,g);p!=null&&(s.push(d),a.set(d,p))}});const l=new Pt(s);return new U_(a,l,i.fieldTransforms)}function e2(t,e,n,r,i,s){const a=t.bc(1,e,n),l=[Jc(e,r,n)],u=[i];if(s.length%2!=0)throw new H(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(Jc(e,s[p])),u.push(s[p+1]);const h=[],d=Et.empty();for(let p=l.length-1;p>=0;--p)if(!q_(h,l[p])){const I=l[p];let R=u[p];R=nr(R);const V=a.mc(I);if(R instanceof bl)h.push(I);else{const M=co(R,V);M!=null&&(h.push(I),d.set(I,M))}}const g=new Pt(h);return new U_(d,g,a.fieldTransforms)}function co(t,e){if(W_(t=nr(t)))return xf("Unsupported field value:",e,t),H_(t,e);if(t instanceof Ml)return function(r,i){if(!B_(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=co(l,i.fc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=nr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=je.fromDate(r);return{timestampValue:Xa(i.serializer,s)}}if(r instanceof je){const s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xa(i.serializer,s)}}if(r instanceof If)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ki)return{bytesValue:a_(i.serializer,r._byteString)};if(r instanceof At){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:af(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Af)return function(a,l){return{mapValue:{fields:{[Lv]:{stringValue:bv},[qa]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.gc("VectorValues must only contain numeric values.");return rf(l.serializer,h)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${wf(r)}`)}(t,e)}function H_(t,e){const n={};return kv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fr(t,(r,i)=>{const s=co(i,e.Ac(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function W_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof If||t instanceof ki||t instanceof At||t instanceof Ml||t instanceof Af)}function xf(t,e,n){if(!W_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wf(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function Jc(t,e,n){if((e=nr(e))instanceof Ol)return e._internalPath;if(typeof e=="string")return Rf(t,e);throw tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const t2=new RegExp("[~\\*/\\[\\]]");function Rf(t,e,n){if(e.search(t2)>=0)throw tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ol(...e.split("."))._internalPath}catch{throw tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tl(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new H(L.INVALID_ARGUMENT,l+t+u)}function q_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(K_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class n2 extends Q_{data(){return super.data()}}function K_(t,e){return typeof e=="string"?Rf(t,e):e instanceof Ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i2{convertValue(e,n="none"){switch(or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[qa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Pe(a.doubleValue));return new Af(s)}convertGeoPoint(e){return new If(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ys(e));default:return null}}convertTimestamp(e){const n=ir(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ae(d_(r),9688,{name:e});const i=new Xs(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||xn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G_ extends Q_{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ma(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(K_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ma extends G_{data(e={}){return super.data(e)}}class o2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ma(this._firestore,this._userDataWriter,r.key,r,new ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new ma(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ps(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ma(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ps(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:a2(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function a2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){t=fn(t,At);const e=fn(t.firestore,Pi);return BA(Sf(e),t._key).then(n=>J_(e,t,n))}class Y_ extends i2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function u2(t,e,n){t=fn(t,At);const r=fn(t.firestore,Pi),i=s2(t.converter,e);return X_(r,[XA($_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,cn.none())])}function c2(t,e,n,...r){t=fn(t,At);const i=fn(t.firestore,Pi),s=$_(i);let a;return a=typeof(e=nr(e))=="string"||e instanceof Ol?e2(s,"updateDoc",t._key,e,n,r):ZA(s,"updateDoc",t._key,e),X_(i,[a.toMutation(t._key,cn.exists(!0))])}function h2(t,...e){var n,r,i;t=nr(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Wm(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wm(e[a])){const g=e[a];e[a]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[a+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[a+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,h,d;if(t instanceof At)h=fn(t.firestore,Pi),d=Il(t._key.path),u={next:g=>{e[a]&&e[a](J_(h,t,g))},error:e[a+1],complete:e[a+2]};else{const g=fn(t,Nl);h=fn(g.firestore,Pi),d=g._query;const p=new Y_(h);u={next:I=>{e[a]&&e[a](new o2(h,p,g,I))},error:e[a+1],complete:e[a+2]},r2(t._query)}return function(p,I,R,V){const M=new b_(V),S=new R_(I,M,R);return p.asyncQueue.enqueueAndForget(async()=>C_(await Xc(p),S)),()=>{M.xu(),p.asyncQueue.enqueueAndForget(async()=>x_(await Xc(p),S))}}(Sf(h),d,l,u)}function X_(t,e){return function(r,i){const s=new Zn;return r.asyncQueue.enqueueAndForget(async()=>kA(await UA(r),i,s)),s.promise}(Sf(t),e)}function J_(t,e,n){const r=n.docs.get(e._key),i=new Y_(t);return new G_(t,i,e._key,r,new ps(n.hasPendingWrites,n.fromCache),e.converter)}function f2(...t){return new Cf("arrayUnion",t)}(function(e,n=!0){(function(i){Mi=i})(LT),$a(new Qs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Pi(new JT(r.getProvider("auth-internal")),new tS(a,r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xs(h.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),di(Yp,Xp,e),di(Yp,Xp,"esm2017")})();const d2={apiKey:"AIzaSyChDHK7XGt947lqn8_sLCJynqBop6YkEh4",authDomain:"twenty-dots.firebaseapp.com",projectId:"twenty-dots",storageBucket:"twenty-dots.appspot.com",messagingSenderId:"751012829918",appId:"1:751012829918:web:865348edbf86434539c04f",measurementId:"G-BHYZPRQ09G"},p2=gv(d2),Lu=qA(p2),Z_=X.createContext();function m2({children:t}){const[e,n]=X.useState(!1),[r,i]=X.useState(""),[s,a]=X.useState(1),[l,u]=X.useState(0),[h,d]=X.useState([]),[g,p]=X.useState("waiting"),[I,R]=X.useState([]),[V,M]=X.useState([null,null,null,null,null]),[S,v]=X.useState(0),[A,N]=X.useState(null),[j,F]=X.useState([[],[]]),[E,y]=X.useState([1,2]),[_,T]=X.useState(!1);X.useEffect(()=>{if(!r)return;const w=Mu(Lu,"games",r),Ve=h2(w,Je=>{if(Je.exists()){const Oe=Je.data();n(!0),d(Oe.players||[]),p(Oe.gameState||"waiting"),R(Oe.boardState||[]),M(Oe.hands?Oe.hands[l]:[null,null,null,null,null]),v(Oe.activePlayer||0),N(Oe.winner||null),F(Oe.discardPiles||[[],[]]),y(Oe.dice||[1,2])}else n(!1)});return()=>Ve()},[r,l]);async function x(w){i(w);const Ve=Mu(Lu,"games",w),Je=await l2(Ve);Je.exists()?(Je.data().players||[]).length<2?(await c2(Ve,{players:f2({name:"Player 2"})}),u(1)):u(-1):(await u2(Ve,{players:[{name:"Player 1"}],gameState:"waiting",boardState:[],hands:[[null,null,null,null,null],[null,null,null,null,null]],activePlayer:0,winner:null,discardPiles:[[],[]],dice:[1,2]}),u(0))}async function P(w){r&&Mu(Lu,"games",r)}return C.jsx(Z_.Provider,{value:{connected:e,roomId:r,numPlayers:s,joinRoom:x,sendGameAction:P,playerIndex:l,players:h,gameState:g,boardState:I,hand:V,activePlayer:S,winner:A,discardPiles:j,dice:E,showTutorial:_,setShowTutorial:T},children:t})}function g2(){return X.useContext(Z_)}function y2({joinRoom:t,connected:e,roomId:n,numPlayers:r}){const[i,s]=X.useState("");function a(l){l.preventDefault(),i.trim()&&t(i.trim())}return C.jsx("div",{className:"room-joiner",children:e&&n?C.jsxs("div",{children:[C.jsxs("span",{children:["Room ID: ",C.jsx("b",{children:n})]}),C.jsxs("span",{children:["Players: ",r||1]})]}):C.jsxs("form",{onSubmit:a,children:[C.jsx("input",{value:i,onChange:l=>s(l.target.value),placeholder:"Enter Room Code",className:"room-input"}),C.jsx("button",{type:"submit",className:"join-btn",children:"Join Room"})]})})}function v2({onBack:t}){var N;const{connected:e,roomId:n,numPlayers:r,joinRoom:i,sendGameAction:s,gameActions:a,playerIndex:l,players:u,gameState:h,boardState:d,hand:g,activePlayer:p,winner:I,discardPiles:R,dice:V,showTutorial:M,setShowTutorial:S}=g2(),[v,A]=X.useState("easy");return C.jsxs("div",{className:"app-content",children:[C.jsx(av,{open:M,onClose:()=>S(!1)}),C.jsx("button",{"aria-label":"Show tutorial",className:"help-btn",title:"Show game tutorial",onClick:()=>S(!0),children:"?"}),C.jsx("button",{className:"back-btn",onClick:t,children:"Back"}),C.jsxs("div",{className:"header-bar",children:[C.jsx(Qh,{}),C.jsxs("div",{className:"mode-selector-row",children:["Mode:",C.jsx("button",{className:`mode-btn ${v==="easy"?"active":""}`,onClick:()=>A("easy"),children:"Easy"}),C.jsx("button",{className:`mode-btn ${v==="hard"?"active":""}`,onClick:()=>A("hard"),children:"Hard"})]})]}),C.jsx(y2,{joinRoom:i,connected:e,roomId:n,numPlayers:r}),C.jsx("div",{className:"scoreboard-row",children:C.jsx(cw,{players:u})}),C.jsxs("div",{className:"game-main",children:[C.jsxs("div",{className:"dice-side",children:[C.jsx(ov,{dice:V,gameState:h,sendGameAction:s,activePlayer:p,playerIndex:l,mode:v}),I&&C.jsx("div",{className:"fancy-winner",children:C.jsxs("span",{className:"winner-text",children:[I," wins! ",C.jsx("span",{className:"confetti-emoji",role:"img","aria-label":"confetti",children:"🎉"})]})})]}),C.jsxs("div",{className:"main-area",children:[C.jsx(sv,{boardState:d,activePlayer:p,playerIndex:l,sendGameAction:s,gameState:h,mode:v}),C.jsx("div",{className:"player-hand-row",children:(g||[]).map((j,F)=>j?C.jsxs("div",{className:`player-card player-card-${j.color}`,children:[j.row,j.col]},F):C.jsx("div",{className:"player-card player-card-empty",children:" "},F+"empty"))})]}),C.jsxs("div",{className:"player-areas-section",children:[C.jsx(za,{player:u[0],isActive:p===0&&h==="playing",discardPile:R[0],mode:v}),C.jsx(za,{player:u[1],isActive:p===1&&h==="playing",discardPile:R[1],isAI:(N=u[1])==null?void 0:N.isAI,mode:v})]})]}),C.jsx("footer",{className:"app-footer",children:C.jsxs("span",{children:["Made with ",C.jsx("span",{className:"emoji",children:"💡"})," by dabeejgames & Copilot"]})})]})}function _2({onBack:t}){return C.jsx(m2,{children:C.jsxs("div",{className:"app-root dots-bg",children:[C.jsx(lv,{}),C.jsx(v2,{onBack:t})]})})}function E2({onSingle:t,onMulti:e}){return C.jsxs("div",{style:{width:"100vw",height:"100vh",minHeight:400,minWidth:320,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:"none",zIndex:1},children:[C.jsx(Qh,{style:{fontSize:"2.4em",marginBottom:18}})," ",C.jsx("button",{onClick:t,style:{background:"#3498db",color:"#fff",fontWeight:700,fontSize:"1.25em",padding:"15px 40px",border:"none",borderRadius:12,margin:8,transition:"background 0.2s, box-shadow 0.2s",boxShadow:"0 3px 12px #3498db33, 0 2px 4px #0001",cursor:"pointer"},children:"Single Player"}),C.jsx("button",{onClick:e,style:{background:"#27ae60",color:"#fff",fontWeight:700,fontSize:"1.12em",padding:"13px 34px",border:"none",borderRadius:12,margin:8,transition:"background 0.2s, box-shadow 0.2s",boxShadow:"0 3px 12px #27ae6033, 0 2px 4px #0001",cursor:"pointer"},children:"Multiplayer"}),C.jsx("div",{style:{marginTop:32,color:"#999",fontSize:"1.05em"},children:C.jsx("span",{children:"By dabeejgames"})})]})}function w2(){const[t,e]=X.useState("menu");return C.jsxs(C.Fragment,{children:[t!=="menu"&&C.jsx(lv,{}),t==="menu"&&C.jsx(E2,{onSingle:()=>e("single"),onMulti:()=>e("multi")}),t==="single"&&C.jsx(lw,{onBack:()=>e("menu")}),t==="multi"&&C.jsx(_2,{onBack:()=>e("menu")})]})}bu.createRoot(document.getElementById("root")).render(C.jsx(B0.StrictMode,{children:C.jsx(w2,{})}));
